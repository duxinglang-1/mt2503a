GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 1


   1              		.file	"ABMLoader.c"
   4              		.text
   5              	Ltext0:
 439              	LC0:
 440 0000 424D5000 		.ascii "BMP\0"
 441              	LC1:
 442 0004 50424D00 		.ascii "PBM\0"
 443              	LC2:
 444 0008 4A504700 		.ascii "JPG\0"
 445              	LC3:
 446 000c 47494600 		.ascii "GIF\0"
 447              	LC4:
 448 0010 41424D00 		.ascii "ABM\0"
 449              	LC5:
 450 0014 41564900 		.ascii "AVI\0"
 451              	LC6:
 452 0018 33475000 		.ascii "3GP\0"
 453              	LC7:
 454 001c 4D503400 		.ascii "MP4\0"
 455              	LC8:
 456 0020 525600   		.ascii "RV\0"
 457              	LC9:
 458 0023 524D00   		.ascii "RM\0"
 459              	LC10:
 460 0026 524D5642 		.ascii "RMVB\0"
 460      00
 461              	LC11:
 462 002b 504E4700 		.ascii "PNG\0"
 463              	LC12:
 464 002f 50504E00 		.ascii "PPN\0"
 465              	LC13:
 466 0033 4D334400 		.ascii "M3D\0"
 467              	LC14:
 468 0037 434D5000 		.ascii "CMP\0"
 469              	LC15:
 470 003b 56495300 		.ascii "VIS\0"
 471              	LC16:
 472 003f 53564700 		.ascii "SVG\0"
 473              	LC17:
 474 0043 54544600 		.ascii "TTF\0"
 475              	LC18:
 476 0047 53544600 		.ascii "STF\0"
 477              	LC19:
 478 004b 43434300 		.ascii "CCC\0"
 479              	LC20:
 480 004f 4B545800 		.ascii "KTX\0"
 481 0053 8DB60000 		.align 32
 481      00008DBC 
 481      27000000 
 481      00
 482              	_image_resource_info:
 483 0060 00000000 		.long	LC0
 484 0064 01       		.byte	1
 485 0065 000000   		.space 3
 486 0068 04000000 		.long	LC1
 487 006c 04       		.byte	4
 488 006d 000000   		.space 3
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 2


 489 0070 08000000 		.long	LC2
 490 0074 09       		.byte	9
 491 0075 000000   		.space 3
 492 0078 0C000000 		.long	LC3
 493 007c 03       		.byte	3
 494 007d 000000   		.space 3
 495 0080 10000000 		.long	LC4
 496 0084 28       		.byte	40
 497 0085 000000   		.space 3
 498 0088 14000000 		.long	LC5
 499 008c 0C       		.byte	12
 500 008d 000000   		.space 3
 501 0090 18000000 		.long	LC6
 502 0094 0E       		.byte	14
 503 0095 000000   		.space 3
 504 0098 1C000000 		.long	LC7
 505 009c 10       		.byte	16
 506 009d 000000   		.space 3
 507 00a0 20000000 		.long	LC8
 508 00a4 4A       		.byte	74
 509 00a5 000000   		.space 3
 510 00a8 23000000 		.long	LC9
 511 00ac 4C       		.byte	76
 512 00ad 000000   		.space 3
 513 00b0 26000000 		.long	LC10
 514 00b4 4E       		.byte	78
 515 00b5 000000   		.space 3
 516 00b8 2B000000 		.long	LC11
 517 00bc 13       		.byte	19
 518 00bd 000000   		.space 3
 519 00c0 2F000000 		.long	LC12
 520 00c4 48       		.byte	72
 521 00c5 000000   		.space 3
 522 00c8 33000000 		.long	LC13
 523 00cc 19       		.byte	25
 524 00cd 000000   		.space 3
 525 00d0 37000000 		.long	LC14
 526 00d4 1D       		.byte	29
 527 00d5 000000   		.space 3
 528 00d8 3B000000 		.long	LC15
 529 00dc 31       		.byte	49
 530 00dd 000000   		.space 3
 531 00e0 3F000000 		.long	LC16
 532 00e4 1B       		.byte	27
 533 00e5 000000   		.space 3
 534 00e8 43000000 		.long	LC17
 535 00ec 49       		.byte	73
 536 00ed 000000   		.space 3
 537 00f0 47000000 		.long	LC18
 538 00f4 49       		.byte	73
 539 00f5 000000   		.space 3
 540 00f8 4B000000 		.long	LC19
 541 00fc 49       		.byte	73
 542 00fd 000000   		.space 3
 543 0100 4F000000 		.long	LC20
 544 0104 43       		.byte	67
 545 0105 000000   		.space 3
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 3


 673              		.align 2
 674              	_log2_table:
 675 0108 0200     		.word	2
 676 010a 0400     		.word	4
 677 010c 0800     		.word	8
 678 010e 1000     		.word	16
 679 0110 2000     		.word	32
 680 0112 4000     		.word	64
 681 0114 8000     		.word	128
 682 0116 0001     		.word	256
 683 0118 0002     		.word	512
 684 011a 0004     		.word	1024
 685 011c 0008     		.word	2048
 686 011e 0010     		.word	4096
 687 0120 0020     		.word	8192
 688 0122 0040     		.word	16384
 689 0124 0080     		.word	-32768
 694              	_COLOR_REDUCE_24_TO_16:
   1:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
   2:../../MMI/Resource/ABMLoader.c **** *  Copyright Statement:
   3:../../MMI/Resource/ABMLoader.c **** *  --------------------
   4:../../MMI/Resource/ABMLoader.c **** *  This software is protected by Copyright and the information contained
   5:../../MMI/Resource/ABMLoader.c **** *  herein is confidential. The software may not be copied and the information
   6:../../MMI/Resource/ABMLoader.c **** *  contained herein may not be used or disclosed except with the written
   7:../../MMI/Resource/ABMLoader.c **** *  permission of MediaTek Inc. (C) 2005
   8:../../MMI/Resource/ABMLoader.c **** *
   9:../../MMI/Resource/ABMLoader.c **** *  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
  10:../../MMI/Resource/ABMLoader.c **** *  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
  11:../../MMI/Resource/ABMLoader.c **** *  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
  12:../../MMI/Resource/ABMLoader.c **** *  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
  13:../../MMI/Resource/ABMLoader.c **** *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
  14:../../MMI/Resource/ABMLoader.c **** *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
  15:../../MMI/Resource/ABMLoader.c **** *  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
  16:../../MMI/Resource/ABMLoader.c **** *  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
  17:../../MMI/Resource/ABMLoader.c **** *  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
  18:../../MMI/Resource/ABMLoader.c **** *  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
  19:../../MMI/Resource/ABMLoader.c **** *  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
  20:../../MMI/Resource/ABMLoader.c **** *  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
  21:../../MMI/Resource/ABMLoader.c **** *
  22:../../MMI/Resource/ABMLoader.c **** *  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
  23:../../MMI/Resource/ABMLoader.c **** *  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
  24:../../MMI/Resource/ABMLoader.c **** *  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
  25:../../MMI/Resource/ABMLoader.c **** *  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
  26:../../MMI/Resource/ABMLoader.c **** *  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
  27:../../MMI/Resource/ABMLoader.c **** *
  28:../../MMI/Resource/ABMLoader.c **** *  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
  29:../../MMI/Resource/ABMLoader.c **** *  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
  30:../../MMI/Resource/ABMLoader.c **** *  LAWS PRINCIPLES.	ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
  31:../../MMI/Resource/ABMLoader.c **** *  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
  32:../../MMI/Resource/ABMLoader.c **** *  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
  33:../../MMI/Resource/ABMLoader.c **** *
  34:../../MMI/Resource/ABMLoader.c **** *****************************************************************************/
  35:../../MMI/Resource/ABMLoader.c **** 
  36:../../MMI/Resource/ABMLoader.c **** /*******************************************************************************
  37:../../MMI/Resource/ABMLoader.c ****  * Filename:
  38:../../MMI/Resource/ABMLoader.c ****  * ---------
  39:../../MMI/Resource/ABMLoader.c ****  *  ABMLoader.c
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 4


  40:../../MMI/Resource/ABMLoader.c ****  *
  41:../../MMI/Resource/ABMLoader.c ****  * Project:
  42:../../MMI/Resource/ABMLoader.c ****  * --------
  43:../../MMI/Resource/ABMLoader.c ****  *  PlutoMMI
  44:../../MMI/Resource/ABMLoader.c ****  *
  45:../../MMI/Resource/ABMLoader.c ****  * Description:
  46:../../MMI/Resource/ABMLoader.c ****  * ------------
  47:../../MMI/Resource/ABMLoader.c ****  *  Alpha BitMap (ABM) encoder
  48:../../MMI/Resource/ABMLoader.c ****  *
  49:../../MMI/Resource/ABMLoader.c ****  *  1. The search algorithm of the color index table is binary search.
  50:../../MMI/Resource/ABMLoader.c ****  *  2. The ABM encoder only support 8, 24, and 32-bit bitmap input.
  51:../../MMI/Resource/ABMLoader.c ****  *  3. ABM only supports up to 65536 colors.
  52:../../MMI/Resource/ABMLoader.c ****  *  4. The ABM palette color format is:
  53:../../MMI/Resource/ABMLoader.c ****  *     a. 16-bit for 16-bit MAIN BASE LAYER (MOST CASE)
  54:../../MMI/Resource/ABMLoader.c ****  *     b. 24-bit for 24-bit and 32-bit MAIN BASE LAYER
  55:../../MMI/Resource/ABMLoader.c ****  * 
  56:../../MMI/Resource/ABMLoader.c ****  * Author:
  57:../../MMI/Resource/ABMLoader.c ****  * -------
  58:../../MMI/Resource/ABMLoader.c ****  * -------
  59:../../MMI/Resource/ABMLoader.c ****  *
  60:../../MMI/Resource/ABMLoader.c ****  *============================================================================
  61:../../MMI/Resource/ABMLoader.c ****  *			   HISTORY
  62:../../MMI/Resource/ABMLoader.c ****  * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
  63:../../MMI/Resource/ABMLoader.c ****  *------------------------------------------------------------------------------
  64:../../MMI/Resource/ABMLoader.c ****  * removed!
  65:../../MMI/Resource/ABMLoader.c ****  *
  66:../../MMI/Resource/ABMLoader.c ****  * removed!
  67:../../MMI/Resource/ABMLoader.c ****  * removed!
  68:../../MMI/Resource/ABMLoader.c ****  * removed!
  69:../../MMI/Resource/ABMLoader.c ****  *
  70:../../MMI/Resource/ABMLoader.c ****  * removed!
  71:../../MMI/Resource/ABMLoader.c ****  * removed!
  72:../../MMI/Resource/ABMLoader.c ****  * removed!
  73:../../MMI/Resource/ABMLoader.c ****  *
  74:../../MMI/Resource/ABMLoader.c ****  * removed!
  75:../../MMI/Resource/ABMLoader.c ****  * removed!
  76:../../MMI/Resource/ABMLoader.c ****  * removed!
  77:../../MMI/Resource/ABMLoader.c ****  *
  78:../../MMI/Resource/ABMLoader.c ****  * removed!
  79:../../MMI/Resource/ABMLoader.c ****  * removed!
  80:../../MMI/Resource/ABMLoader.c ****  * removed!
  81:../../MMI/Resource/ABMLoader.c ****  *
  82:../../MMI/Resource/ABMLoader.c ****  * removed!
  83:../../MMI/Resource/ABMLoader.c ****  * removed!
  84:../../MMI/Resource/ABMLoader.c ****  * removed!
  85:../../MMI/Resource/ABMLoader.c ****  *
  86:../../MMI/Resource/ABMLoader.c ****  * removed!
  87:../../MMI/Resource/ABMLoader.c ****  * removed!
  88:../../MMI/Resource/ABMLoader.c ****  * removed!
  89:../../MMI/Resource/ABMLoader.c ****  *
  90:../../MMI/Resource/ABMLoader.c ****  * removed!
  91:../../MMI/Resource/ABMLoader.c ****  * removed!
  92:../../MMI/Resource/ABMLoader.c ****  * removed!
  93:../../MMI/Resource/ABMLoader.c ****  *
  94:../../MMI/Resource/ABMLoader.c ****  * removed!
  95:../../MMI/Resource/ABMLoader.c ****  * removed!
  96:../../MMI/Resource/ABMLoader.c ****  * removed!
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 5


  97:../../MMI/Resource/ABMLoader.c ****  *
  98:../../MMI/Resource/ABMLoader.c ****  * removed!
  99:../../MMI/Resource/ABMLoader.c ****  * removed!
 100:../../MMI/Resource/ABMLoader.c ****  * removed!
 101:../../MMI/Resource/ABMLoader.c ****  *
 102:../../MMI/Resource/ABMLoader.c ****  * removed!
 103:../../MMI/Resource/ABMLoader.c ****  * removed!
 104:../../MMI/Resource/ABMLoader.c ****  * removed!
 105:../../MMI/Resource/ABMLoader.c ****  *
 106:../../MMI/Resource/ABMLoader.c ****  * removed!
 107:../../MMI/Resource/ABMLoader.c ****  * removed!
 108:../../MMI/Resource/ABMLoader.c ****  * removed!
 109:../../MMI/Resource/ABMLoader.c ****  *
 110:../../MMI/Resource/ABMLoader.c ****  * removed!
 111:../../MMI/Resource/ABMLoader.c ****  * removed!
 112:../../MMI/Resource/ABMLoader.c ****  * removed!
 113:../../MMI/Resource/ABMLoader.c ****  *
 114:../../MMI/Resource/ABMLoader.c ****  * removed!
 115:../../MMI/Resource/ABMLoader.c ****  * removed!
 116:../../MMI/Resource/ABMLoader.c ****  * removed!
 117:../../MMI/Resource/ABMLoader.c ****  *
 118:../../MMI/Resource/ABMLoader.c ****  * removed!
 119:../../MMI/Resource/ABMLoader.c ****  * removed!
 120:../../MMI/Resource/ABMLoader.c ****  * removed!
 121:../../MMI/Resource/ABMLoader.c ****  *
 122:../../MMI/Resource/ABMLoader.c ****  * removed!
 123:../../MMI/Resource/ABMLoader.c ****  * removed!
 124:../../MMI/Resource/ABMLoader.c ****  * removed!
 125:../../MMI/Resource/ABMLoader.c ****  *
 126:../../MMI/Resource/ABMLoader.c ****  * removed!
 127:../../MMI/Resource/ABMLoader.c ****  * removed!
 128:../../MMI/Resource/ABMLoader.c ****  * removed!
 129:../../MMI/Resource/ABMLoader.c ****  *
 130:../../MMI/Resource/ABMLoader.c ****  * removed!
 131:../../MMI/Resource/ABMLoader.c ****  * removed!
 132:../../MMI/Resource/ABMLoader.c ****  * removed!
 133:../../MMI/Resource/ABMLoader.c ****  *
 134:../../MMI/Resource/ABMLoader.c ****  * removed!
 135:../../MMI/Resource/ABMLoader.c ****  * removed!
 136:../../MMI/Resource/ABMLoader.c ****  * removed!
 137:../../MMI/Resource/ABMLoader.c ****  *
 138:../../MMI/Resource/ABMLoader.c ****  * removed!
 139:../../MMI/Resource/ABMLoader.c ****  * removed!
 140:../../MMI/Resource/ABMLoader.c ****  * removed!
 141:../../MMI/Resource/ABMLoader.c ****  *
 142:../../MMI/Resource/ABMLoader.c ****  * removed!
 143:../../MMI/Resource/ABMLoader.c ****  * removed!
 144:../../MMI/Resource/ABMLoader.c ****  * removed!
 145:../../MMI/Resource/ABMLoader.c ****  *
 146:../../MMI/Resource/ABMLoader.c ****  * removed!
 147:../../MMI/Resource/ABMLoader.c ****  * removed!
 148:../../MMI/Resource/ABMLoader.c ****  * removed!
 149:../../MMI/Resource/ABMLoader.c ****  *
 150:../../MMI/Resource/ABMLoader.c ****  * removed!
 151:../../MMI/Resource/ABMLoader.c ****  * removed!
 152:../../MMI/Resource/ABMLoader.c ****  * removed!
 153:../../MMI/Resource/ABMLoader.c ****  *
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 6


 154:../../MMI/Resource/ABMLoader.c ****  * removed!
 155:../../MMI/Resource/ABMLoader.c ****  * removed!
 156:../../MMI/Resource/ABMLoader.c ****  * removed!
 157:../../MMI/Resource/ABMLoader.c ****  *
 158:../../MMI/Resource/ABMLoader.c ****  * removed!
 159:../../MMI/Resource/ABMLoader.c ****  * removed!
 160:../../MMI/Resource/ABMLoader.c ****  * removed!
 161:../../MMI/Resource/ABMLoader.c ****  *
 162:../../MMI/Resource/ABMLoader.c ****  * removed!
 163:../../MMI/Resource/ABMLoader.c ****  * removed!
 164:../../MMI/Resource/ABMLoader.c ****  * removed!
 165:../../MMI/Resource/ABMLoader.c ****  *
 166:../../MMI/Resource/ABMLoader.c ****  * removed!
 167:../../MMI/Resource/ABMLoader.c ****  * removed!
 168:../../MMI/Resource/ABMLoader.c ****  * removed!
 169:../../MMI/Resource/ABMLoader.c ****  *
 170:../../MMI/Resource/ABMLoader.c ****  * removed!
 171:../../MMI/Resource/ABMLoader.c ****  * removed!
 172:../../MMI/Resource/ABMLoader.c ****  * removed!
 173:../../MMI/Resource/ABMLoader.c ****  *
 174:../../MMI/Resource/ABMLoader.c ****  * removed!
 175:../../MMI/Resource/ABMLoader.c ****  * removed!
 176:../../MMI/Resource/ABMLoader.c ****  * removed!
 177:../../MMI/Resource/ABMLoader.c ****  *
 178:../../MMI/Resource/ABMLoader.c ****  * removed!
 179:../../MMI/Resource/ABMLoader.c ****  * removed!
 180:../../MMI/Resource/ABMLoader.c ****  * removed!
 181:../../MMI/Resource/ABMLoader.c ****  *
 182:../../MMI/Resource/ABMLoader.c ****  * removed!
 183:../../MMI/Resource/ABMLoader.c ****  * removed!
 184:../../MMI/Resource/ABMLoader.c ****  * removed!
 185:../../MMI/Resource/ABMLoader.c ****  *
 186:../../MMI/Resource/ABMLoader.c ****  * removed!
 187:../../MMI/Resource/ABMLoader.c ****  * removed!
 188:../../MMI/Resource/ABMLoader.c ****  * removed!
 189:../../MMI/Resource/ABMLoader.c ****  *
 190:../../MMI/Resource/ABMLoader.c ****  * removed!
 191:../../MMI/Resource/ABMLoader.c ****  * removed!
 192:../../MMI/Resource/ABMLoader.c ****  * removed!
 193:../../MMI/Resource/ABMLoader.c ****  *
 194:../../MMI/Resource/ABMLoader.c ****  * removed!
 195:../../MMI/Resource/ABMLoader.c ****  * removed!
 196:../../MMI/Resource/ABMLoader.c ****  * removed!
 197:../../MMI/Resource/ABMLoader.c ****  *
 198:../../MMI/Resource/ABMLoader.c ****  * removed!
 199:../../MMI/Resource/ABMLoader.c ****  * removed!
 200:../../MMI/Resource/ABMLoader.c ****  * removed!
 201:../../MMI/Resource/ABMLoader.c ****  *
 202:../../MMI/Resource/ABMLoader.c ****  * removed!
 203:../../MMI/Resource/ABMLoader.c ****  * removed!
 204:../../MMI/Resource/ABMLoader.c ****  * removed!
 205:../../MMI/Resource/ABMLoader.c ****  *
 206:../../MMI/Resource/ABMLoader.c ****  * removed!
 207:../../MMI/Resource/ABMLoader.c ****  * removed!
 208:../../MMI/Resource/ABMLoader.c ****  * removed!
 209:../../MMI/Resource/ABMLoader.c ****  *
 210:../../MMI/Resource/ABMLoader.c ****  * removed!
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 7


 211:../../MMI/Resource/ABMLoader.c ****  * removed!
 212:../../MMI/Resource/ABMLoader.c ****  * removed!
 213:../../MMI/Resource/ABMLoader.c ****  *
 214:../../MMI/Resource/ABMLoader.c ****  * removed!
 215:../../MMI/Resource/ABMLoader.c ****  * removed!
 216:../../MMI/Resource/ABMLoader.c ****  * removed!
 217:../../MMI/Resource/ABMLoader.c ****  *
 218:../../MMI/Resource/ABMLoader.c ****  * removed!
 219:../../MMI/Resource/ABMLoader.c ****  * removed!
 220:../../MMI/Resource/ABMLoader.c ****  * removed!
 221:../../MMI/Resource/ABMLoader.c ****  *
 222:../../MMI/Resource/ABMLoader.c ****  * removed!
 223:../../MMI/Resource/ABMLoader.c ****  * removed!
 224:../../MMI/Resource/ABMLoader.c ****  * removed!
 225:../../MMI/Resource/ABMLoader.c ****  *
 226:../../MMI/Resource/ABMLoader.c ****  * removed!
 227:../../MMI/Resource/ABMLoader.c ****  * removed!
 228:../../MMI/Resource/ABMLoader.c ****  * removed!
 229:../../MMI/Resource/ABMLoader.c ****  *
 230:../../MMI/Resource/ABMLoader.c ****  * removed!
 231:../../MMI/Resource/ABMLoader.c ****  * removed!
 232:../../MMI/Resource/ABMLoader.c ****  * removed!
 233:../../MMI/Resource/ABMLoader.c ****  *
 234:../../MMI/Resource/ABMLoader.c ****  * removed!
 235:../../MMI/Resource/ABMLoader.c ****  * removed!
 236:../../MMI/Resource/ABMLoader.c ****  * removed!
 237:../../MMI/Resource/ABMLoader.c ****  *
 238:../../MMI/Resource/ABMLoader.c ****  * removed!
 239:../../MMI/Resource/ABMLoader.c ****  * removed!
 240:../../MMI/Resource/ABMLoader.c ****  * removed!
 241:../../MMI/Resource/ABMLoader.c ****  *
 242:../../MMI/Resource/ABMLoader.c ****  * removed!
 243:../../MMI/Resource/ABMLoader.c ****  * removed!
 244:../../MMI/Resource/ABMLoader.c ****  * removed!
 245:../../MMI/Resource/ABMLoader.c ****  *
 246:../../MMI/Resource/ABMLoader.c ****  * removed!
 247:../../MMI/Resource/ABMLoader.c ****  * removed!
 248:../../MMI/Resource/ABMLoader.c ****  * removed!
 249:../../MMI/Resource/ABMLoader.c ****  *
 250:../../MMI/Resource/ABMLoader.c ****  * removed!
 251:../../MMI/Resource/ABMLoader.c ****  * removed!
 252:../../MMI/Resource/ABMLoader.c ****  * removed!
 253:../../MMI/Resource/ABMLoader.c ****  *
 254:../../MMI/Resource/ABMLoader.c ****  * removed!
 255:../../MMI/Resource/ABMLoader.c ****  * removed!
 256:../../MMI/Resource/ABMLoader.c ****  * removed!
 257:../../MMI/Resource/ABMLoader.c ****  *
 258:../../MMI/Resource/ABMLoader.c ****  * removed!
 259:../../MMI/Resource/ABMLoader.c ****  * removed!
 260:../../MMI/Resource/ABMLoader.c ****  * removed!
 261:../../MMI/Resource/ABMLoader.c ****  *
 262:../../MMI/Resource/ABMLoader.c ****  * removed!
 263:../../MMI/Resource/ABMLoader.c ****  * removed!
 264:../../MMI/Resource/ABMLoader.c ****  * removed!
 265:../../MMI/Resource/ABMLoader.c ****  *
 266:../../MMI/Resource/ABMLoader.c ****  * removed!
 267:../../MMI/Resource/ABMLoader.c ****  * removed!
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 8


 268:../../MMI/Resource/ABMLoader.c ****  * removed!
 269:../../MMI/Resource/ABMLoader.c ****  *
 270:../../MMI/Resource/ABMLoader.c ****  * removed!
 271:../../MMI/Resource/ABMLoader.c ****  * removed!
 272:../../MMI/Resource/ABMLoader.c ****  * removed!
 273:../../MMI/Resource/ABMLoader.c ****  *
 274:../../MMI/Resource/ABMLoader.c ****  * removed!
 275:../../MMI/Resource/ABMLoader.c ****  * removed!
 276:../../MMI/Resource/ABMLoader.c ****  * removed!
 277:../../MMI/Resource/ABMLoader.c ****  *
 278:../../MMI/Resource/ABMLoader.c ****  * removed!
 279:../../MMI/Resource/ABMLoader.c ****  * removed!
 280:../../MMI/Resource/ABMLoader.c ****  * removed!
 281:../../MMI/Resource/ABMLoader.c ****  *
 282:../../MMI/Resource/ABMLoader.c ****  * removed!
 283:../../MMI/Resource/ABMLoader.c ****  * removed!
 284:../../MMI/Resource/ABMLoader.c ****  * removed!
 285:../../MMI/Resource/ABMLoader.c ****  *
 286:../../MMI/Resource/ABMLoader.c ****  * removed!
 287:../../MMI/Resource/ABMLoader.c ****  * removed!
 288:../../MMI/Resource/ABMLoader.c ****  * removed!
 289:../../MMI/Resource/ABMLoader.c ****  *
 290:../../MMI/Resource/ABMLoader.c ****  * removed!
 291:../../MMI/Resource/ABMLoader.c ****  * removed!
 292:../../MMI/Resource/ABMLoader.c ****  * removed!
 293:../../MMI/Resource/ABMLoader.c ****  *
 294:../../MMI/Resource/ABMLoader.c ****  * removed!
 295:../../MMI/Resource/ABMLoader.c ****  * removed!
 296:../../MMI/Resource/ABMLoader.c ****  * removed!
 297:../../MMI/Resource/ABMLoader.c ****  *
 298:../../MMI/Resource/ABMLoader.c ****  * removed!
 299:../../MMI/Resource/ABMLoader.c ****  * removed!
 300:../../MMI/Resource/ABMLoader.c ****  * removed!
 301:../../MMI/Resource/ABMLoader.c ****  *
 302:../../MMI/Resource/ABMLoader.c ****  * removed!
 303:../../MMI/Resource/ABMLoader.c ****  * removed!
 304:../../MMI/Resource/ABMLoader.c ****  * removed!
 305:../../MMI/Resource/ABMLoader.c ****  *
 306:../../MMI/Resource/ABMLoader.c ****  * removed!
 307:../../MMI/Resource/ABMLoader.c ****  * removed!
 308:../../MMI/Resource/ABMLoader.c ****  * removed!
 309:../../MMI/Resource/ABMLoader.c ****  *
 310:../../MMI/Resource/ABMLoader.c ****  * removed!
 311:../../MMI/Resource/ABMLoader.c ****  * removed!
 312:../../MMI/Resource/ABMLoader.c ****  * removed!
 313:../../MMI/Resource/ABMLoader.c ****  *
 314:../../MMI/Resource/ABMLoader.c ****  * removed!
 315:../../MMI/Resource/ABMLoader.c ****  * removed!
 316:../../MMI/Resource/ABMLoader.c ****  * removed!
 317:../../MMI/Resource/ABMLoader.c ****  *
 318:../../MMI/Resource/ABMLoader.c ****  *------------------------------------------------------------------------------
 319:../../MMI/Resource/ABMLoader.c ****  * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 320:../../MMI/Resource/ABMLoader.c ****  *============================================================================
 321:../../MMI/Resource/ABMLoader.c ****  ****************************************************************************/
 322:../../MMI/Resource/ABMLoader.c **** 
 323:../../MMI/Resource/ABMLoader.c **** /*
 324:../../MMI/Resource/ABMLoader.c ****  * THIS FILE IS USED FOR RESOURCE GENERATOR AND MTE ONLY.
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 9


 325:../../MMI/Resource/ABMLoader.c ****  */
 326:../../MMI/Resource/ABMLoader.c **** #if !defined(__MTK_TARGET__) || defined(__RESOURCE_GEN_)
 327:../../MMI/Resource/ABMLoader.c **** 
 328:../../MMI/Resource/ABMLoader.c **** /***************************************************************************** 
 329:../../MMI/Resource/ABMLoader.c ****  * Include
 330:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 331:../../MMI/Resource/ABMLoader.c **** #include <stdio.h>
 332:../../MMI/Resource/ABMLoader.c **** #include "MMI_features.h"
 333:../../MMI/Resource/ABMLoader.c **** #include "ABMLoader.h"
 334:../../MMI/Resource/ABMLoader.c **** #include "gui_resource_type.h"
 335:../../MMI/Resource/ABMLoader.c **** 
 336:../../MMI/Resource/ABMLoader.c **** #include "gdi_include.h"
 337:../../MMI/Resource/ABMLoader.c **** #include "gdi_image_alpha_bmp_v2_internal.h"
 338:../../MMI/Resource/ABMLoader.c **** #include "WriteResUtil.h" // for ResgenImageOutStream
 339:../../MMI/Resource/ABMLoader.c **** 
 340:../../MMI/Resource/ABMLoader.c **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
 341:../../MMI/Resource/ABMLoader.c **** #include "ImageGetDimension.h"
 342:../../MMI/Resource/ABMLoader.c **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
 343:../../MMI/Resource/ABMLoader.c **** 
 344:../../MMI/Resource/ABMLoader.c **** /*RHR*/
 345:../../MMI/Resource/ABMLoader.c **** #include "MMIDataType.h"
 346:../../MMI/Resource/ABMLoader.c **** 
 347:../../MMI/Resource/ABMLoader.c **** #ifdef __RESOURCE_GEN_
 348:../../MMI/Resource/ABMLoader.c ****     #include "ResgenLogCAPI.h"   // Resgen Log APIs
 349:../../MMI/Resource/ABMLoader.c ****     #include "OfflineResPopCAPI.h"
 350:../../MMI/Resource/ABMLoader.c **** #endif //__RESOURCE_GEN_
 351:../../MMI/Resource/ABMLoader.c **** /***************************************************************************** 
 352:../../MMI/Resource/ABMLoader.c ****  * extern variable
 353:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 354:../../MMI/Resource/ABMLoader.c **** extern int toolFlag;
 355:../../MMI/Resource/ABMLoader.c **** extern FILE *dest_file;
 356:../../MMI/Resource/ABMLoader.c **** 
 357:../../MMI/Resource/ABMLoader.c **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
 358:../../MMI/Resource/ABMLoader.c **** extern FILE *enfb_img_data_file;
 359:../../MMI/Resource/ABMLoader.c **** extern U32 enfb_offset;
 360:../../MMI/Resource/ABMLoader.c **** extern U32 enfb_size;
 361:../../MMI/Resource/ABMLoader.c **** extern MMI_BOOL ENFBAssociatedIDAdded;
 362:../../MMI/Resource/ABMLoader.c **** #endif
 363:../../MMI/Resource/ABMLoader.c **** 
 364:../../MMI/Resource/ABMLoader.c **** /***************************************************************************** 
 365:../../MMI/Resource/ABMLoader.c ****  * Define
 366:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 367:../../MMI/Resource/ABMLoader.c **** #ifdef __RESOURCE_GEN_ 
 368:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_TAG       "ABMLOADER"
 369:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_D(format, args...) RES_LOG_D((ABMLDR_TAG), (format) , ##args)
 370:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_V(format, args...) RES_LOG_V((ABMLDR_TAG), (format) , ##args)
 371:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_W(format, args...) RES_LOG_W((ABMLDR_TAG), (format) , ##args)
 372:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_E(format, args...) RES_LOG_E((ABMLDR_TAG), (format) , ##args)
 373:../../MMI/Resource/ABMLoader.c **** #else
 374:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_D(format, ...) printf((format), ##__VA_ARGS__)
 375:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_V(format, ...) printf((format), ##__VA_ARGS__)
 376:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_W(format, ...) printf((format), ##__VA_ARGS__)
 377:../../MMI/Resource/ABMLoader.c ****     #define ABMLDR_LOG_E(format, ...) printf((format), ##__VA_ARGS__)
 378:../../MMI/Resource/ABMLoader.c **** #endif  //__RESOURCE_GEN_
 379:../../MMI/Resource/ABMLoader.c **** 
 380:../../MMI/Resource/ABMLoader.c **** /* check 16-bit RGB color format */
 381:../../MMI/Resource/ABMLoader.c **** #define RGB_16_BIT_TYPE         DRV_RGB_TO_HW(0, 255, 0)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 10


 382:../../MMI/Resource/ABMLoader.c **** #define COLOR_FORMAT_RGB3553    0xE007  /* 6205B, 6218 */
 383:../../MMI/Resource/ABMLoader.c **** #define COLOR_FORMAT_RGB565     0x07E0  /* other than 6205B and 6218 */
 384:../../MMI/Resource/ABMLoader.c **** 
 385:../../MMI/Resource/ABMLoader.c **** 
 386:../../MMI/Resource/ABMLoader.c **** /*
 387:../../MMI/Resource/ABMLoader.c ****  * color primitives
 388:../../MMI/Resource/ABMLoader.c ****  */
 389:../../MMI/Resource/ABMLoader.c **** #define GET_32(bp)  ((U32)((bp)[0] | ((bp)[1] << 8) | ((bp)[2] << 16) | ((bp)[3] << 24)))
 390:../../MMI/Resource/ABMLoader.c **** #define GET_24(bp)  ((U32)((bp)[0] | ((bp)[1] << 8)) | ((bp)[2] << 16))
 391:../../MMI/Resource/ABMLoader.c **** #define GET_16(bp)  ((U32)((bp)[0] | ((bp)[1] << 8)))
 392:../../MMI/Resource/ABMLoader.c ****     
 393:../../MMI/Resource/ABMLoader.c **** #define PUT_16(mem, c)  *((U16*)(mem)) = (c)
 394:../../MMI/Resource/ABMLoader.c **** #define PUT_24(mem, c)             \
 395:../../MMI/Resource/ABMLoader.c ****     do                             \
 396:../../MMI/Resource/ABMLoader.c ****     {                              \
 397:../../MMI/Resource/ABMLoader.c ****         U8 *mem_8 = (U8*)(mem);    \
 398:../../MMI/Resource/ABMLoader.c ****         mem_8[0] = (c);            \
 399:../../MMI/Resource/ABMLoader.c ****         mem_8[1] = (c) >> 8;       \
 400:../../MMI/Resource/ABMLoader.c ****         mem_8[2] = (c) >> 16;      \
 401:../../MMI/Resource/ABMLoader.c ****     } while (0)
 402:../../MMI/Resource/ABMLoader.c ****     
 403:../../MMI/Resource/ABMLoader.c **** #define ARGB(a, r, g, b)            (((a) << 24) | ((r) << 16) | ((g) << 8) | (b))
 404:../../MMI/Resource/ABMLoader.c **** #define RGB(r, g, b)                (((r) << 16) | ((g) << 8) | (b))
 405:../../MMI/Resource/ABMLoader.c ****     
 406:../../MMI/Resource/ABMLoader.c **** /* RGB888 */
 407:../../MMI/Resource/ABMLoader.c **** #define R_OF_RGB888(c)              (((c) <<  8) >> 24)
 408:../../MMI/Resource/ABMLoader.c **** #define G_OF_RGB888(c)              (((c) << 16) >> 24)
 409:../../MMI/Resource/ABMLoader.c **** #define B_OF_RGB888(c)              (((c) << 24) >> 24)
 410:../../MMI/Resource/ABMLoader.c ****     
 411:../../MMI/Resource/ABMLoader.c **** /* ARGB8888 */
 412:../../MMI/Resource/ABMLoader.c **** #define A_OF_ARGB8888(c)            ((c) >> 24)
 413:../../MMI/Resource/ABMLoader.c **** #define R_OF_ARGB8888(c)            R_OF_RGB888(c)
 414:../../MMI/Resource/ABMLoader.c **** #define G_OF_ARGB8888(c)            G_OF_RGB888(c)
 415:../../MMI/Resource/ABMLoader.c **** #define B_OF_ARGB8888(c)            B_OF_RGB888(c)
 416:../../MMI/Resource/ABMLoader.c ****     
 417:../../MMI/Resource/ABMLoader.c **** /* RGB565 */
 418:../../MMI/Resource/ABMLoader.c **** #define R_OF_RGB565(c)              (((c) << 16) >> 27)
 419:../../MMI/Resource/ABMLoader.c **** #define G_OF_RGB565(c)              (((c) << 21) >> 26)
 420:../../MMI/Resource/ABMLoader.c **** #define B_OF_RGB565(c)              (((c) << 27) >> 27)
 421:../../MMI/Resource/ABMLoader.c ****     
 422:../../MMI/Resource/ABMLoader.c **** /* RGB3553 */
 423:../../MMI/Resource/ABMLoader.c **** #define R_OF_RGB3553(c)             (((c) << 24) >> 27)
 424:../../MMI/Resource/ABMLoader.c **** #define G_OF_RGB3553(c)             ((((c) & 0x7) << 3) | (((c) >> 13) & 0x7))
 425:../../MMI/Resource/ABMLoader.c **** #define B_OF_RGB3553(c)             (((c) << 19) >> 27)
 426:../../MMI/Resource/ABMLoader.c ****  
 427:../../MMI/Resource/ABMLoader.c **** /* RGB16 */
 428:../../MMI/Resource/ABMLoader.c **** #define R_OF_RGB16(c)               ((RGB_16_BIT_TYPE == COLOR_FORMAT_RGB565) ? R_OF_RGB565(c) : R_
 429:../../MMI/Resource/ABMLoader.c **** #define G_OF_RGB16(c)               ((RGB_16_BIT_TYPE == COLOR_FORMAT_RGB565) ? G_OF_RGB565(c) : G_
 430:../../MMI/Resource/ABMLoader.c **** #define B_OF_RGB16(c)               ((RGB_16_BIT_TYPE == COLOR_FORMAT_RGB565) ? B_OF_RGB565(c) : B_
 431:../../MMI/Resource/ABMLoader.c **** 
 432:../../MMI/Resource/ABMLoader.c **** #define RGB565(r, g, b)             (((r) << 11) | ((g) << 5) | (b))
 433:../../MMI/Resource/ABMLoader.c **** #define RGB3553(r, g, b)            (((r) << 3) | ((b) << 8) | ((g) >> 3) | (((g) & 0x7) << 13))
 434:../../MMI/Resource/ABMLoader.c ****     
 435:../../MMI/Resource/ABMLoader.c **** #define ARGB8888_TO_RGB565(c)       RGB565(R_OF_ARGB8888(c) >> 3, G_OF_ARGB8888(c) >> 2, B_OF_ARGB8
 436:../../MMI/Resource/ABMLoader.c **** #define ARGB8888_TO_RGB3553(c)      RGB3553(R_OF_ARGB8888(c) >> 3, G_OF_ARGB8888(c) >> 2, B_OF_ARGB
 437:../../MMI/Resource/ABMLoader.c **** 
 438:../../MMI/Resource/ABMLoader.c **** #define ARGB8888_TO_RGB16(c)        ((RGB_16_BIT_TYPE == COLOR_FORMAT_RGB565) ? ARGB8888_TO_RGB565(
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 11


 439:../../MMI/Resource/ABMLoader.c **** 
 440:../../MMI/Resource/ABMLoader.c **** 
 441:../../MMI/Resource/ABMLoader.c **** /*
 442:../../MMI/Resource/ABMLoader.c ****  * ABM bitstream writer
 443:../../MMI/Resource/ABMLoader.c ****  */
 444:../../MMI/Resource/ABMLoader.c **** /* initialize bitstream variables */
 445:../../MMI/Resource/ABMLoader.c **** #define BW_INIT(mem_ptr)                \
 446:../../MMI/Resource/ABMLoader.c ****     {                                   \
 447:../../MMI/Resource/ABMLoader.c ****         U32 bits_buf;                   \
 448:../../MMI/Resource/ABMLoader.c ****         U16 *bits_mem_ptr;              \
 449:../../MMI/Resource/ABMLoader.c ****         U32 bits_left;                  \
 450:../../MMI/Resource/ABMLoader.c ****                                         \
 451:../../MMI/Resource/ABMLoader.c ****         bits_mem_ptr = mem_ptr;         \
 452:../../MMI/Resource/ABMLoader.c ****         bits_buf = 0;                   \
 453:../../MMI/Resource/ABMLoader.c ****         bits_left = 0;
 454:../../MMI/Resource/ABMLoader.c **** 
 455:../../MMI/Resource/ABMLoader.c **** /* flush bitstream buffer */
 456:../../MMI/Resource/ABMLoader.c **** #define BW_END()                        \
 457:../../MMI/Resource/ABMLoader.c ****         if (bits_left > 0)              \
 458:../../MMI/Resource/ABMLoader.c ****         {                               \
 459:../../MMI/Resource/ABMLoader.c ****             *bits_mem_ptr++ = bits_buf; \
 460:../../MMI/Resource/ABMLoader.c ****         }                               \
 461:../../MMI/Resource/ABMLoader.c ****     }
 462:../../MMI/Resource/ABMLoader.c **** 
 463:../../MMI/Resource/ABMLoader.c **** /* write bpp bits of data into the bitstream */
 464:../../MMI/Resource/ABMLoader.c **** #define BW_WRITE(data, bpp)                                     \
 465:../../MMI/Resource/ABMLoader.c ****     bits_buf |= ((data) & ((1 << (bpp)) - 1)) << bits_left;     \
 466:../../MMI/Resource/ABMLoader.c ****     bits_left += bpp;                                           \
 467:../../MMI/Resource/ABMLoader.c ****     if (bits_left >= 16)                                        \
 468:../../MMI/Resource/ABMLoader.c ****     {                                                           \
 469:../../MMI/Resource/ABMLoader.c ****         *bits_mem_ptr++ = bits_buf;                             \
 470:../../MMI/Resource/ABMLoader.c ****         bits_buf >>= 16;                                        \
 471:../../MMI/Resource/ABMLoader.c ****         bits_left -= 16;                                        \
 472:../../MMI/Resource/ABMLoader.c ****     }
 473:../../MMI/Resource/ABMLoader.c **** 
 474:../../MMI/Resource/ABMLoader.c **** 
 475:../../MMI/Resource/ABMLoader.c **** /* PBM header size */
 476:../../MMI/Resource/ABMLoader.c **** #define PBM_HEADER_SIZE                 13
 477:../../MMI/Resource/ABMLoader.c **** 
 478:../../MMI/Resource/ABMLoader.c **** 
 479:../../MMI/Resource/ABMLoader.c **** /*
 480:../../MMI/Resource/ABMLoader.c ****  * windows bitmap
 481:../../MMI/Resource/ABMLoader.c ****  */
 482:../../MMI/Resource/ABMLoader.c **** #define BITMAPFILEHEADER_SIZE           14
 483:../../MMI/Resource/ABMLoader.c **** #define BITMAPINFO_HEADER_SIZE          40
 484:../../MMI/Resource/ABMLoader.c **** 
 485:../../MMI/Resource/ABMLoader.c **** 
 486:../../MMI/Resource/ABMLoader.c **** /*
 487:../../MMI/Resource/ABMLoader.c ****  * ABM encoder
 488:../../MMI/Resource/ABMLoader.c ****  */
 489:../../MMI/Resource/ABMLoader.c **** #define ABM_MAX_COLOR_NUM               384000                   /* ABM supports up to 800*480 colo
 490:../../MMI/Resource/ABMLoader.c **** #define ABM_HEADER_SIZE                 12
 491:../../MMI/Resource/ABMLoader.c **** 
 492:../../MMI/Resource/ABMLoader.c **** #if defined(MAIN_MEDIA_LAYER_BITS_PER_PIXEL) && (MAIN_MEDIA_LAYER_BITS_PER_PIXEL == 24) && defined(
 493:../../MMI/Resource/ABMLoader.c ****     #define ABM_PALETTE_BPP                24
 494:../../MMI/Resource/ABMLoader.c **** #else
 495:../../MMI/Resource/ABMLoader.c ****     #define ABM_PALETTE_BPP                16
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 12


 496:../../MMI/Resource/ABMLoader.c **** #endif
 497:../../MMI/Resource/ABMLoader.c **** 
 498:../../MMI/Resource/ABMLoader.c **** 
 499:../../MMI/Resource/ABMLoader.c **** 
 500:../../MMI/Resource/ABMLoader.c **** #define TRANSPARENT_COLOR_24            RGB(10, 11, 12)         /* transparent color of 24-bit bitm
 501:../../MMI/Resource/ABMLoader.c **** #define TRANSPARENT_COLOR_32            ARGB(255, 10, 11, 12)   /* transparent color of 32-bit bitm
 502:../../MMI/Resource/ABMLoader.c **** 
 503:../../MMI/Resource/ABMLoader.c **** 
 504:../../MMI/Resource/ABMLoader.c **** /***************************************************************************** 
 505:../../MMI/Resource/ABMLoader.c ****  * Typedef
 506:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 507:../../MMI/Resource/ABMLoader.c **** typedef U32 mycolor;
 508:../../MMI/Resource/ABMLoader.c **** 
 509:../../MMI/Resource/ABMLoader.c **** /* abm encoder structure*/
 510:../../MMI/Resource/ABMLoader.c **** typedef struct
 511:../../MMI/Resource/ABMLoader.c **** {
 512:../../MMI/Resource/ABMLoader.c ****     S32     bmp_width;                  /* bitmap width */
 513:../../MMI/Resource/ABMLoader.c ****     S32     bmp_height;                 /* bitmap height */
 514:../../MMI/Resource/ABMLoader.c ****     S32     bmp_bpp;                    /* bitmap bits per pixel */
 515:../../MMI/Resource/ABMLoader.c ****     S32     bmp_palette_num;            /* number of colors in the palette */  
 516:../../MMI/Resource/ABMLoader.c ****     mycolor bmp_palette[256];           /* bitmap palette (8-bit bpp max) */    
 517:../../MMI/Resource/ABMLoader.c ****     U8      *bmp_pixel_start_p;         /* pointer to bitmap data */
 518:../../MMI/Resource/ABMLoader.c ****     U32     line_padding_bytes;         /* line padding bytes */
 519:../../MMI/Resource/ABMLoader.c ****     
 520:../../MMI/Resource/ABMLoader.c ****     S32     x1, y1, x2, y2;             /* image bounding box */
 521:../../MMI/Resource/ABMLoader.c **** 
 522:../../MMI/Resource/ABMLoader.c ****     S32     src_key_color_enable;       /* for PBM source key color */
 523:../../MMI/Resource/ABMLoader.c ****     S32     is_windows_bmp;             /* windows BMP 32-bit is always XRGB8888, not expected ARGB
 524:../../MMI/Resource/ABMLoader.c ****     S32     is_fully_opaque;
 525:../../MMI/Resource/ABMLoader.c **** } abm_enc_struct;
 526:../../MMI/Resource/ABMLoader.c **** 
 527:../../MMI/Resource/ABMLoader.c **** /* color index table */
 528:../../MMI/Resource/ABMLoader.c **** typedef struct
 529:../../MMI/Resource/ABMLoader.c **** {
 530:../../MMI/Resource/ABMLoader.c ****     mycolor color_table[ABM_MAX_COLOR_NUM]; /* color index table */
 531:../../MMI/Resource/ABMLoader.c ****     S32     color_num;                      /* number of colors in the table */
 532:../../MMI/Resource/ABMLoader.c ****     
 533:../../MMI/Resource/ABMLoader.c ****     S32     last_search_idx;                /* last search index */
 534:../../MMI/Resource/ABMLoader.c **** } color_index_table_struct;
 535:../../MMI/Resource/ABMLoader.c **** 
 536:../../MMI/Resource/ABMLoader.c **** /* Bit-Stream data structure */
 537:../../MMI/Resource/ABMLoader.c **** typedef struct
 538:../../MMI/Resource/ABMLoader.c **** {
 539:../../MMI/Resource/ABMLoader.c ****     U8 *mem_ptr;
 540:../../MMI/Resource/ABMLoader.c ****     U32 buf;
 541:../../MMI/Resource/ABMLoader.c ****     U32 buf_bits;
 542:../../MMI/Resource/ABMLoader.c **** } ab2_bs_struct;
 543:../../MMI/Resource/ABMLoader.c **** 
 544:../../MMI/Resource/ABMLoader.c **** 
 545:../../MMI/Resource/ABMLoader.c **** /***************************************************************************** 
 546:../../MMI/Resource/ABMLoader.c ****  * Static Declaration
 547:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 548:../../MMI/Resource/ABMLoader.c **** /* file buffer to keep the whole bitmap file */
 549:../../MMI/Resource/ABMLoader.c **** /* color index table */
 550:../../MMI/Resource/ABMLoader.c **** /* abm encoder context */
 551:../../MMI/Resource/ABMLoader.c **** 
 552:../../MMI/Resource/ABMLoader.c **** /* table to calculate ceiling(log2(x)) */
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 13


 553:../../MMI/Resource/ABMLoader.c **** static const U16 log2_table[15] = {2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 1638
 554:../../MMI/Resource/ABMLoader.c **** 
 555:../../MMI/Resource/ABMLoader.c **** typedef struct
 556:../../MMI/Resource/ABMLoader.c **** {
 557:../../MMI/Resource/ABMLoader.c ****     abm_enc_struct abm_enc;
 558:../../MMI/Resource/ABMLoader.c ****     color_index_table_struct color_idx_tab;
 559:../../MMI/Resource/ABMLoader.c ****     U32 abm_palette_bpp;
 560:../../MMI/Resource/ABMLoader.c **** } ABM_Context;
 561:../../MMI/Resource/ABMLoader.c **** 
 562:../../MMI/Resource/ABMLoader.c **** /***************************************************************************** 
 563:../../MMI/Resource/ABMLoader.c ****  * static Function
 564:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 565:../../MMI/Resource/ABMLoader.c **** static S32  search_color(mycolor search_color, ABM_Context * abm_context);
 566:../../MMI/Resource/ABMLoader.c **** static void insert_color_at(mycolor c, S32 insert_idx, ABM_Context * abm_context);
 567:../../MMI/Resource/ABMLoader.c **** static U32 add_color_if_new(mycolor c, ABM_Context * abm_context);
 568:../../MMI/Resource/ABMLoader.c **** static U32  get_normal_color_num(ABM_Context * abm_context);
 569:../../MMI/Resource/ABMLoader.c **** 
 570:../../MMI/Resource/ABMLoader.c **** static U32  get_file_size(FILE *fp);
 571:../../MMI/Resource/ABMLoader.c **** static S32  parse_bitmap(U8* bmp_data_p, U32 input_bmp_file_size, ABM_Context * abm_context);
 572:../../MMI/Resource/ABMLoader.c **** 
 573:../../MMI/Resource/ABMLoader.c **** static void update_image_bounding_box(S32 x, S32 y, ABM_Context * abm_context);
 574:../../MMI/Resource/ABMLoader.c **** static void limit_image_bounding_box(ABM_Context * abm_context);
 575:../../MMI/Resource/ABMLoader.c **** 
 576:../../MMI/Resource/ABMLoader.c **** static U32  log2_ceiling(U32 x);
 577:../../MMI/Resource/ABMLoader.c **** 
 578:../../MMI/Resource/ABMLoader.c **** static U32 abmenc_build_color_index_table(ABM_Context * abm_context);
 579:../../MMI/Resource/ABMLoader.c **** static U32  abmenc_encode(U8* out_mem_p, ABM_Context * abm_context);
 580:../../MMI/Resource/ABMLoader.c **** 
 581:../../MMI/Resource/ABMLoader.c **** /* 
 582:../../MMI/Resource/ABMLoader.c ****  * color reduction algorithms
 583:../../MMI/Resource/ABMLoader.c ****  */
 584:../../MMI/Resource/ABMLoader.c **** static U32 COLOR_REDUCE_24_TO_16(U32 c)
 585:../../MMI/Resource/ABMLoader.c **** {
 696              	LM1:
 697 0126 55       		pushl	%ebp
 698 0127 89E5     		movl	%esp, %ebp
 699 0129 83EC04   		subl	$4, %esp
 586:../../MMI/Resource/ABMLoader.c ****     if(A_OF_ARGB8888(c) == 0xFF || A_OF_ARGB8888(c) == 0x00)
 701              	LM2:
 702 012c 8B4508   		movl	8(%ebp), %eax
 703 012f C1E818   		shrl	$24, %eax
 704 0132 3DFF0000 		cmpl	$255, %eax
 704      00
 705 0137 740A     		je	L33
 706 0139 8B4508   		movl	8(%ebp), %eax
 707 013c C1E818   		shrl	$24, %eax
 708 013f 85C0     		testl	%eax, %eax
 709 0141 750F     		jne	L32
 710              	L33:
 587:../../MMI/Resource/ABMLoader.c ****     {
 588:../../MMI/Resource/ABMLoader.c ****         return c &= 0xFFF8FCF8;
 712              	LM3:
 713 0143 816508F8 		andl	$-459528, 8(%ebp)
 713      FCF8FF
 714 014a 8B4508   		movl	8(%ebp), %eax
 715 014d 8945FC   		movl	%eax, -4(%ebp)
 716 0150 EB0D     		jmp	L31
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 14


 717              	L32:
 589:../../MMI/Resource/ABMLoader.c ****     }
 590:../../MMI/Resource/ABMLoader.c ****     else
 591:../../MMI/Resource/ABMLoader.c ****     {
 592:../../MMI/Resource/ABMLoader.c ****         #if defined(__LOW_COST_SUPPORT_COMMON__) && defined(__COSMOS_MMI_PACKAGE__) && defined(GDI_
 593:../../MMI/Resource/ABMLoader.c ****             return c &= 0xFCF8FCF8;
 594:../../MMI/Resource/ABMLoader.c ****         #else
 595:../../MMI/Resource/ABMLoader.c ****             return c &= 0xFFF8FCF8;
 719              	LM4:
 720 0152 816508F8 		andl	$-459528, 8(%ebp)
 720      FCF8FF
 721 0159 8B4508   		movl	8(%ebp), %eax
 722 015c 8945FC   		movl	%eax, -4(%ebp)
 596:../../MMI/Resource/ABMLoader.c ****         #endif
 597:../../MMI/Resource/ABMLoader.c ****     }
 598:../../MMI/Resource/ABMLoader.c **** }
 724              	LM5:
 725              	L31:
 726 015f 8B45FC   		movl	-4(%ebp), %eax
 727 0162 C9       		leave
 728 0163 C3       		ret
 729              	Lscope0:
 734              	_COLOR_REDUCE_24_TO_18:
 599:../../MMI/Resource/ABMLoader.c **** 
 600:../../MMI/Resource/ABMLoader.c **** static U32 COLOR_REDUCE_24_TO_18(U32 c)
 601:../../MMI/Resource/ABMLoader.c **** {
 736              	LM6:
 737 0164 55       		pushl	%ebp
 738 0165 89E5     		movl	%esp, %ebp
 602:../../MMI/Resource/ABMLoader.c ****     return ((c) & 0xFFFCFCFC);  /* clear R[1:0], G[1:0], B[1:0] */
 740              	LM7:
 741 0167 8B4508   		movl	8(%ebp), %eax
 742 016a 25FCFCFC 		andl	$-197380, %eax
 742      FF
 603:../../MMI/Resource/ABMLoader.c **** }
 744              	LM8:
 745 016f 5D       		popl	%ebp
 746 0170 C3       		ret
 747              	Lscope1:
 753              	_COLOR_REDUCE:
 604:../../MMI/Resource/ABMLoader.c **** 
 605:../../MMI/Resource/ABMLoader.c **** static U32 COLOR_REDUCE(U32 c, ABM_Context * abm_context)
 606:../../MMI/Resource/ABMLoader.c **** {
 755              	LM9:
 756 0171 55       		pushl	%ebp
 757 0172 89E5     		movl	%esp, %ebp
 758 0174 83EC08   		subl	$8, %esp
 607:../../MMI/Resource/ABMLoader.c ****     return ((abm_context->abm_palette_bpp == 16) ? COLOR_REDUCE_24_TO_16(c) : (c));
 760              	LM10:
 761 0177 8B450C   		movl	12(%ebp), %eax
 762 017a 83B83C74 		cmpl	$16, 1537084(%eax)
 762      170010
 763 0181 7510     		jne	L37
 764 0183 8B4508   		movl	8(%ebp), %eax
 765 0186 890424   		movl	%eax, (%esp)
 766 0189 E898FFFF 		call	_COLOR_REDUCE_24_TO_16
 766      FF
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 15


 767 018e 8945FC   		movl	%eax, -4(%ebp)
 768 0191 EB06     		jmp	L38
 769              	L37:
 770 0193 8B4508   		movl	8(%ebp), %eax
 771 0196 8945FC   		movl	%eax, -4(%ebp)
 772              	L38:
 773 0199 8B45FC   		movl	-4(%ebp), %eax
 608:../../MMI/Resource/ABMLoader.c **** }
 775              	LM11:
 776 019c C9       		leave
 777 019d C3       		ret
 778              	Lscope2:
 784              	_search_color:
 609:../../MMI/Resource/ABMLoader.c **** 
 610:../../MMI/Resource/ABMLoader.c **** 
 611:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 612:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
 613:../../MMI/Resource/ABMLoader.c ****  *  search_color
 614:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 615:../../MMI/Resource/ABMLoader.c ****  *  search a color in the color table (binary search)
 616:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 617:../../MMI/Resource/ABMLoader.c ****  *  search_color       [IN] color to search
 618:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 619:../../MMI/Resource/ABMLoader.c ****  *  color index in the color table if found, otherwise ABMENC_COLOR_NOT_FOUND (-1)
 620:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 621:../../MMI/Resource/ABMLoader.c **** static S32 search_color(mycolor search_color, ABM_Context * abm_context)
 622:../../MMI/Resource/ABMLoader.c **** {
 786              	LM12:
 787 019e 55       		pushl	%ebp
 788 019f 89E5     		movl	%esp, %ebp
 789 01a1 83EC14   		subl	$20, %esp
 623:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 624:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 625:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 626:../../MMI/Resource/ABMLoader.c ****     S32     start_idx, end_idx, center_idx;
 627:../../MMI/Resource/ABMLoader.c ****     mycolor c;   
 628:../../MMI/Resource/ABMLoader.c **** 
 629:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 630:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 631:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 632:../../MMI/Resource/ABMLoader.c ****     start_idx = 0;
 791              	LM13:
 792              	LBB2:
 793 01a4 C745FC00 		movl	$0, -4(%ebp)
 793      000000
 633:../../MMI/Resource/ABMLoader.c ****     end_idx = abm_context->color_idx_tab.color_num - 1;
 795              	LM14:
 796 01ab 8B450C   		movl	12(%ebp), %eax
 797 01ae 8B803474 		movl	1537076(%eax), %eax
 797      1700
 798 01b4 48       		decl	%eax
 799 01b5 8945F8   		movl	%eax, -8(%ebp)
 634:../../MMI/Resource/ABMLoader.c **** 
 635:../../MMI/Resource/ABMLoader.c ****     while (start_idx <= end_idx) 
 801              	LM15:
 802              	L40:
 803 01b8 8B45FC   		movl	-4(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 16


 804 01bb 3B45F8   		cmpl	-8(%ebp), %eax
 805 01be 7E02     		jle	L42
 806 01c0 EB52     		jmp	L41
 807              	L42:
 636:../../MMI/Resource/ABMLoader.c ****     {
 637:../../MMI/Resource/ABMLoader.c ****         center_idx = (start_idx + end_idx) / 2;
 809              	LM16:
 810 01c2 8B45F8   		movl	-8(%ebp), %eax
 811 01c5 8B55FC   		movl	-4(%ebp), %edx
 812 01c8 01C2     		addl	%eax, %edx
 813 01ca 89D0     		movl	%edx, %eax
 814 01cc C1F81F   		sarl	$31, %eax
 815 01cf C1E81F   		shrl	$31, %eax
 816 01d2 8D0410   		leal	(%eax,%edx), %eax
 817 01d5 D1F8     		sarl	%eax
 818 01d7 8945F4   		movl	%eax, -12(%ebp)
 638:../../MMI/Resource/ABMLoader.c ****         c = abm_context->color_idx_tab.color_table[center_idx];
 820              	LM17:
 821 01da 8B550C   		movl	12(%ebp), %edx
 822 01dd 8B45F4   		movl	-12(%ebp), %eax
 823 01e0 8B848234 		movl	1076(%edx,%eax,4), %eax
 823      040000
 824 01e7 8945F0   		movl	%eax, -16(%ebp)
 639:../../MMI/Resource/ABMLoader.c **** 
 640:../../MMI/Resource/ABMLoader.c ****         if (search_color < c)
 826              	LM18:
 827 01ea 8B4508   		movl	8(%ebp), %eax
 828 01ed 3B45F0   		cmpl	-16(%ebp), %eax
 829 01f0 7309     		jae	L43
 641:../../MMI/Resource/ABMLoader.c ****         {
 642:../../MMI/Resource/ABMLoader.c ****             start_idx = center_idx + 1;
 831              	LM19:
 832 01f2 8B45F4   		movl	-12(%ebp), %eax
 833 01f5 40       		incl	%eax
 834 01f6 8945FC   		movl	%eax, -4(%ebp)
 835 01f9 EBBD     		jmp	L40
 836              	L43:
 643:../../MMI/Resource/ABMLoader.c ****         }
 644:../../MMI/Resource/ABMLoader.c ****         else if (search_color > c)
 838              	LM20:
 839 01fb 8B4508   		movl	8(%ebp), %eax
 840 01fe 3B45F0   		cmpl	-16(%ebp), %eax
 841 0201 7609     		jbe	L45
 645:../../MMI/Resource/ABMLoader.c ****         {
 646:../../MMI/Resource/ABMLoader.c ****             end_idx = center_idx - 1;
 843              	LM21:
 844 0203 8B45F4   		movl	-12(%ebp), %eax
 845 0206 48       		decl	%eax
 846 0207 8945F8   		movl	%eax, -8(%ebp)
 847 020a EBAC     		jmp	L40
 848              	L45:
 647:../../MMI/Resource/ABMLoader.c ****         }
 648:../../MMI/Resource/ABMLoader.c ****         else
 649:../../MMI/Resource/ABMLoader.c ****         {
 650:../../MMI/Resource/ABMLoader.c ****             return center_idx;
 850              	LM22:
 851 020c 8B45F4   		movl	-12(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 17


 852 020f 8945EC   		movl	%eax, -20(%ebp)
 853 0212 EB13     		jmp	L39
 854              	L41:
 651:../../MMI/Resource/ABMLoader.c ****         }
 652:../../MMI/Resource/ABMLoader.c ****     } 
 653:../../MMI/Resource/ABMLoader.c **** 
 654:../../MMI/Resource/ABMLoader.c ****     /* keep the search index to speed up the search-and-insert operation, add_color_if_new() */
 655:../../MMI/Resource/ABMLoader.c ****     abm_context->color_idx_tab.last_search_idx = start_idx;
 856              	LM23:
 857 0214 8B550C   		movl	12(%ebp), %edx
 858 0217 8B45FC   		movl	-4(%ebp), %eax
 859 021a 89823874 		movl	%eax, 1537080(%edx)
 859      1700
 656:../../MMI/Resource/ABMLoader.c **** 
 657:../../MMI/Resource/ABMLoader.c ****     return ABMENC_COLOR_NOT_FOUND;
 861              	LM24:
 862 0220 C745ECFF 		movl	$-1, -20(%ebp)
 862      FFFFFF
 658:../../MMI/Resource/ABMLoader.c **** }
 864              	LM25:
 865              	L39:
 866              	LBE2:
 867 0227 8B45EC   		movl	-20(%ebp), %eax
 868 022a C9       		leave
 869 022b C3       		ret
 876              	Lscope3:
 883              	_insert_color_at:
 659:../../MMI/Resource/ABMLoader.c **** 
 660:../../MMI/Resource/ABMLoader.c **** 
 661:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 662:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
 663:../../MMI/Resource/ABMLoader.c ****  *  insert_color_at
 664:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 665:../../MMI/Resource/ABMLoader.c ****  *  insert a color at a specified index in the color table
 666:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 667:../../MMI/Resource/ABMLoader.c ****  *  c                [IN] color to add  
 668:../../MMI/Resource/ABMLoader.c ****  *  insert_idx       [IN] insertion index of the table
 669:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 670:../../MMI/Resource/ABMLoader.c ****  *  void
 671:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 672:../../MMI/Resource/ABMLoader.c **** static void insert_color_at(mycolor c, S32 insert_idx, ABM_Context * abm_context)
 673:../../MMI/Resource/ABMLoader.c **** {
 885              	LM26:
 886 022c 55       		pushl	%ebp
 887 022d 89E5     		movl	%esp, %ebp
 888 022f 53       		pushl	%ebx
 889 0230 83EC04   		subl	$4, %esp
 674:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 675:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 676:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 677:../../MMI/Resource/ABMLoader.c ****     S32     i;
 678:../../MMI/Resource/ABMLoader.c **** 
 679:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 680:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 681:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 682:../../MMI/Resource/ABMLoader.c ****     if (insert_idx >= ABM_MAX_COLOR_NUM)
 891              	LM27:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 18


 892              	LBB3:
 893 0233 817D0CFF 		cmpl	$383999, 12(%ebp)
 893      DB0500
 894 023a 7E02     		jle	L48
 683:../../MMI/Resource/ABMLoader.c ****     {
 684:../../MMI/Resource/ABMLoader.c ****         return;
 896              	LM28:
 897 023c EB51     		jmp	L47
 898              	L48:
 685:../../MMI/Resource/ABMLoader.c ****     }    
 686:../../MMI/Resource/ABMLoader.c ****     
 687:../../MMI/Resource/ABMLoader.c ****     /* insert at insert_idx */
 688:../../MMI/Resource/ABMLoader.c ****     for (i = abm_context->color_idx_tab.color_num - 1; i >= insert_idx; i--)
 900              	LM29:
 901 023e 8B4510   		movl	16(%ebp), %eax
 902 0241 8B803474 		movl	1537076(%eax), %eax
 902      1700
 903 0247 48       		decl	%eax
 904 0248 8945F8   		movl	%eax, -8(%ebp)
 905              	L49:
 906 024b 8B45F8   		movl	-8(%ebp), %eax
 907 024e 3B450C   		cmpl	12(%ebp), %eax
 908 0251 7D02     		jge	L52
 909 0253 EB21     		jmp	L50
 910              	L52:
 689:../../MMI/Resource/ABMLoader.c ****     {
 690:../../MMI/Resource/ABMLoader.c ****         abm_context->color_idx_tab.color_table[i + 1] = abm_context->color_idx_tab.color_table[i];
 912              	LM30:
 913 0255 8B5D10   		movl	16(%ebp), %ebx
 914 0258 8B4DF8   		movl	-8(%ebp), %ecx
 915 025b 8B5510   		movl	16(%ebp), %edx
 916 025e 8B45F8   		movl	-8(%ebp), %eax
 917 0261 8B848234 		movl	1076(%edx,%eax,4), %eax
 917      040000
 918 0268 89848B38 		movl	%eax, 1080(%ebx,%ecx,4)
 918      040000
 920              	LM31:
 921 026f 8D45F8   		leal	-8(%ebp), %eax
 922 0272 FF08     		decl	(%eax)
 923 0274 EBD5     		jmp	L49
 924              	L50:
 691:../../MMI/Resource/ABMLoader.c ****     }
 692:../../MMI/Resource/ABMLoader.c **** 
 693:../../MMI/Resource/ABMLoader.c ****     abm_context->color_idx_tab.color_table[insert_idx] = c;
 926              	LM32:
 927 0276 8B4D10   		movl	16(%ebp), %ecx
 928 0279 8B550C   		movl	12(%ebp), %edx
 929 027c 8B4508   		movl	8(%ebp), %eax
 930 027f 89849134 		movl	%eax, 1076(%ecx,%edx,4)
 930      040000
 694:../../MMI/Resource/ABMLoader.c ****     abm_context->color_idx_tab.color_num++;    
 932              	LM33:
 933 0286 8B4510   		movl	16(%ebp), %eax
 934 0289 FF803474 		incl	1537076(%eax)
 934      1700
 695:../../MMI/Resource/ABMLoader.c **** }
 936              	LM34:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 19


 937              	L47:
 938 028f 83C404   		addl	$4, %esp
 939 0292 5B       		popl	%ebx
 940 0293 5D       		popl	%ebp
 941 0294 C3       		ret
 942              	LBE3:
 946              	Lscope4:
 952              	_add_color_if_new:
 696:../../MMI/Resource/ABMLoader.c **** 
 697:../../MMI/Resource/ABMLoader.c **** 
 698:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 699:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
 700:../../MMI/Resource/ABMLoader.c ****  *  add_color_if_new
 701:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 702:../../MMI/Resource/ABMLoader.c ****  *  add a color if the color does not exist in the table
 703:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 704:../../MMI/Resource/ABMLoader.c ****  *  c       [IN] color to add
 705:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 706:../../MMI/Resource/ABMLoader.c ****  *  return ABM_ENC_OK if succeed
 707:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 708:../../MMI/Resource/ABMLoader.c **** static U32 add_color_if_new(mycolor c, ABM_Context * abm_context)
 709:../../MMI/Resource/ABMLoader.c **** {
 954              	LM35:
 955 0295 55       		pushl	%ebp
 956 0296 89E5     		movl	%esp, %ebp
 957 0298 83EC18   		subl	$24, %esp
 710:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 711:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 712:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 713:../../MMI/Resource/ABMLoader.c ****     S32     insert_idx;
 714:../../MMI/Resource/ABMLoader.c **** 
 715:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 716:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 717:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 718:../../MMI/Resource/ABMLoader.c ****     insert_idx = search_color(c, abm_context);
 959              	LM36:
 960              	LBB4:
 961 029b 8B450C   		movl	12(%ebp), %eax
 962 029e 89442404 		movl	%eax, 4(%esp)
 963 02a2 8B4508   		movl	8(%ebp), %eax
 964 02a5 890424   		movl	%eax, (%esp)
 965 02a8 E8F1FEFF 		call	_search_color
 965      FF
 966 02ad 8945FC   		movl	%eax, -4(%ebp)
 719:../../MMI/Resource/ABMLoader.c **** 
 720:../../MMI/Resource/ABMLoader.c ****     if (insert_idx == ABMENC_COLOR_NOT_FOUND)
 968              	LM37:
 969 02b0 837DFCFF 		cmpl	$-1, -4(%ebp)
 970 02b4 750E     		jne	L54
 721:../../MMI/Resource/ABMLoader.c ****     {
 722:../../MMI/Resource/ABMLoader.c ****         insert_idx = abm_context->color_idx_tab.last_search_idx;
 972              	LM38:
 973 02b6 8B450C   		movl	12(%ebp), %eax
 974 02b9 8B803874 		movl	1537080(%eax), %eax
 974      1700
 975 02bf 8945FC   		movl	%eax, -4(%ebp)
 976 02c2 EB09     		jmp	L55
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 20


 977              	L54:
 723:../../MMI/Resource/ABMLoader.c ****     }
 724:../../MMI/Resource/ABMLoader.c ****     else
 725:../../MMI/Resource/ABMLoader.c ****     {   /* found in the table, return */
 726:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_OK;
 979              	LM39:
 980 02c4 C745F803 		movl	$3, -8(%ebp)
 980      000000
 981 02cb EB38     		jmp	L53
 982              	L55:
 727:../../MMI/Resource/ABMLoader.c ****     }
 728:../../MMI/Resource/ABMLoader.c **** 
 729:../../MMI/Resource/ABMLoader.c ****     if (abm_context->color_idx_tab.color_num >= ABM_MAX_COLOR_NUM)
 984              	LM40:
 985 02cd 8B450C   		movl	12(%ebp), %eax
 986 02d0 81B83474 		cmpl	$383999, 1537076(%eax)
 986      1700FFDB 
 986      0500
 987 02da 7E09     		jle	L56
 730:../../MMI/Resource/ABMLoader.c ****     {
 731:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 989              	LM41:
 990 02dc C745F8FE 		movl	$-2, -8(%ebp)
 990      FFFFFF
 991 02e3 EB20     		jmp	L53
 992              	L56:
 732:../../MMI/Resource/ABMLoader.c ****     }
 733:../../MMI/Resource/ABMLoader.c ****     else
 734:../../MMI/Resource/ABMLoader.c ****     {
 735:../../MMI/Resource/ABMLoader.c ****         insert_color_at(c, insert_idx, abm_context);
 994              	LM42:
 995 02e5 8B450C   		movl	12(%ebp), %eax
 996 02e8 89442408 		movl	%eax, 8(%esp)
 997 02ec 8B45FC   		movl	-4(%ebp), %eax
 998 02ef 89442404 		movl	%eax, 4(%esp)
 999 02f3 8B4508   		movl	8(%ebp), %eax
 1000 02f6 890424   		movl	%eax, (%esp)
 1001 02f9 E82EFFFF 		call	_insert_color_at
 1001      FF
 736:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_OK;
 1003              	LM43:
 1004 02fe C745F803 		movl	$3, -8(%ebp)
 1004      000000
 737:../../MMI/Resource/ABMLoader.c ****     }
 738:../../MMI/Resource/ABMLoader.c **** }
 1006              	LM44:
 1007              	L53:
 1008              	LBE4:
 1009 0305 8B45F8   		movl	-8(%ebp), %eax
 1010 0308 C9       		leave
 1011 0309 C3       		ret
 1015              	Lscope5:
 1020              	_get_normal_color_num:
 739:../../MMI/Resource/ABMLoader.c **** 
 740:../../MMI/Resource/ABMLoader.c **** 
 741:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 742:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 21


 743:../../MMI/Resource/ABMLoader.c ****  *  get_normal_color_num
 744:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 745:../../MMI/Resource/ABMLoader.c ****  *  get the number of NORMAL colors
 746:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 747:../../MMI/Resource/ABMLoader.c ****  *  void
 748:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 749:../../MMI/Resource/ABMLoader.c ****  *  number of OPAQUE colors (alpha = 255) in the color index table
 750:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 751:../../MMI/Resource/ABMLoader.c **** static U32 get_normal_color_num(ABM_Context * abm_context)
 752:../../MMI/Resource/ABMLoader.c **** {
 1022              	LM45:
 1023 030a 55       		pushl	%ebp
 1024 030b 89E5     		movl	%esp, %ebp
 1025 030d 83EC04   		subl	$4, %esp
 753:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 754:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 755:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 756:../../MMI/Resource/ABMLoader.c ****     S32     i;
 757:../../MMI/Resource/ABMLoader.c ****     
 758:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 759:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 760:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 761:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < abm_context->color_idx_tab.color_num; i++)
 1027              	LM46:
 1028              	LBB5:
 1029 0310 C745FC00 		movl	$0, -4(%ebp)
 1029      000000
 1030              	L59:
 1031 0317 8B5508   		movl	8(%ebp), %edx
 1032 031a 8B45FC   		movl	-4(%ebp), %eax
 1033 031d 3B823474 		cmpl	1537076(%edx), %eax
 1033      1700
 1034 0323 7C02     		jl	L62
 1035 0325 EB20     		jmp	L60
 1036              	L62:
 762:../../MMI/Resource/ABMLoader.c ****     {
 763:../../MMI/Resource/ABMLoader.c ****         if (A_OF_ARGB8888(abm_context->color_idx_tab.color_table[i]) != 255)
 1038              	LM47:
 1039 0327 8B5508   		movl	8(%ebp), %edx
 1040 032a 8B45FC   		movl	-4(%ebp), %eax
 1041 032d 8B848234 		movl	1076(%edx,%eax,4), %eax
 1041      040000
 1042 0334 C1E818   		shrl	$24, %eax
 1043 0337 3DFF0000 		cmpl	$255, %eax
 1043      00
 1044 033c 7402     		je	L61
 764:../../MMI/Resource/ABMLoader.c ****         {
 765:../../MMI/Resource/ABMLoader.c ****             break;
 1046              	LM48:
 1047 033e EB07     		jmp	L60
 1049              	LM49:
 1050              	L61:
 1051 0340 8D45FC   		leal	-4(%ebp), %eax
 1052 0343 FF00     		incl	(%eax)
 1053 0345 EBD0     		jmp	L59
 1054              	L60:
 766:../../MMI/Resource/ABMLoader.c ****         }
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 22


 767:../../MMI/Resource/ABMLoader.c ****     }
 768:../../MMI/Resource/ABMLoader.c **** 
 769:../../MMI/Resource/ABMLoader.c ****     return i;
 1056              	LM50:
 1057 0347 8B45FC   		movl	-4(%ebp), %eax
 770:../../MMI/Resource/ABMLoader.c **** }
 1059              	LM51:
 1060 034a C9       		leave
 1061 034b C3       		ret
 1062              	LBE5:
 1066              	Lscope6:
 1071              	_get_file_size:
 771:../../MMI/Resource/ABMLoader.c **** 
 772:../../MMI/Resource/ABMLoader.c **** 
 773:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 774:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
 775:../../MMI/Resource/ABMLoader.c ****  *  get_file_size
 776:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 777:../../MMI/Resource/ABMLoader.c ****  *  return the file size in bytes
 778:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 779:../../MMI/Resource/ABMLoader.c ****  *  fp       [IN]   file pointer
 780:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 781:../../MMI/Resource/ABMLoader.c ****  *  file size in bytes
 782:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 783:../../MMI/Resource/ABMLoader.c **** static U32 get_file_size(FILE *fp)
 784:../../MMI/Resource/ABMLoader.c **** {
 1073              	LM52:
 1074 034c 55       		pushl	%ebp
 1075 034d 89E5     		movl	%esp, %ebp
 1076 034f 83EC18   		subl	$24, %esp
 785:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 786:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 787:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 788:../../MMI/Resource/ABMLoader.c ****     U32     fpos, file_size;
 789:../../MMI/Resource/ABMLoader.c **** 
 790:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 791:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 792:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 793:../../MMI/Resource/ABMLoader.c ****     /* save the current file position */
 794:../../MMI/Resource/ABMLoader.c ****     fpos = ftell(fp);
 1078              	LM53:
 1079              	LBB6:
 1080 0352 8B4508   		movl	8(%ebp), %eax
 1081 0355 890424   		movl	%eax, (%esp)
 1082 0358 E8000000 		call	_ftell
 1082      00
 1083 035d 8945FC   		movl	%eax, -4(%ebp)
 795:../../MMI/Resource/ABMLoader.c **** 
 796:../../MMI/Resource/ABMLoader.c ****     /* seek to the EOF */    
 797:../../MMI/Resource/ABMLoader.c ****     fseek(fp, 0, SEEK_END);
 1085              	LM54:
 1086 0360 C7442408 		movl	$2, 8(%esp)
 1086      02000000 
 1087 0368 C7442404 		movl	$0, 4(%esp)
 1087      00000000 
 1088 0370 8B4508   		movl	8(%ebp), %eax
 1089 0373 890424   		movl	%eax, (%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 23


 1090 0376 E8000000 		call	_fseek
 1090      00
 798:../../MMI/Resource/ABMLoader.c **** 
 799:../../MMI/Resource/ABMLoader.c ****     /* get file size */
 800:../../MMI/Resource/ABMLoader.c ****     file_size = ftell(fp);
 1092              	LM55:
 1093 037b 8B4508   		movl	8(%ebp), %eax
 1094 037e 890424   		movl	%eax, (%esp)
 1095 0381 E8000000 		call	_ftell
 1095      00
 1096 0386 8945F8   		movl	%eax, -8(%ebp)
 801:../../MMI/Resource/ABMLoader.c **** 
 802:../../MMI/Resource/ABMLoader.c ****     /* restore the old file position */
 803:../../MMI/Resource/ABMLoader.c ****     fseek(fp, fpos, SEEK_SET);
 1098              	LM56:
 1099 0389 C7442408 		movl	$0, 8(%esp)
 1099      00000000 
 1100 0391 8B45FC   		movl	-4(%ebp), %eax
 1101 0394 89442404 		movl	%eax, 4(%esp)
 1102 0398 8B4508   		movl	8(%ebp), %eax
 1103 039b 890424   		movl	%eax, (%esp)
 1104 039e E8000000 		call	_fseek
 1104      00
 804:../../MMI/Resource/ABMLoader.c **** 
 805:../../MMI/Resource/ABMLoader.c ****     return file_size;
 1106              	LM57:
 1107 03a3 8B45F8   		movl	-8(%ebp), %eax
 806:../../MMI/Resource/ABMLoader.c **** }
 1109              	LM58:
 1110 03a6 C9       		leave
 1111 03a7 C3       		ret
 1112              	LBE6:
 1117              	Lscope7:
 1124              	_parse_bitmap:
 807:../../MMI/Resource/ABMLoader.c **** 
 808:../../MMI/Resource/ABMLoader.c **** 
 809:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 810:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
 811:../../MMI/Resource/ABMLoader.c ****  *  parse_bitmap
 812:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 813:../../MMI/Resource/ABMLoader.c ****  *  parse and verify the bitmap header (BITMAPFILEHEADER and BITMAPINFO)
 814:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 815:../../MMI/Resource/ABMLoader.c ****  *  bitmap_p       [IN]
 816:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 817:../../MMI/Resource/ABMLoader.c ****  *  void
 818:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
 819:../../MMI/Resource/ABMLoader.c **** static S32 parse_bitmap(U8* bmp_data_p, U32 input_bmp_file_size, ABM_Context * abm_context)
 820:../../MMI/Resource/ABMLoader.c **** {
 1126              	LM59:
 1127 03a8 55       		pushl	%ebp
 1128 03a9 89E5     		movl	%esp, %ebp
 1129 03ab 53       		pushl	%ebx
 1130 03ac 83EC28   		subl	$40, %esp
 821:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 822:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 823:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 824:../../MMI/Resource/ABMLoader.c ****     U32     bmp_w, bmp_h, bmp_bpp;
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 24


 825:../../MMI/Resource/ABMLoader.c ****     S32     i;
 826:../../MMI/Resource/ABMLoader.c ****     U32     bi_size;
 827:../../MMI/Resource/ABMLoader.c ****     U32     compression;
 828:../../MMI/Resource/ABMLoader.c ****     U32     line_size;
 829:../../MMI/Resource/ABMLoader.c **** 
 830:../../MMI/Resource/ABMLoader.c ****     U8      *pal_color_p;
 831:../../MMI/Resource/ABMLoader.c **** 
 832:../../MMI/Resource/ABMLoader.c ****     mycolor pal_first_color;
 833:../../MMI/Resource/ABMLoader.c **** 
 834:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 835:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 836:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 837:../../MMI/Resource/ABMLoader.c ****     /* check the "BM" magic number */
 838:../../MMI/Resource/ABMLoader.c ****     if ((bmp_data_p[0] != 'B') || (bmp_data_p[1] != 'M'))
 1132              	LM60:
 1133              	LBB7:
 1134 03af 8B4508   		movl	8(%ebp), %eax
 1135 03b2 803842   		cmpb	$66, (%eax)
 1136 03b5 750B     		jne	L67
 1137 03b7 8B4508   		movl	8(%ebp), %eax
 1138 03ba 40       		incl	%eax
 1139 03bb 80384D   		cmpb	$77, (%eax)
 1140 03be 7502     		jne	L67
 1141 03c0 EB0C     		jmp	L66
 1142              	L67:
 839:../../MMI/Resource/ABMLoader.c ****     {
 840:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1144              	LM61:
 1145 03c2 C745D4FE 		movl	$-2, -44(%ebp)
 1145      FFFFFF
 1146 03c9 E9D20300 		jmp	L65
 1146      00
 1147              	L66:
 841:../../MMI/Resource/ABMLoader.c ****     }
 842:../../MMI/Resource/ABMLoader.c **** 
 843:../../MMI/Resource/ABMLoader.c ****     /* verify the bitmap file size */
 844:../../MMI/Resource/ABMLoader.c ****     if (GET_32(bmp_data_p + 2) != input_bmp_file_size)
 1149              	LM62:
 1150 03ce 8B4508   		movl	8(%ebp), %eax
 1151 03d1 83C002   		addl	$2, %eax
 1152 03d4 0FB610   		movzbl	(%eax), %edx
 1153 03d7 8B4508   		movl	8(%ebp), %eax
 1154 03da 83C003   		addl	$3, %eax
 1155 03dd 0FB600   		movzbl	(%eax), %eax
 1156 03e0 C1E008   		sall	$8, %eax
 1157 03e3 09C2     		orl	%eax, %edx
 1158 03e5 8B4508   		movl	8(%ebp), %eax
 1159 03e8 83C004   		addl	$4, %eax
 1160 03eb 0FB600   		movzbl	(%eax), %eax
 1161 03ee C1E010   		sall	$16, %eax
 1162 03f1 09C2     		orl	%eax, %edx
 1163 03f3 8B4508   		movl	8(%ebp), %eax
 1164 03f6 83C005   		addl	$5, %eax
 1165 03f9 0FB600   		movzbl	(%eax), %eax
 1166 03fc C1E018   		sall	$24, %eax
 1167 03ff 09D0     		orl	%edx, %eax
 1168 0401 3B450C   		cmpl	12(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 25


 1169 0404 740C     		je	L68
 845:../../MMI/Resource/ABMLoader.c ****     {
 846:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1171              	LM63:
 1172 0406 C745D4FE 		movl	$-2, -44(%ebp)
 1172      FFFFFF
 1173 040d E98E0300 		jmp	L65
 1173      00
 1174              	L68:
 847:../../MMI/Resource/ABMLoader.c ****     }
 848:../../MMI/Resource/ABMLoader.c **** 
 849:../../MMI/Resource/ABMLoader.c ****     /* verify the BITMAPINFO HEADER size field */
 850:../../MMI/Resource/ABMLoader.c ****     bi_size = GET_32(bmp_data_p + 14);
 1176              	LM64:
 1177 0412 8B4508   		movl	8(%ebp), %eax
 1178 0415 83C00E   		addl	$14, %eax
 1179 0418 0FB610   		movzbl	(%eax), %edx
 1180 041b 8B4508   		movl	8(%ebp), %eax
 1181 041e 83C00F   		addl	$15, %eax
 1182 0421 0FB600   		movzbl	(%eax), %eax
 1183 0424 C1E008   		sall	$8, %eax
 1184 0427 09C2     		orl	%eax, %edx
 1185 0429 8B4508   		movl	8(%ebp), %eax
 1186 042c 83C010   		addl	$16, %eax
 1187 042f 0FB600   		movzbl	(%eax), %eax
 1188 0432 C1E010   		sall	$16, %eax
 1189 0435 09C2     		orl	%eax, %edx
 1190 0437 8B4508   		movl	8(%ebp), %eax
 1191 043a 83C011   		addl	$17, %eax
 1192 043d 0FB600   		movzbl	(%eax), %eax
 1193 0440 C1E018   		sall	$24, %eax
 1194 0443 09D0     		orl	%edx, %eax
 1195 0445 8945E8   		movl	%eax, -24(%ebp)
 851:../../MMI/Resource/ABMLoader.c ****     if (bi_size < BITMAPINFO_HEADER_SIZE)
 1197              	LM65:
 1198 0448 837DE827 		cmpl	$39, -24(%ebp)
 1199 044c 770C     		ja	L69
 852:../../MMI/Resource/ABMLoader.c ****     {
 853:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1201              	LM66:
 1202 044e C745D4FE 		movl	$-2, -44(%ebp)
 1202      FFFFFF
 1203 0455 E9460300 		jmp	L65
 1203      00
 1204              	L69:
 854:../../MMI/Resource/ABMLoader.c ****     }
 855:../../MMI/Resource/ABMLoader.c **** 
 856:../../MMI/Resource/ABMLoader.c ****     /* get bitmap width, height, and bits per pixel */
 857:../../MMI/Resource/ABMLoader.c ****     bmp_w = GET_32(bmp_data_p + 18);
 1206              	LM67:
 1207 045a 8B4508   		movl	8(%ebp), %eax
 1208 045d 83C012   		addl	$18, %eax
 1209 0460 0FB610   		movzbl	(%eax), %edx
 1210 0463 8B4508   		movl	8(%ebp), %eax
 1211 0466 83C013   		addl	$19, %eax
 1212 0469 0FB600   		movzbl	(%eax), %eax
 1213 046c C1E008   		sall	$8, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 26


 1214 046f 09C2     		orl	%eax, %edx
 1215 0471 8B4508   		movl	8(%ebp), %eax
 1216 0474 83C014   		addl	$20, %eax
 1217 0477 0FB600   		movzbl	(%eax), %eax
 1218 047a C1E010   		sall	$16, %eax
 1219 047d 09C2     		orl	%eax, %edx
 1220 047f 8B4508   		movl	8(%ebp), %eax
 1221 0482 83C015   		addl	$21, %eax
 1222 0485 0FB600   		movzbl	(%eax), %eax
 1223 0488 C1E018   		sall	$24, %eax
 1224 048b 09D0     		orl	%edx, %eax
 1225 048d 8945F8   		movl	%eax, -8(%ebp)
 858:../../MMI/Resource/ABMLoader.c ****     bmp_h = GET_32(bmp_data_p + 22);
 1227              	LM68:
 1228 0490 8B4508   		movl	8(%ebp), %eax
 1229 0493 83C016   		addl	$22, %eax
 1230 0496 0FB610   		movzbl	(%eax), %edx
 1231 0499 8B4508   		movl	8(%ebp), %eax
 1232 049c 83C017   		addl	$23, %eax
 1233 049f 0FB600   		movzbl	(%eax), %eax
 1234 04a2 C1E008   		sall	$8, %eax
 1235 04a5 09C2     		orl	%eax, %edx
 1236 04a7 8B4508   		movl	8(%ebp), %eax
 1237 04aa 83C018   		addl	$24, %eax
 1238 04ad 0FB600   		movzbl	(%eax), %eax
 1239 04b0 C1E010   		sall	$16, %eax
 1240 04b3 09C2     		orl	%eax, %edx
 1241 04b5 8B4508   		movl	8(%ebp), %eax
 1242 04b8 83C019   		addl	$25, %eax
 1243 04bb 0FB600   		movzbl	(%eax), %eax
 1244 04be C1E018   		sall	$24, %eax
 1245 04c1 09D0     		orl	%edx, %eax
 1246 04c3 8945F4   		movl	%eax, -12(%ebp)
 859:../../MMI/Resource/ABMLoader.c ****     bmp_bpp = GET_16(bmp_data_p + 28);
 1248              	LM69:
 1249 04c6 8B4508   		movl	8(%ebp), %eax
 1250 04c9 83C01C   		addl	$28, %eax
 1251 04cc 0FB610   		movzbl	(%eax), %edx
 1252 04cf 8B4508   		movl	8(%ebp), %eax
 1253 04d2 83C01D   		addl	$29, %eax
 1254 04d5 0FB600   		movzbl	(%eax), %eax
 1255 04d8 C1E008   		sall	$8, %eax
 1256 04db 09D0     		orl	%edx, %eax
 1257 04dd 8945F0   		movl	%eax, -16(%ebp)
 860:../../MMI/Resource/ABMLoader.c **** 
 861:../../MMI/Resource/ABMLoader.c ****     /* only support 8, 24, and 32 bpp */
 862:../../MMI/Resource/ABMLoader.c ****     if ((bmp_bpp != 4) && (bmp_bpp != 8) && (bmp_bpp != 24) && (bmp_bpp != 32))
 1259              	LM70:
 1260 04e0 837DF004 		cmpl	$4, -16(%ebp)
 1261 04e4 741E     		je	L70
 1262 04e6 837DF008 		cmpl	$8, -16(%ebp)
 1263 04ea 7418     		je	L70
 1264 04ec 837DF018 		cmpl	$24, -16(%ebp)
 1265 04f0 7412     		je	L70
 1266 04f2 837DF020 		cmpl	$32, -16(%ebp)
 1267 04f6 740C     		je	L70
 863:../../MMI/Resource/ABMLoader.c ****     {
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 27


 864:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1269              	LM71:
 1270 04f8 C745D4FE 		movl	$-2, -44(%ebp)
 1270      FFFFFF
 1271 04ff E99C0200 		jmp	L65
 1271      00
 1272              	L70:
 865:../../MMI/Resource/ABMLoader.c ****     }
 866:../../MMI/Resource/ABMLoader.c **** 
 867:../../MMI/Resource/ABMLoader.c ****     /* only support bottom-up bitmap */
 868:../../MMI/Resource/ABMLoader.c ****     if (((S32)bmp_h <= 0) || ((S32)bmp_w <= 0))
 1274              	LM72:
 1275 0504 837DF400 		cmpl	$0, -12(%ebp)
 1276 0508 7E08     		jle	L72
 1277 050a 837DF800 		cmpl	$0, -8(%ebp)
 1278 050e 7E02     		jle	L72
 1279 0510 EB0C     		jmp	L71
 1280              	L72:
 869:../../MMI/Resource/ABMLoader.c ****     {
 870:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1282              	LM73:
 1283 0512 C745D4FE 		movl	$-2, -44(%ebp)
 1283      FFFFFF
 1284 0519 E9820200 		jmp	L65
 1284      00
 1285              	L71:
 871:../../MMI/Resource/ABMLoader.c ****     }
 872:../../MMI/Resource/ABMLoader.c **** 
 873:../../MMI/Resource/ABMLoader.c ****     /* limit image dimension to 1024x1024 */
 874:../../MMI/Resource/ABMLoader.c ****     if (((S32)bmp_h > 1024) || ((S32)bmp_w > 2048))
 1287              	LM74:
 1288 051e 817DF400 		cmpl	$1024, -12(%ebp)
 1288      040000
 1289 0525 7F0B     		jg	L74
 1290 0527 817DF800 		cmpl	$2048, -8(%ebp)
 1290      080000
 1291 052e 7F02     		jg	L74
 1292 0530 EB0C     		jmp	L73
 1293              	L74:
 875:../../MMI/Resource/ABMLoader.c ****     {
 876:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1295              	LM75:
 1296 0532 C745D4FE 		movl	$-2, -44(%ebp)
 1296      FFFFFF
 1297 0539 E9620200 		jmp	L65
 1297      00
 1298              	L73:
 877:../../MMI/Resource/ABMLoader.c ****     }
 878:../../MMI/Resource/ABMLoader.c **** 
 879:../../MMI/Resource/ABMLoader.c ****     /* must be uncompressed (BI_RGB = 0 and BI_BITFIELDS = 3) */
 880:../../MMI/Resource/ABMLoader.c ****     compression = GET_32(bmp_data_p + 30);
 1300              	LM76:
 1301 053e 8B4508   		movl	8(%ebp), %eax
 1302 0541 83C01E   		addl	$30, %eax
 1303 0544 0FB610   		movzbl	(%eax), %edx
 1304 0547 8B4508   		movl	8(%ebp), %eax
 1305 054a 83C01F   		addl	$31, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 28


 1306 054d 0FB600   		movzbl	(%eax), %eax
 1307 0550 C1E008   		sall	$8, %eax
 1308 0553 09C2     		orl	%eax, %edx
 1309 0555 8B4508   		movl	8(%ebp), %eax
 1310 0558 83C020   		addl	$32, %eax
 1311 055b 0FB600   		movzbl	(%eax), %eax
 1312 055e C1E010   		sall	$16, %eax
 1313 0561 09C2     		orl	%eax, %edx
 1314 0563 8B4508   		movl	8(%ebp), %eax
 1315 0566 83C021   		addl	$33, %eax
 1316 0569 0FB600   		movzbl	(%eax), %eax
 1317 056c C1E018   		sall	$24, %eax
 1318 056f 09D0     		orl	%edx, %eax
 1319 0571 8945E4   		movl	%eax, -28(%ebp)
 881:../../MMI/Resource/ABMLoader.c ****     if ((compression != 0) && (compression != 3))
 1321              	LM77:
 1322 0574 837DE400 		cmpl	$0, -28(%ebp)
 1323 0578 7412     		je	L75
 1324 057a 837DE403 		cmpl	$3, -28(%ebp)
 1325 057e 740C     		je	L75
 882:../../MMI/Resource/ABMLoader.c ****     {
 883:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1327              	LM78:
 1328 0580 C745D4FE 		movl	$-2, -44(%ebp)
 1328      FFFFFF
 1329 0587 E9140200 		jmp	L65
 1329      00
 1330              	L75:
 884:../../MMI/Resource/ABMLoader.c ****     }
 885:../../MMI/Resource/ABMLoader.c **** 
 886:../../MMI/Resource/ABMLoader.c ****     /* get the palette color num */
 887:../../MMI/Resource/ABMLoader.c ****     if (bmp_bpp <= 8)
 1332              	LM79:
 1333 058c 837DF008 		cmpl	$8, -16(%ebp)
 1334 0590 774E     		ja	L76
 888:../../MMI/Resource/ABMLoader.c ****     {
 889:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.bmp_palette_num = GET_32(bmp_data_p + 46);
 1336              	LM80:
 1337 0592 8B4D10   		movl	16(%ebp), %ecx
 1338 0595 8B4508   		movl	8(%ebp), %eax
 1339 0598 83C02E   		addl	$46, %eax
 1340 059b 0FB610   		movzbl	(%eax), %edx
 1341 059e 8B4508   		movl	8(%ebp), %eax
 1342 05a1 83C02F   		addl	$47, %eax
 1343 05a4 0FB600   		movzbl	(%eax), %eax
 1344 05a7 C1E008   		sall	$8, %eax
 1345 05aa 09C2     		orl	%eax, %edx
 1346 05ac 8B4508   		movl	8(%ebp), %eax
 1347 05af 83C030   		addl	$48, %eax
 1348 05b2 0FB600   		movzbl	(%eax), %eax
 1349 05b5 C1E010   		sall	$16, %eax
 1350 05b8 09C2     		orl	%eax, %edx
 1351 05ba 8B4508   		movl	8(%ebp), %eax
 1352 05bd 83C031   		addl	$49, %eax
 1353 05c0 0FB600   		movzbl	(%eax), %eax
 1354 05c3 C1E018   		sall	$24, %eax
 1355 05c6 09D0     		orl	%edx, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 29


 1356 05c8 89410C   		movl	%eax, 12(%ecx)
 890:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_enc.bmp_palette_num == 0)
 1358              	LM81:
 1359 05cb 8B4510   		movl	16(%ebp), %eax
 1360 05ce 83780C00 		cmpl	$0, 12(%eax)
 1361 05d2 7516     		jne	L78
 891:../../MMI/Resource/ABMLoader.c ****         {
 892:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.bmp_palette_num = 256;
 1363              	LM82:
 1364 05d4 8B4510   		movl	16(%ebp), %eax
 1365 05d7 C7400C00 		movl	$256, 12(%eax)
 1365      010000
 1366 05de EB0A     		jmp	L78
 1367              	L76:
 893:../../MMI/Resource/ABMLoader.c ****         }
 894:../../MMI/Resource/ABMLoader.c ****     }
 895:../../MMI/Resource/ABMLoader.c ****     else
 896:../../MMI/Resource/ABMLoader.c ****     {
 897:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.bmp_palette_num = 0;
 1369              	LM83:
 1370 05e0 8B4510   		movl	16(%ebp), %eax
 1371 05e3 C7400C00 		movl	$0, 12(%eax)
 1371      000000
 1372              	L78:
 898:../../MMI/Resource/ABMLoader.c ****     }
 899:../../MMI/Resource/ABMLoader.c **** 
 900:../../MMI/Resource/ABMLoader.c ****     /* make sure palette color number is 256 maximally */
 901:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.bmp_palette_num > 256)
 1374              	LM84:
 1375 05ea 8B4510   		movl	16(%ebp), %eax
 1376 05ed 81780C00 		cmpl	$256, 12(%eax)
 1376      010000
 1377 05f4 7E0C     		jle	L79
 902:../../MMI/Resource/ABMLoader.c ****     {
 903:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_INPUT_BITMAP_ERROR;
 1379              	LM85:
 1380 05f6 C745D4FE 		movl	$-2, -44(%ebp)
 1380      FFFFFF
 1381 05fd E99E0100 		jmp	L65
 1381      00
 1382              	L79:
 904:../../MMI/Resource/ABMLoader.c ****     }
 905:../../MMI/Resource/ABMLoader.c **** 
 906:../../MMI/Resource/ABMLoader.c ****     /* line size in bytes */
 907:../../MMI/Resource/ABMLoader.c ****     if(bmp_bpp == 4)
 1384              	LM86:
 1385 0602 837DF004 		cmpl	$4, -16(%ebp)
 1386 0606 751C     		jne	L80
 908:../../MMI/Resource/ABMLoader.c ****     {
 909:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.line_padding_bytes = ((bmp_w + 7) / 8 * 8 - bmp_w)/2;
 1388              	LM87:
 1389 0608 8B5510   		movl	16(%ebp), %edx
 1390 060b 8B45F8   		movl	-8(%ebp), %eax
 1391 060e 83C007   		addl	$7, %eax
 1392 0611 C1E803   		shrl	$3, %eax
 1393 0614 C1E003   		sall	$3, %eax
 1394 0617 2B45F8   		subl	-8(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 30


 1395 061a D1E8     		shrl	%eax
 1396 061c 89821404 		movl	%eax, 1044(%edx)
 1396      0000
 1397 0622 EB25     		jmp	L81
 1398              	L80:
 910:../../MMI/Resource/ABMLoader.c ****     }
 911:../../MMI/Resource/ABMLoader.c ****     else
 912:../../MMI/Resource/ABMLoader.c ****     {
 913:../../MMI/Resource/ABMLoader.c ****         line_size = bmp_bpp * bmp_w / 8;
 1400              	LM88:
 1401 0624 8B45F0   		movl	-16(%ebp), %eax
 1402 0627 0FAF45F8 		imull	-8(%ebp), %eax
 1403 062b C1E803   		shrl	$3, %eax
 1404 062e 8945E0   		movl	%eax, -32(%ebp)
 914:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.line_padding_bytes = (line_size + 3) / 4 * 4 - line_size;
 1406              	LM89:
 1407 0631 8B5510   		movl	16(%ebp), %edx
 1408 0634 8B45E0   		movl	-32(%ebp), %eax
 1409 0637 83C003   		addl	$3, %eax
 1410 063a C1E802   		shrl	$2, %eax
 1411 063d C1E002   		sall	$2, %eax
 1412 0640 2B45E0   		subl	-32(%ebp), %eax
 1413 0643 89821404 		movl	%eax, 1044(%edx)
 1413      0000
 1414              	L81:
 915:../../MMI/Resource/ABMLoader.c ****     }
 916:../../MMI/Resource/ABMLoader.c ****     
 917:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.bmp_width = bmp_w;
 1416              	LM90:
 1417 0649 8B5510   		movl	16(%ebp), %edx
 1418 064c 8B45F8   		movl	-8(%ebp), %eax
 1419 064f 8902     		movl	%eax, (%edx)
 918:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.bmp_height = bmp_h;
 1421              	LM91:
 1422 0651 8B5510   		movl	16(%ebp), %edx
 1423 0654 8B45F4   		movl	-12(%ebp), %eax
 1424 0657 894204   		movl	%eax, 4(%edx)
 919:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.bmp_bpp = bmp_bpp;
 1426              	LM92:
 1427 065a 8B5510   		movl	16(%ebp), %edx
 1428 065d 8B45F0   		movl	-16(%ebp), %eax
 1429 0660 894208   		movl	%eax, 8(%edx)
 920:../../MMI/Resource/ABMLoader.c **** 
 921:../../MMI/Resource/ABMLoader.c ****     /* get palette */
 922:../../MMI/Resource/ABMLoader.c ****     pal_color_p = bmp_data_p + BITMAPFILEHEADER_SIZE + bi_size;
 1431              	LM93:
 1432 0663 8B45E8   		movl	-24(%ebp), %eax
 1433 0666 034508   		addl	8(%ebp), %eax
 1434 0669 83C00E   		addl	$14, %eax
 1435 066c 8945DC   		movl	%eax, -36(%ebp)
 923:../../MMI/Resource/ABMLoader.c ****     pal_first_color = GET_32(pal_color_p);
 1437              	LM94:
 1438 066f 8B45DC   		movl	-36(%ebp), %eax
 1439 0672 0FB610   		movzbl	(%eax), %edx
 1440 0675 8B45DC   		movl	-36(%ebp), %eax
 1441 0678 40       		incl	%eax
 1442 0679 0FB600   		movzbl	(%eax), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 31


 1443 067c C1E008   		sall	$8, %eax
 1444 067f 09C2     		orl	%eax, %edx
 1445 0681 8B45DC   		movl	-36(%ebp), %eax
 1446 0684 83C002   		addl	$2, %eax
 1447 0687 0FB600   		movzbl	(%eax), %eax
 1448 068a C1E010   		sall	$16, %eax
 1449 068d 09C2     		orl	%eax, %edx
 1450 068f 8B45DC   		movl	-36(%ebp), %eax
 1451 0692 83C003   		addl	$3, %eax
 1452 0695 0FB600   		movzbl	(%eax), %eax
 1453 0698 C1E018   		sall	$24, %eax
 1454 069b 09D0     		orl	%edx, %eax
 1455 069d 8945D8   		movl	%eax, -40(%ebp)
 924:../../MMI/Resource/ABMLoader.c **** 
 925:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < abm_context->abm_enc.bmp_palette_num; i++)
 1457              	LM95:
 1458 06a0 C745EC00 		movl	$0, -20(%ebp)
 1458      000000
 1459              	L82:
 1460 06a7 8B5510   		movl	16(%ebp), %edx
 1461 06aa 8B45EC   		movl	-20(%ebp), %eax
 1462 06ad 3B420C   		cmpl	12(%edx), %eax
 1463 06b0 7C05     		jl	L85
 1464 06b2 E9A30000 		jmp	L83
 1464      00
 1465              	L85:
 926:../../MMI/Resource/ABMLoader.c ****     {
 927:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.bmp_palette[i] = GET_32(pal_color_p + i * 4);
 1467              	LM96:
 1468 06b7 8B4D10   		movl	16(%ebp), %ecx
 1469 06ba 8B5DEC   		movl	-20(%ebp), %ebx
 1470 06bd 8B45EC   		movl	-20(%ebp), %eax
 1471 06c0 8D148500 		leal	0(,%eax,4), %edx
 1471      000000
 1472 06c7 8B45DC   		movl	-36(%ebp), %eax
 1473 06ca 0FB61410 		movzbl	(%eax,%edx), %edx
 1474 06ce 8B45EC   		movl	-20(%ebp), %eax
 1475 06d1 C1E002   		sall	$2, %eax
 1476 06d4 0345DC   		addl	-36(%ebp), %eax
 1477 06d7 40       		incl	%eax
 1478 06d8 0FB600   		movzbl	(%eax), %eax
 1479 06db C1E008   		sall	$8, %eax
 1480 06de 09C2     		orl	%eax, %edx
 1481 06e0 8B45EC   		movl	-20(%ebp), %eax
 1482 06e3 C1E002   		sall	$2, %eax
 1483 06e6 0345DC   		addl	-36(%ebp), %eax
 1484 06e9 83C002   		addl	$2, %eax
 1485 06ec 0FB600   		movzbl	(%eax), %eax
 1486 06ef C1E010   		sall	$16, %eax
 1487 06f2 09C2     		orl	%eax, %edx
 1488 06f4 8B45EC   		movl	-20(%ebp), %eax
 1489 06f7 C1E002   		sall	$2, %eax
 1490 06fa 0345DC   		addl	-36(%ebp), %eax
 1491 06fd 83C003   		addl	$3, %eax
 1492 0700 0FB600   		movzbl	(%eax), %eax
 1493 0703 C1E018   		sall	$24, %eax
 1494 0706 09D0     		orl	%edx, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 32


 1495 0708 89449910 		movl	%eax, 16(%ecx,%ebx,4)
 928:../../MMI/Resource/ABMLoader.c **** 
 929:../../MMI/Resource/ABMLoader.c ****         /* A of ARGB quad is reserved as 0, convert it to opacity 255 */
 930:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_enc.src_key_color_enable && (abm_context->abm_enc.bmp_palette[i] == pa
 1497              	LM97:
 1498 070c 8B4510   		movl	16(%ebp), %eax
 1499 070f 83B82804 		cmpl	$0, 1064(%eax)
 1499      000000
 1500 0716 741F     		je	L86
 1501 0718 8B4510   		movl	16(%ebp), %eax
 1502 071b 8B55EC   		movl	-20(%ebp), %edx
 1503 071e 8B449010 		movl	16(%eax,%edx,4), %eax
 1504 0722 3B45D8   		cmpl	-40(%ebp), %eax
 1505 0725 7510     		jne	L86
 931:../../MMI/Resource/ABMLoader.c ****         {   
 932:../../MMI/Resource/ABMLoader.c ****             /* 
 933:../../MMI/Resource/ABMLoader.c ****              * The transparency color is the first color in the palette.
 934:../../MMI/Resource/ABMLoader.c ****              * Any equivalent color is also the transpareny color.
 935:../../MMI/Resource/ABMLoader.c ****              *
 936:../../MMI/Resource/ABMLoader.c ****              * ONLY VALID FOR PBM AND BMP FILES.
 937:../../MMI/Resource/ABMLoader.c ****              */
 938:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.bmp_palette[i] = 0;    /* force alpha value 0 */
 1507              	LM98:
 1508 0727 8B5510   		movl	16(%ebp), %edx
 1509 072a 8B45EC   		movl	-20(%ebp), %eax
 1510 072d C7448210 		movl	$0, 16(%edx,%eax,4)
 1510      00000000 
 1511 0735 EB19     		jmp	L84
 1512              	L86:
 939:../../MMI/Resource/ABMLoader.c ****         }
 940:../../MMI/Resource/ABMLoader.c ****         else
 941:../../MMI/Resource/ABMLoader.c ****         {
 942:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.bmp_palette[i] |= 0xFF000000; /* opaque color, alpha value 255 */
 1514              	LM99:
 1515 0737 8B5D10   		movl	16(%ebp), %ebx
 1516 073a 8B4DEC   		movl	-20(%ebp), %ecx
 1517 073d 8B5510   		movl	16(%ebp), %edx
 1518 0740 8B45EC   		movl	-20(%ebp), %eax
 1519 0743 8B448210 		movl	16(%edx,%eax,4), %eax
 1520 0747 0D000000 		orl	$-16777216, %eax
 1520      FF
 1521 074c 89448B10 		movl	%eax, 16(%ebx,%ecx,4)
 1523              	LM100:
 1524              	L84:
 1525 0750 8D45EC   		leal	-20(%ebp), %eax
 1526 0753 FF00     		incl	(%eax)
 1527 0755 E94DFFFF 		jmp	L82
 1527      FF
 1528              	L83:
 943:../../MMI/Resource/ABMLoader.c ****         }
 944:../../MMI/Resource/ABMLoader.c ****     }
 945:../../MMI/Resource/ABMLoader.c **** 
 946:../../MMI/Resource/ABMLoader.c ****     /* bitmap pixel start offset */
 947:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.bmp_pixel_start_p = bmp_data_p + GET_32(bmp_data_p + 10);
 1530              	LM101:
 1531 075a 8B4D10   		movl	16(%ebp), %ecx
 1532 075d 8B4508   		movl	8(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 33


 1533 0760 83C00A   		addl	$10, %eax
 1534 0763 0FB610   		movzbl	(%eax), %edx
 1535 0766 8B4508   		movl	8(%ebp), %eax
 1536 0769 83C00B   		addl	$11, %eax
 1537 076c 0FB600   		movzbl	(%eax), %eax
 1538 076f C1E008   		sall	$8, %eax
 1539 0772 09C2     		orl	%eax, %edx
 1540 0774 8B4508   		movl	8(%ebp), %eax
 1541 0777 83C00C   		addl	$12, %eax
 1542 077a 0FB600   		movzbl	(%eax), %eax
 1543 077d C1E010   		sall	$16, %eax
 1544 0780 09C2     		orl	%eax, %edx
 1545 0782 8B4508   		movl	8(%ebp), %eax
 1546 0785 83C00D   		addl	$13, %eax
 1547 0788 0FB600   		movzbl	(%eax), %eax
 1548 078b C1E018   		sall	$24, %eax
 1549 078e 09D0     		orl	%edx, %eax
 1550 0790 034508   		addl	8(%ebp), %eax
 1551 0793 89811004 		movl	%eax, 1040(%ecx)
 1551      0000
 948:../../MMI/Resource/ABMLoader.c **** 
 949:../../MMI/Resource/ABMLoader.c ****     return ABM_ENC_OK;
 1553              	LM102:
 1554 0799 C745D403 		movl	$3, -44(%ebp)
 1554      000000
 950:../../MMI/Resource/ABMLoader.c **** }
 1556              	LM103:
 1557              	L65:
 1558              	LBE7:
 1559 07a0 8B45D4   		movl	-44(%ebp), %eax
 1560 07a3 83C428   		addl	$40, %esp
 1561 07a6 5B       		popl	%ebx
 1562 07a7 5D       		popl	%ebp
 1563 07a8 C3       		ret
 1575              	Lscope8:
 1577              	LC21:
 1578 07a9 726200   		.ascii "rb\0"
 1579              	LC22:
 1580 07ac 5B41424D 		.ascii "[ABM enc] open file err: %s\0"
 1580      20656E63 
 1580      5D206F70 
 1580      656E2066 
 1580      696C6520 
 1581              	LC23:
 1582 07c8 41424D4C 		.ascii "ABMLOADER\0"
 1582      4F414445 
 1582      5200
 1583 07d2 8DB42600 		.align 32
 1583      0000008D 
 1583      BC270000 
 1583      0000
 1584              	LC24:
 1585 07e0 5B41424D 		.ascii "[ABM enc] over buffer size: %s\0"
 1585      20656E63 
 1585      5D206F76 
 1585      65722062 
 1585      75666665 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 34


 1586              	LC25:
 1587 07ff 5B41424D 		.ascii "[ABM enc] read buffer err: %s\0"
 1587      20656E63 
 1587      5D207265 
 1587      61642062 
 1587      75666665 
 1588              	LC26:
 1589 081d 5B41424D 		.ascii "[ABM enc] parse BMP err, %s\0"
 1589      20656E63 
 1589      5D207061 
 1589      72736520 
 1589      424D5020 
 1595              	_load_bmp_file:
 951:../../MMI/Resource/ABMLoader.c **** 
 952:../../MMI/Resource/ABMLoader.c **** 
 953:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
 954:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
 955:../../MMI/Resource/ABMLoader.c ****  *  load_bmp_file
 956:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
 957:../../MMI/Resource/ABMLoader.c ****  *  check the givn bitmap file and read into buffer
 958:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
 959:../../MMI/Resource/ABMLoader.c ****  *  buf             [IN]    pointer to buffer
 960:../../MMI/Resource/ABMLoader.c ****  *  filename        [IN]    the file name to check
 961:../../MMI/Resource/ABMLoader.c ****  * RETURNS
 962:../../MMI/Resource/ABMLoader.c ****  *  return 0 if error. otherwise return the size of the file.
 963:../../MMI/Resource/ABMLoader.c ****   *****************************************************************************/
 964:../../MMI/Resource/ABMLoader.c **** static U32 load_bmp_file(U8 *buf, const U8 *filename, ABM_Context * abm_context)
 965:../../MMI/Resource/ABMLoader.c **** {
 1597              	LM104:
 1598 0839 55       		pushl	%ebp
 1599 083a 89E5     		movl	%esp, %ebp
 1600 083c 83EC28   		subl	$40, %esp
 966:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 967:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
 968:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 969:../../MMI/Resource/ABMLoader.c ****     FILE *fp = NULL;
 1602              	LM105:
 1603              	LBB8:
 1604 083f C745FC00 		movl	$0, -4(%ebp)
 1604      000000
 970:../../MMI/Resource/ABMLoader.c ****     S32 file_size = 0;
 1606              	LM106:
 1607 0846 C745F800 		movl	$0, -8(%ebp)
 1607      000000
 971:../../MMI/Resource/ABMLoader.c **** 
 972:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 973:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
 974:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
 975:../../MMI/Resource/ABMLoader.c **** 
 976:../../MMI/Resource/ABMLoader.c ****     /* open and check the input bitmap file */
 977:../../MMI/Resource/ABMLoader.c ****     fp = fopen(filename, "rb");
 1609              	LM107:
 1610 084d C7442404 		movl	$LC21, 4(%esp)
 1610      A9070000 
 1611 0855 8B450C   		movl	12(%ebp), %eax
 1612 0858 890424   		movl	%eax, (%esp)
 1613 085b E8000000 		call	_fopen
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 35


 1613      00
 1614 0860 8945FC   		movl	%eax, -4(%ebp)
 978:../../MMI/Resource/ABMLoader.c ****     if (fp == NULL)
 1616              	LM108:
 1617 0863 837DFC00 		cmpl	$0, -4(%ebp)
 1618 0867 752F     		jne	L89
 979:../../MMI/Resource/ABMLoader.c ****     {
 980:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_E("[ABM enc] open file err: %s", filename);
 1620              	LM109:
 1621 0869 8B450C   		movl	12(%ebp), %eax
 1622 086c 8944240C 		movl	%eax, 12(%esp)
 1623 0870 C7442408 		movl	$LC22, 8(%esp)
 1623      AC070000 
 1624 0878 C7442404 		movl	$LC23, 4(%esp)
 1624      C8070000 
 1625 0880 C7042403 		movl	$3, (%esp)
 1625      000000
 1626 0887 E8000000 		call	_reslog_adaptor_log
 1626      00
 981:../../MMI/Resource/ABMLoader.c ****         return 0;
 1628              	LM110:
 1629 088c C745F400 		movl	$0, -12(%ebp)
 1629      000000
 1630 0893 E9140100 		jmp	L88
 1630      00
 1631              	L89:
 982:../../MMI/Resource/ABMLoader.c ****     }
 983:../../MMI/Resource/ABMLoader.c **** 
 984:../../MMI/Resource/ABMLoader.c ****     /* get the file size of the input BMP file */
 985:../../MMI/Resource/ABMLoader.c ****     file_size = get_file_size(fp);
 1633              	LM111:
 1634 0898 8B45FC   		movl	-4(%ebp), %eax
 1635 089b 890424   		movl	%eax, (%esp)
 1636 089e E8A9FAFF 		call	_get_file_size
 1636      FF
 1637 08a3 8945F8   		movl	%eax, -8(%ebp)
 986:../../MMI/Resource/ABMLoader.c **** 
 987:../../MMI/Resource/ABMLoader.c ****     /* make sure the file buffer size is enough */
 988:../../MMI/Resource/ABMLoader.c ****     if (file_size > ABMENC_BMP_FILE_BUFFER_SIZE)
 1639              	LM112:
 1640 08a6 817DF800 		cmpl	$16777216, -8(%ebp)
 1640      000001
 1641 08ad 7E3A     		jle	L90
 989:../../MMI/Resource/ABMLoader.c ****     {
 990:../../MMI/Resource/ABMLoader.c ****         fclose(fp);
 1643              	LM113:
 1644 08af 8B45FC   		movl	-4(%ebp), %eax
 1645 08b2 890424   		movl	%eax, (%esp)
 1646 08b5 E8000000 		call	_fclose
 1646      00
 991:../../MMI/Resource/ABMLoader.c **** 
 992:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_E("[ABM enc] over buffer size: %s", filename);
 1648              	LM114:
 1649 08ba 8B450C   		movl	12(%ebp), %eax
 1650 08bd 8944240C 		movl	%eax, 12(%esp)
 1651 08c1 C7442408 		movl	$LC24, 8(%esp)
 1651      E0070000 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 36


 1652 08c9 C7442404 		movl	$LC23, 4(%esp)
 1652      C8070000 
 1653 08d1 C7042403 		movl	$3, (%esp)
 1653      000000
 1654 08d8 E8000000 		call	_reslog_adaptor_log
 1654      00
 993:../../MMI/Resource/ABMLoader.c ****         return 0;
 1656              	LM115:
 1657 08dd C745F400 		movl	$0, -12(%ebp)
 1657      000000
 1658 08e4 E9C30000 		jmp	L88
 1658      00
 1659              	L90:
 994:../../MMI/Resource/ABMLoader.c ****     }
 995:../../MMI/Resource/ABMLoader.c **** 
 996:../../MMI/Resource/ABMLoader.c ****     /* read the whole file into the memory */
 997:../../MMI/Resource/ABMLoader.c ****     if (fread(buf, file_size, 1, fp) != 1)
 1661              	LM116:
 1662 08e9 8B45FC   		movl	-4(%ebp), %eax
 1663 08ec 8944240C 		movl	%eax, 12(%esp)
 1664 08f0 C7442408 		movl	$1, 8(%esp)
 1664      01000000 
 1665 08f8 8B45F8   		movl	-8(%ebp), %eax
 1666 08fb 89442404 		movl	%eax, 4(%esp)
 1667 08ff 8B4508   		movl	8(%ebp), %eax
 1668 0902 890424   		movl	%eax, (%esp)
 1669 0905 E8000000 		call	_fread
 1669      00
 1670 090a 83F801   		cmpl	$1, %eax
 1671 090d 7437     		je	L91
 998:../../MMI/Resource/ABMLoader.c ****     {
 999:../../MMI/Resource/ABMLoader.c ****         fclose(fp);
 1673              	LM117:
 1674 090f 8B45FC   		movl	-4(%ebp), %eax
 1675 0912 890424   		movl	%eax, (%esp)
 1676 0915 E8000000 		call	_fclose
 1676      00
1000:../../MMI/Resource/ABMLoader.c ****         
1001:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_E("[ABM enc] read buffer err: %s", filename);
 1678              	LM118:
 1679 091a 8B450C   		movl	12(%ebp), %eax
 1680 091d 8944240C 		movl	%eax, 12(%esp)
 1681 0921 C7442408 		movl	$LC25, 8(%esp)
 1681      FF070000 
 1682 0929 C7442404 		movl	$LC23, 4(%esp)
 1682      C8070000 
 1683 0931 C7042403 		movl	$3, (%esp)
 1683      000000
 1684 0938 E8000000 		call	_reslog_adaptor_log
 1684      00
1002:../../MMI/Resource/ABMLoader.c ****         return 0;
 1686              	LM119:
 1687 093d C745F400 		movl	$0, -12(%ebp)
 1687      000000
 1688 0944 EB66     		jmp	L88
 1689              	L91:
1003:../../MMI/Resource/ABMLoader.c ****     }
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 37


1004:../../MMI/Resource/ABMLoader.c **** 
1005:../../MMI/Resource/ABMLoader.c ****     /* parse bitmap header */
1006:../../MMI/Resource/ABMLoader.c ****     if (parse_bitmap(buf, file_size, abm_context) == ABM_ENC_INPUT_BITMAP_ERROR)
 1691              	LM120:
 1692 0946 8B4510   		movl	16(%ebp), %eax
 1693 0949 89442408 		movl	%eax, 8(%esp)
 1694 094d 8B45F8   		movl	-8(%ebp), %eax
 1695 0950 89442404 		movl	%eax, 4(%esp)
 1696 0954 8B4508   		movl	8(%ebp), %eax
 1697 0957 890424   		movl	%eax, (%esp)
 1698 095a E849FAFF 		call	_parse_bitmap
 1698      FF
 1699 095f 83F8FE   		cmpl	$-2, %eax
 1700 0962 7537     		jne	L92
1007:../../MMI/Resource/ABMLoader.c ****     {
1008:../../MMI/Resource/ABMLoader.c ****         fclose(fp);
 1702              	LM121:
 1703 0964 8B45FC   		movl	-4(%ebp), %eax
 1704 0967 890424   		movl	%eax, (%esp)
 1705 096a E8000000 		call	_fclose
 1705      00
1009:../../MMI/Resource/ABMLoader.c **** 
1010:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_E("[ABM enc] parse BMP err, %s", filename);
 1707              	LM122:
 1708 096f 8B450C   		movl	12(%ebp), %eax
 1709 0972 8944240C 		movl	%eax, 12(%esp)
 1710 0976 C7442408 		movl	$LC26, 8(%esp)
 1710      1D080000 
 1711 097e C7442404 		movl	$LC23, 4(%esp)
 1711      C8070000 
 1712 0986 C7042403 		movl	$3, (%esp)
 1712      000000
 1713 098d E8000000 		call	_reslog_adaptor_log
 1713      00
1011:../../MMI/Resource/ABMLoader.c ****         return 0;
 1715              	LM123:
 1716 0992 C745F400 		movl	$0, -12(%ebp)
 1716      000000
 1717 0999 EB11     		jmp	L88
 1718              	L92:
1012:../../MMI/Resource/ABMLoader.c ****     }
1013:../../MMI/Resource/ABMLoader.c **** 
1014:../../MMI/Resource/ABMLoader.c ****     fclose(fp);
 1720              	LM124:
 1721 099b 8B45FC   		movl	-4(%ebp), %eax
 1722 099e 890424   		movl	%eax, (%esp)
 1723 09a1 E8000000 		call	_fclose
 1723      00
1015:../../MMI/Resource/ABMLoader.c ****     
1016:../../MMI/Resource/ABMLoader.c ****     return file_size;
 1725              	LM125:
 1726 09a6 8B45F8   		movl	-8(%ebp), %eax
 1727 09a9 8945F4   		movl	%eax, -12(%ebp)
1017:../../MMI/Resource/ABMLoader.c **** }
 1729              	LM126:
 1730              	L88:
 1731              	LBE8:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 38


 1732 09ac 8B45F4   		movl	-12(%ebp), %eax
 1733 09af C9       		leave
 1734 09b0 C3       		ret
 1739              	Lscope9:
 1746              	_update_image_bounding_box:
1018:../../MMI/Resource/ABMLoader.c **** 
1019:../../MMI/Resource/ABMLoader.c **** 
1020:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1021:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1022:../../MMI/Resource/ABMLoader.c ****  *  update_image_bounding_box
1023:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1024:../../MMI/Resource/ABMLoader.c ****  *  update image bounding box (piggy-back in the first pass)
1025:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1026:../../MMI/Resource/ABMLoader.c ****  *  x       [IN] x coordinate of non-transparent color
1027:../../MMI/Resource/ABMLoader.c ****  *  y       [IN] y coordinate of non-transparent color
1028:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1029:../../MMI/Resource/ABMLoader.c ****  *  void
1030:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1031:../../MMI/Resource/ABMLoader.c **** static void update_image_bounding_box(S32 x, S32 y, ABM_Context * abm_context)
1032:../../MMI/Resource/ABMLoader.c **** {
 1748              	LM127:
 1749 09b1 55       		pushl	%ebp
 1750 09b2 89E5     		movl	%esp, %ebp
 1751 09b4 83EC10   		subl	$16, %esp
1033:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1034:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1035:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1036:../../MMI/Resource/ABMLoader.c ****     S32 x1, x2, y1, y2;
1037:../../MMI/Resource/ABMLoader.c **** 
1038:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1039:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1040:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1041:../../MMI/Resource/ABMLoader.c ****     x1 = abm_context->abm_enc.x1;
 1753              	LM128:
 1754              	LBB9:
 1755 09b7 8B4510   		movl	16(%ebp), %eax
 1756 09ba 8B801804 		movl	1048(%eax), %eax
 1756      0000
 1757 09c0 8945FC   		movl	%eax, -4(%ebp)
1042:../../MMI/Resource/ABMLoader.c ****     y1 = abm_context->abm_enc.y1;
 1759              	LM129:
 1760 09c3 8B4510   		movl	16(%ebp), %eax
 1761 09c6 8B801C04 		movl	1052(%eax), %eax
 1761      0000
 1762 09cc 8945F4   		movl	%eax, -12(%ebp)
1043:../../MMI/Resource/ABMLoader.c ****     x2 = abm_context->abm_enc.x2;
 1764              	LM130:
 1765 09cf 8B4510   		movl	16(%ebp), %eax
 1766 09d2 8B802004 		movl	1056(%eax), %eax
 1766      0000
 1767 09d8 8945F8   		movl	%eax, -8(%ebp)
1044:../../MMI/Resource/ABMLoader.c ****     y2 = abm_context->abm_enc.y2;
 1769              	LM131:
 1770 09db 8B4510   		movl	16(%ebp), %eax
 1771 09de 8B802404 		movl	1060(%eax), %eax
 1771      0000
 1772 09e4 8945F0   		movl	%eax, -16(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 39


1045:../../MMI/Resource/ABMLoader.c **** 
1046:../../MMI/Resource/ABMLoader.c ****     /* x1 = min(x of non-transparent color) */
1047:../../MMI/Resource/ABMLoader.c ****     if (x < x1)
 1774              	LM132:
 1775 09e7 8B4508   		movl	8(%ebp), %eax
 1776 09ea 3B45FC   		cmpl	-4(%ebp), %eax
 1777 09ed 7D06     		jge	L94
1048:../../MMI/Resource/ABMLoader.c ****     {
1049:../../MMI/Resource/ABMLoader.c ****         x1 = x;
 1779              	LM133:
 1780 09ef 8B4508   		movl	8(%ebp), %eax
 1781 09f2 8945FC   		movl	%eax, -4(%ebp)
 1782              	L94:
1050:../../MMI/Resource/ABMLoader.c ****     }
1051:../../MMI/Resource/ABMLoader.c **** 
1052:../../MMI/Resource/ABMLoader.c ****     /* y1 = min(y of non-transparent color) */
1053:../../MMI/Resource/ABMLoader.c ****     if (y < y1)
 1784              	LM134:
 1785 09f5 8B450C   		movl	12(%ebp), %eax
 1786 09f8 3B45F4   		cmpl	-12(%ebp), %eax
 1787 09fb 7D06     		jge	L95
1054:../../MMI/Resource/ABMLoader.c ****     {
1055:../../MMI/Resource/ABMLoader.c ****         y1 = y;
 1789              	LM135:
 1790 09fd 8B450C   		movl	12(%ebp), %eax
 1791 0a00 8945F4   		movl	%eax, -12(%ebp)
 1792              	L95:
1056:../../MMI/Resource/ABMLoader.c ****     }
1057:../../MMI/Resource/ABMLoader.c **** 
1058:../../MMI/Resource/ABMLoader.c ****     /* x2 = max(x of non-transparent color) */
1059:../../MMI/Resource/ABMLoader.c ****     if (x > x2)
 1794              	LM136:
 1795 0a03 8B4508   		movl	8(%ebp), %eax
 1796 0a06 3B45F8   		cmpl	-8(%ebp), %eax
 1797 0a09 7E06     		jle	L96
1060:../../MMI/Resource/ABMLoader.c ****     {
1061:../../MMI/Resource/ABMLoader.c ****         x2 = x;
 1799              	LM137:
 1800 0a0b 8B4508   		movl	8(%ebp), %eax
 1801 0a0e 8945F8   		movl	%eax, -8(%ebp)
 1802              	L96:
1062:../../MMI/Resource/ABMLoader.c ****     }
1063:../../MMI/Resource/ABMLoader.c **** 
1064:../../MMI/Resource/ABMLoader.c ****     /* y2 = max(y of non-transparent color) */
1065:../../MMI/Resource/ABMLoader.c ****     if (y > y2)
 1804              	LM138:
 1805 0a11 8B450C   		movl	12(%ebp), %eax
 1806 0a14 3B45F0   		cmpl	-16(%ebp), %eax
 1807 0a17 7E06     		jle	L97
1066:../../MMI/Resource/ABMLoader.c ****     {
1067:../../MMI/Resource/ABMLoader.c ****         y2 = y;
 1809              	LM139:
 1810 0a19 8B450C   		movl	12(%ebp), %eax
 1811 0a1c 8945F0   		movl	%eax, -16(%ebp)
 1812              	L97:
1068:../../MMI/Resource/ABMLoader.c ****     }
1069:../../MMI/Resource/ABMLoader.c **** 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 40


1070:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.x1 = x1;
 1814              	LM140:
 1815 0a1f 8B5510   		movl	16(%ebp), %edx
 1816 0a22 8B45FC   		movl	-4(%ebp), %eax
 1817 0a25 89821804 		movl	%eax, 1048(%edx)
 1817      0000
1071:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.y1 = y1;
 1819              	LM141:
 1820 0a2b 8B5510   		movl	16(%ebp), %edx
 1821 0a2e 8B45F4   		movl	-12(%ebp), %eax
 1822 0a31 89821C04 		movl	%eax, 1052(%edx)
 1822      0000
1072:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.x2 = x2;
 1824              	LM142:
 1825 0a37 8B5510   		movl	16(%ebp), %edx
 1826 0a3a 8B45F8   		movl	-8(%ebp), %eax
 1827 0a3d 89822004 		movl	%eax, 1056(%edx)
 1827      0000
1073:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.y2 = y2;
 1829              	LM143:
 1830 0a43 8B5510   		movl	16(%ebp), %edx
 1831 0a46 8B45F0   		movl	-16(%ebp), %eax
 1832 0a49 89822404 		movl	%eax, 1060(%edx)
 1832      0000
1074:../../MMI/Resource/ABMLoader.c **** }
 1834              	LM144:
 1835 0a4f C9       		leave
 1836 0a50 C3       		ret
 1837              	LBE9:
 1844              	Lscope10:
 1849              	_limit_image_bounding_box:
1075:../../MMI/Resource/ABMLoader.c **** 
1076:../../MMI/Resource/ABMLoader.c **** 
1077:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1078:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1079:../../MMI/Resource/ABMLoader.c ****  *  limit_image_bounding_box
1080:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1081:../../MMI/Resource/ABMLoader.c ****  *  limit the x1, y1, x2, and y2 within 8-bit
1082:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1083:../../MMI/Resource/ABMLoader.c ****  *  void
1084:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1085:../../MMI/Resource/ABMLoader.c ****  *  void
1086:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1087:../../MMI/Resource/ABMLoader.c **** static void limit_image_bounding_box(ABM_Context * abm_context)
1088:../../MMI/Resource/ABMLoader.c **** {
 1851              	LM145:
 1852 0a51 55       		pushl	%ebp
 1853 0a52 89E5     		movl	%esp, %ebp
 1854 0a54 83EC10   		subl	$16, %esp
1089:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1090:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1091:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1092:../../MMI/Resource/ABMLoader.c ****     S32     w, h, bottom_right_off_w, bottom_right_off_h;
1093:../../MMI/Resource/ABMLoader.c **** 
1094:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1095:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1096:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 41


1097:../../MMI/Resource/ABMLoader.c **** 
1098:../../MMI/Resource/ABMLoader.c ****     w = abm_context->abm_enc.bmp_width;
 1856              	LM146:
 1857              	LBB10:
 1858 0a57 8B4508   		movl	8(%ebp), %eax
 1859 0a5a 8B00     		movl	(%eax), %eax
 1860 0a5c 8945FC   		movl	%eax, -4(%ebp)
1099:../../MMI/Resource/ABMLoader.c ****     h = abm_context->abm_enc.bmp_height;
 1862              	LM147:
 1863 0a5f 8B4508   		movl	8(%ebp), %eax
 1864 0a62 8B4004   		movl	4(%eax), %eax
 1865 0a65 8945F8   		movl	%eax, -8(%ebp)
1100:../../MMI/Resource/ABMLoader.c **** 
1101:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.x1 > 255)
 1867              	LM148:
 1868 0a68 8B4508   		movl	8(%ebp), %eax
 1869 0a6b 81B81804 		cmpl	$255, 1048(%eax)
 1869      0000FF00 
 1869      0000
 1870 0a75 7E0D     		jle	L99
1102:../../MMI/Resource/ABMLoader.c ****     {
1103:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.x1 = 255;
 1872              	LM149:
 1873 0a77 8B4508   		movl	8(%ebp), %eax
 1874 0a7a C7801804 		movl	$255, 1048(%eax)
 1874      0000FF00 
 1874      0000
 1875              	L99:
1104:../../MMI/Resource/ABMLoader.c ****     }
1105:../../MMI/Resource/ABMLoader.c **** 
1106:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.y1 > 255)
 1877              	LM150:
 1878 0a84 8B4508   		movl	8(%ebp), %eax
 1879 0a87 81B81C04 		cmpl	$255, 1052(%eax)
 1879      0000FF00 
 1879      0000
 1880 0a91 7E0D     		jle	L100
1107:../../MMI/Resource/ABMLoader.c ****     {
1108:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.y1 = 255;
 1882              	LM151:
 1883 0a93 8B4508   		movl	8(%ebp), %eax
 1884 0a96 C7801C04 		movl	$255, 1052(%eax)
 1884      0000FF00 
 1884      0000
 1885              	L100:
1109:../../MMI/Resource/ABMLoader.c ****     }
1110:../../MMI/Resource/ABMLoader.c **** 
1111:../../MMI/Resource/ABMLoader.c ****     bottom_right_off_w = w - 1 - abm_context->abm_enc.x2;
 1887              	LM152:
 1888 0aa0 8B4508   		movl	8(%ebp), %eax
 1889 0aa3 8B902004 		movl	1056(%eax), %edx
 1889      0000
 1890 0aa9 8B45FC   		movl	-4(%ebp), %eax
 1891 0aac 29D0     		subl	%edx, %eax
 1892 0aae 48       		decl	%eax
 1893 0aaf 8945F4   		movl	%eax, -12(%ebp)
1112:../../MMI/Resource/ABMLoader.c ****     if (bottom_right_off_w > 255)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 42


 1895              	LM153:
 1896 0ab2 817DF4FF 		cmpl	$255, -12(%ebp)
 1896      000000
 1897 0ab9 7E19     		jle	L101
1113:../../MMI/Resource/ABMLoader.c ****     {
1114:../../MMI/Resource/ABMLoader.c ****         bottom_right_off_w = 255;
 1899              	LM154:
 1900 0abb C745F4FF 		movl	$255, -12(%ebp)
 1900      000000
1115:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.x2 = w - 1 - bottom_right_off_w;
 1902              	LM155:
 1903 0ac2 8B4D08   		movl	8(%ebp), %ecx
 1904 0ac5 8B55F4   		movl	-12(%ebp), %edx
 1905 0ac8 8B45FC   		movl	-4(%ebp), %eax
 1906 0acb 29D0     		subl	%edx, %eax
 1907 0acd 48       		decl	%eax
 1908 0ace 89812004 		movl	%eax, 1056(%ecx)
 1908      0000
 1909              	L101:
1116:../../MMI/Resource/ABMLoader.c ****     }
1117:../../MMI/Resource/ABMLoader.c **** 
1118:../../MMI/Resource/ABMLoader.c ****     bottom_right_off_h = h - 1 - abm_context->abm_enc.y2;
 1911              	LM156:
 1912 0ad4 8B4508   		movl	8(%ebp), %eax
 1913 0ad7 8B902404 		movl	1060(%eax), %edx
 1913      0000
 1914 0add 8B45F8   		movl	-8(%ebp), %eax
 1915 0ae0 29D0     		subl	%edx, %eax
 1916 0ae2 48       		decl	%eax
 1917 0ae3 8945F0   		movl	%eax, -16(%ebp)
1119:../../MMI/Resource/ABMLoader.c ****     if (bottom_right_off_h > 255)
 1919              	LM157:
 1920 0ae6 817DF0FF 		cmpl	$255, -16(%ebp)
 1920      000000
 1921 0aed 7E19     		jle	L98
1120:../../MMI/Resource/ABMLoader.c ****     {
1121:../../MMI/Resource/ABMLoader.c ****         bottom_right_off_h = 255;
 1923              	LM158:
 1924 0aef C745F0FF 		movl	$255, -16(%ebp)
 1924      000000
1122:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.y2 = h - 1 - bottom_right_off_h;
 1926              	LM159:
 1927 0af6 8B4D08   		movl	8(%ebp), %ecx
 1928 0af9 8B55F0   		movl	-16(%ebp), %edx
 1929 0afc 8B45F8   		movl	-8(%ebp), %eax
 1930 0aff 29D0     		subl	%edx, %eax
 1931 0b01 48       		decl	%eax
 1932 0b02 89812404 		movl	%eax, 1060(%ecx)
 1932      0000
1123:../../MMI/Resource/ABMLoader.c ****     }
1124:../../MMI/Resource/ABMLoader.c **** }
 1934              	LM160:
 1935              	L98:
 1936 0b08 C9       		leave
 1937 0b09 C3       		ret
 1938              	LBE10:
 1945              	Lscope11:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 43


 1950              	_abmenc_build_color_index_table:
1125:../../MMI/Resource/ABMLoader.c **** 
1126:../../MMI/Resource/ABMLoader.c **** 
1127:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1128:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1129:../../MMI/Resource/ABMLoader.c ****  *  abmenc_build_color_index_table
1130:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1131:../../MMI/Resource/ABMLoader.c ****  *  build the color index table (first pass)
1132:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1133:../../MMI/Resource/ABMLoader.c ****  *  void
1134:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1135:../../MMI/Resource/ABMLoader.c ****  * return ABM_ENC_OK if succee
1136:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1137:../../MMI/Resource/ABMLoader.c **** static U32 abmenc_build_color_index_table(ABM_Context * abm_context)
1138:../../MMI/Resource/ABMLoader.c **** {
 1952              	LM161:
 1953 0b0a 55       		pushl	%ebp
 1954 0b0b 89E5     		movl	%esp, %ebp
 1955 0b0d 83EC48   		subl	$72, %esp
1139:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1140:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1141:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1142:../../MMI/Resource/ABMLoader.c ****     S32     x, y, w, h;
1143:../../MMI/Resource/ABMLoader.c ****     S32     line_padding_bytes;
1144:../../MMI/Resource/ABMLoader.c ****     U8      *pixel_p, *img_p;
1145:../../MMI/Resource/ABMLoader.c ****     U8      pixel_nibble_index, last_nibble;
1146:../../MMI/Resource/ABMLoader.c ****     U32     bmp_bpp;
1147:../../MMI/Resource/ABMLoader.c ****     mycolor c;
1148:../../MMI/Resource/ABMLoader.c ****     U32 add_color_ret;
1149:../../MMI/Resource/ABMLoader.c **** 
1150:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1151:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1152:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1153:../../MMI/Resource/ABMLoader.c ****     w = abm_context->abm_enc.bmp_width;
 1957              	LM162:
 1958              	LBB11:
 1959 0b10 8B4508   		movl	8(%ebp), %eax
 1960 0b13 8B00     		movl	(%eax), %eax
 1961 0b15 8945F4   		movl	%eax, -12(%ebp)
1154:../../MMI/Resource/ABMLoader.c ****     h = abm_context->abm_enc.bmp_height;
 1963              	LM163:
 1964 0b18 8B4508   		movl	8(%ebp), %eax
 1965 0b1b 8B4004   		movl	4(%eax), %eax
 1966 0b1e 8945F0   		movl	%eax, -16(%ebp)
1155:../../MMI/Resource/ABMLoader.c ****     line_padding_bytes = abm_context->abm_enc.line_padding_bytes;
 1968              	LM164:
 1969 0b21 8B4508   		movl	8(%ebp), %eax
 1970 0b24 8B801404 		movl	1044(%eax), %eax
 1970      0000
 1971 0b2a 8945EC   		movl	%eax, -20(%ebp)
1156:../../MMI/Resource/ABMLoader.c ****     bmp_bpp = abm_context->abm_enc.bmp_bpp;
 1973              	LM165:
 1974 0b2d 8B4508   		movl	8(%ebp), %eax
 1975 0b30 8B4008   		movl	8(%eax), %eax
 1976 0b33 8945DC   		movl	%eax, -36(%ebp)
1157:../../MMI/Resource/ABMLoader.c ****     img_p = abm_context->abm_enc.bmp_pixel_start_p;    
 1978              	LM166:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 44


 1979 0b36 8B4508   		movl	8(%ebp), %eax
 1980 0b39 8B801004 		movl	1040(%eax), %eax
 1980      0000
 1981 0b3f 8945E4   		movl	%eax, -28(%ebp)
1158:../../MMI/Resource/ABMLoader.c **** 
1159:../../MMI/Resource/ABMLoader.c ****     /* initialize image bounding box */
1160:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.x1 = w;
 1983              	LM167:
 1984 0b42 8B5508   		movl	8(%ebp), %edx
 1985 0b45 8B45F4   		movl	-12(%ebp), %eax
 1986 0b48 89821804 		movl	%eax, 1048(%edx)
 1986      0000
1161:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.y1 = h;
 1988              	LM168:
 1989 0b4e 8B5508   		movl	8(%ebp), %edx
 1990 0b51 8B45F0   		movl	-16(%ebp), %eax
 1991 0b54 89821C04 		movl	%eax, 1052(%edx)
 1991      0000
1162:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.x2 = 0;
 1993              	LM169:
 1994 0b5a 8B4508   		movl	8(%ebp), %eax
 1995 0b5d C7802004 		movl	$0, 1056(%eax)
 1995      00000000 
 1995      0000
1163:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.y2 = 0;
 1997              	LM170:
 1998 0b67 8B4508   		movl	8(%ebp), %eax
 1999 0b6a C7802404 		movl	$0, 1060(%eax)
 1999      00000000 
 1999      0000
1164:../../MMI/Resource/ABMLoader.c **** 
1165:../../MMI/Resource/ABMLoader.c ****     /* first pass: build color index table and find the image bounding box */
1166:../../MMI/Resource/ABMLoader.c ****     pixel_p = img_p;
 2001              	LM171:
 2002 0b74 8B45E4   		movl	-28(%ebp), %eax
 2003 0b77 8945E8   		movl	%eax, -24(%ebp)
1167:../../MMI/Resource/ABMLoader.c **** 
1168:../../MMI/Resource/ABMLoader.c ****     /* Pixel nibble index holds the byte position for pixels. 
1169:../../MMI/Resource/ABMLoader.c ****      * last_nibble flag is used to determine which nibble to read for the index. (First or last).
1170:../../MMI/Resource/ABMLoader.c ****      */
1171:../../MMI/Resource/ABMLoader.c ****     pixel_nibble_index = 0;
 2005              	LM172:
 2006 0b7a C645E300 		movb	$0, -29(%ebp)
1172:../../MMI/Resource/ABMLoader.c ****     last_nibble = 0;
 2008              	LM173:
 2009 0b7e C645E200 		movb	$0, -30(%ebp)
1173:../../MMI/Resource/ABMLoader.c **** 
1174:../../MMI/Resource/ABMLoader.c ****     for (y = 0; y < h; y++)
 2011              	LM174:
 2012 0b82 C745F800 		movl	$0, -8(%ebp)
 2012      000000
 2013              	L104:
 2014 0b89 8B45F8   		movl	-8(%ebp), %eax
 2015 0b8c 3B45F0   		cmpl	-16(%ebp), %eax
 2016 0b8f 7C05     		jl	L107
 2017 0b91 E9D70100 		jmp	L105
 2017      00
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 45


 2018              	L107:
1175:../../MMI/Resource/ABMLoader.c ****     {
1176:../../MMI/Resource/ABMLoader.c ****         for (x = 0; x < w; x++)
 2020              	LM175:
 2021 0b96 C745FC00 		movl	$0, -4(%ebp)
 2021      000000
 2022              	L108:
 2023 0b9d 8B45FC   		movl	-4(%ebp), %eax
 2024 0ba0 3B45F4   		cmpl	-12(%ebp), %eax
 2025 0ba3 7C05     		jl	L111
 2026 0ba5 E9AD0100 		jmp	L109
 2026      00
 2027              	L111:
1177:../../MMI/Resource/ABMLoader.c ****         {
1178:../../MMI/Resource/ABMLoader.c ****             /* read pixel */
1179:../../MMI/Resource/ABMLoader.c ****             if (bmp_bpp == 32)
 2029              	LM176:
 2030 0baa 837DDC20 		cmpl	$32, -36(%ebp)
 2031 0bae 7575     		jne	L112
1180:../../MMI/Resource/ABMLoader.c ****             {   /* 32-bit bitmap */
1181:../../MMI/Resource/ABMLoader.c ****                 c = GET_32(pixel_p);
 2033              	LM177:
 2034 0bb0 8B45E8   		movl	-24(%ebp), %eax
 2035 0bb3 0FB610   		movzbl	(%eax), %edx
 2036 0bb6 8B45E8   		movl	-24(%ebp), %eax
 2037 0bb9 40       		incl	%eax
 2038 0bba 0FB600   		movzbl	(%eax), %eax
 2039 0bbd C1E008   		sall	$8, %eax
 2040 0bc0 09C2     		orl	%eax, %edx
 2041 0bc2 8B45E8   		movl	-24(%ebp), %eax
 2042 0bc5 83C002   		addl	$2, %eax
 2043 0bc8 0FB600   		movzbl	(%eax), %eax
 2044 0bcb C1E010   		sall	$16, %eax
 2045 0bce 09C2     		orl	%eax, %edx
 2046 0bd0 8B45E8   		movl	-24(%ebp), %eax
 2047 0bd3 83C003   		addl	$3, %eax
 2048 0bd6 0FB600   		movzbl	(%eax), %eax
 2049 0bd9 C1E018   		sall	$24, %eax
 2050 0bdc 09D0     		orl	%edx, %eax
 2051 0bde 8945D8   		movl	%eax, -40(%ebp)
1182:../../MMI/Resource/ABMLoader.c ****                 pixel_p += 4;
 2053              	LM178:
 2054 0be1 8D45E8   		leal	-24(%ebp), %eax
 2055 0be4 830004   		addl	$4, (%eax)
1183:../../MMI/Resource/ABMLoader.c ****                
1184:../../MMI/Resource/ABMLoader.c ****                 /* Windows 32-bit BMP is always 0x00RRGGBB. */                    
1185:../../MMI/Resource/ABMLoader.c ****                 if (abm_context->abm_enc.is_windows_bmp)
 2057              	LM179:
 2058 0be7 8B4508   		movl	8(%ebp), %eax
 2059 0bea 83B82C04 		cmpl	$0, 1068(%eax)
 2059      000000
 2060 0bf1 7409     		je	L113
1186:../../MMI/Resource/ABMLoader.c ****                 {
1187:../../MMI/Resource/ABMLoader.c ****                     c |= 0xFF000000;
 2062              	LM180:
 2063 0bf3 8D45D8   		leal	-40(%ebp), %eax
 2064 0bf6 81080000 		orl	$-16777216, (%eax)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 46


 2064      00FF
 2065              	L113:
1188:../../MMI/Resource/ABMLoader.c ****                 }
1189:../../MMI/Resource/ABMLoader.c **** 
1190:../../MMI/Resource/ABMLoader.c ****                 if (abm_context->abm_enc.src_key_color_enable && (c == TRANSPARENT_COLOR_32))
 2067              	LM181:
 2068 0bfc 8B4508   		movl	8(%ebp), %eax
 2069 0bff 83B82804 		cmpl	$0, 1064(%eax)
 2069      000000
 2070 0c06 0F84C600 		je	L115
 2070      0000
 2071 0c0c 817DD80C 		cmpl	$-16119028, -40(%ebp)
 2071      0B0AFF
 2072 0c13 0F85B900 		jne	L115
 2072      0000
1191:../../MMI/Resource/ABMLoader.c ****                 {   /* transparent color, alpha = 0 */
1192:../../MMI/Resource/ABMLoader.c ****                     c = 0;
 2074              	LM182:
 2075 0c19 C745D800 		movl	$0, -40(%ebp)
 2075      000000
 2076 0c20 E9AD0000 		jmp	L115
 2076      00
 2077              	L112:
1193:../../MMI/Resource/ABMLoader.c ****                 }                
1194:../../MMI/Resource/ABMLoader.c ****             }
1195:../../MMI/Resource/ABMLoader.c ****             else if (bmp_bpp == 24)
 2079              	LM183:
 2080 0c25 837DDC18 		cmpl	$24, -36(%ebp)
 2081 0c29 7552     		jne	L116
1196:../../MMI/Resource/ABMLoader.c ****             {   /* 24-bit bitmap */
1197:../../MMI/Resource/ABMLoader.c ****                 c = GET_24(pixel_p);
 2083              	LM184:
 2084 0c2b 8B45E8   		movl	-24(%ebp), %eax
 2085 0c2e 0FB610   		movzbl	(%eax), %edx
 2086 0c31 8B45E8   		movl	-24(%ebp), %eax
 2087 0c34 40       		incl	%eax
 2088 0c35 0FB600   		movzbl	(%eax), %eax
 2089 0c38 C1E008   		sall	$8, %eax
 2090 0c3b 09C2     		orl	%eax, %edx
 2091 0c3d 8B45E8   		movl	-24(%ebp), %eax
 2092 0c40 83C002   		addl	$2, %eax
 2093 0c43 0FB600   		movzbl	(%eax), %eax
 2094 0c46 C1E010   		sall	$16, %eax
 2095 0c49 09D0     		orl	%edx, %eax
 2096 0c4b 8945D8   		movl	%eax, -40(%ebp)
1198:../../MMI/Resource/ABMLoader.c ****                 pixel_p += 3;
 2098              	LM185:
 2099 0c4e 8D45E8   		leal	-24(%ebp), %eax
 2100 0c51 830003   		addl	$3, (%eax)
1199:../../MMI/Resource/ABMLoader.c **** 
1200:../../MMI/Resource/ABMLoader.c ****                 if (abm_context->abm_enc.src_key_color_enable && (c == TRANSPARENT_COLOR_24))
 2102              	LM186:
 2103 0c54 8B4508   		movl	8(%ebp), %eax
 2104 0c57 83B82804 		cmpl	$0, 1064(%eax)
 2104      000000
 2105 0c5e 7412     		je	L117
 2106 0c60 817DD80C 		cmpl	$658188, -40(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 47


 2106      0B0A00
 2107 0c67 7509     		jne	L117
1201:../../MMI/Resource/ABMLoader.c ****                 {   /* transparent color, alpha = 0 */
1202:../../MMI/Resource/ABMLoader.c ****                     c = 0;
 2109              	LM187:
 2110 0c69 C745D800 		movl	$0, -40(%ebp)
 2110      000000
 2111 0c70 EB60     		jmp	L115
 2112              	L117:
1203:../../MMI/Resource/ABMLoader.c ****                 }
1204:../../MMI/Resource/ABMLoader.c ****                 else
1205:../../MMI/Resource/ABMLoader.c ****                 {   /* opaque color, alpha = 255 */                    
1206:../../MMI/Resource/ABMLoader.c ****                     c |= 0xFF000000;
 2114              	LM188:
 2115 0c72 8D45D8   		leal	-40(%ebp), %eax
 2116 0c75 81080000 		orl	$-16777216, (%eax)
 2116      00FF
 2117 0c7b EB55     		jmp	L115
 2118              	L116:
1207:../../MMI/Resource/ABMLoader.c ****                 }
1208:../../MMI/Resource/ABMLoader.c ****             }
1209:../../MMI/Resource/ABMLoader.c ****             else if(bmp_bpp == 4)
 2120              	LM189:
 2121 0c7d 837DDC04 		cmpl	$4, -36(%ebp)
 2122 0c81 753A     		jne	L120
1210:../../MMI/Resource/ABMLoader.c ****             {   /* 4-bit bitmap */
1211:../../MMI/Resource/ABMLoader.c ****                 /* Alternate reading of nibbles, which are the index for the colors */
1212:../../MMI/Resource/ABMLoader.c ****                 if(!last_nibble)
 2124              	LM190:
 2125 0c83 807DE200 		cmpb	$0, -30(%ebp)
 2126 0c87 7514     		jne	L121
1213:../../MMI/Resource/ABMLoader.c ****                 {
1214:../../MMI/Resource/ABMLoader.c ****                     pixel_nibble_index = (U8)*pixel_p;  /* reads the byte for two pixels' indices *
 2128              	LM191:
 2129 0c89 8B45E8   		movl	-24(%ebp), %eax
 2130 0c8c 0FB600   		movzbl	(%eax), %eax
 2131 0c8f 8845E3   		movb	%al, -29(%ebp)
1215:../../MMI/Resource/ABMLoader.c ****                     pixel_p++;          /* Advances the pixel pointer */
 2133              	LM192:
 2134 0c92 8D45E8   		leal	-24(%ebp), %eax
 2135 0c95 FF00     		incl	(%eax)
1216:../../MMI/Resource/ABMLoader.c **** 
1217:../../MMI/Resource/ABMLoader.c ****                     /* Set last nibble flag ON to skip reading the byte again in the next pass. 
1218:../../MMI/Resource/ABMLoader.c ****                       * The index will be read from the last nibble of pixel_nibble_index 
1219:../../MMI/Resource/ABMLoader.c ****                       */
1220:../../MMI/Resource/ABMLoader.c ****                     last_nibble = 1;        
 2137              	LM193:
 2138 0c97 C645E201 		movb	$1, -30(%ebp)
 2139 0c9b EB04     		jmp	L122
 2140              	L121:
1221:../../MMI/Resource/ABMLoader.c ****                 }
1222:../../MMI/Resource/ABMLoader.c ****                 else
1223:../../MMI/Resource/ABMLoader.c ****                 {
1224:../../MMI/Resource/ABMLoader.c ****                     last_nibble = 0;
 2142              	LM194:
 2143 0c9d C645E200 		movb	$0, -30(%ebp)
 2144              	L122:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 48


1225:../../MMI/Resource/ABMLoader.c ****                 }
1226:../../MMI/Resource/ABMLoader.c ****                 /* Read the nibbles, first nibble */
1227:../../MMI/Resource/ABMLoader.c ****                 c = abm_context->abm_enc.bmp_palette[(U8)(pixel_nibble_index >> 4)];
 2146              	LM195:
 2147 0ca1 8B5508   		movl	8(%ebp), %edx
 2148 0ca4 0FB645E3 		movzbl	-29(%ebp), %eax
 2149 0ca8 C0E804   		shrb	$4, %al
 2150 0cab 0FB6C0   		movzbl	%al, %eax
 2151 0cae 8B448210 		movl	16(%edx,%eax,4), %eax
 2152 0cb2 8945D8   		movl	%eax, -40(%ebp)
1228:../../MMI/Resource/ABMLoader.c **** 
1229:../../MMI/Resource/ABMLoader.c ****                 /* Puts the value of last nibble in first nibble */ 
1230:../../MMI/Resource/ABMLoader.c ****                 pixel_nibble_index = pixel_nibble_index  << 4;
 2154              	LM196:
 2155 0cb5 8D45E3   		leal	-29(%ebp), %eax
 2156 0cb8 C02004   		salb	$4, (%eax)
 2157 0cbb EB15     		jmp	L115
 2158              	L120:
1231:../../MMI/Resource/ABMLoader.c ****             }
1232:../../MMI/Resource/ABMLoader.c ****             else
1233:../../MMI/Resource/ABMLoader.c ****             {   /* 8-bit bitmap */
1234:../../MMI/Resource/ABMLoader.c ****                 c = abm_context->abm_enc.bmp_palette[*pixel_p++];                
 2160              	LM197:
 2161 0cbd 8B5508   		movl	8(%ebp), %edx
 2162 0cc0 8B45E8   		movl	-24(%ebp), %eax
 2163 0cc3 0FB600   		movzbl	(%eax), %eax
 2164 0cc6 8B448210 		movl	16(%edx,%eax,4), %eax
 2165 0cca 8945D8   		movl	%eax, -40(%ebp)
 2166 0ccd 8D45E8   		leal	-24(%ebp), %eax
 2167 0cd0 FF00     		incl	(%eax)
 2168              	L115:
1235:../../MMI/Resource/ABMLoader.c ****             }
1236:../../MMI/Resource/ABMLoader.c **** 
1237:../../MMI/Resource/ABMLoader.c ****             /* add color if the color is not transparent color */
1238:../../MMI/Resource/ABMLoader.c ****             if (A_OF_ARGB8888(c) != 0)
 2170              	LM198:
 2171 0cd2 8B45D8   		movl	-40(%ebp), %eax
 2172 0cd5 C1E818   		shrl	$24, %eax
 2173 0cd8 85C0     		testl	%eax, %eax
 2174 0cda 7457     		je	L124
1239:../../MMI/Resource/ABMLoader.c ****             {               
1240:../../MMI/Resource/ABMLoader.c ****                 /* only add unique color */
1241:../../MMI/Resource/ABMLoader.c ****                 add_color_ret = add_color_if_new(COLOR_REDUCE(c,abm_context), abm_context);
 2176              	LM199:
 2177 0cdc 8B4508   		movl	8(%ebp), %eax
 2178 0cdf 89442404 		movl	%eax, 4(%esp)
 2179 0ce3 8B45D8   		movl	-40(%ebp), %eax
 2180 0ce6 890424   		movl	%eax, (%esp)
 2181 0ce9 E883F4FF 		call	_COLOR_REDUCE
 2181      FF
 2182 0cee 89C2     		movl	%eax, %edx
 2183 0cf0 8B4508   		movl	8(%ebp), %eax
 2184 0cf3 89442404 		movl	%eax, 4(%esp)
 2185 0cf7 891424   		movl	%edx, (%esp)
 2186 0cfa E896F5FF 		call	_add_color_if_new
 2186      FF
 2187 0cff 8945D4   		movl	%eax, -44(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 49


1242:../../MMI/Resource/ABMLoader.c ****                 if (add_color_ret != ABM_ENC_OK)
 2189              	LM200:
 2190 0d02 837DD403 		cmpl	$3, -44(%ebp)
 2191 0d06 740C     		je	L125
1243:../../MMI/Resource/ABMLoader.c ****                 {
1244:../../MMI/Resource/ABMLoader.c ****                     return ABM_ENC_INPUT_BITMAP_ERROR;
 2193              	LM201:
 2194 0d08 C745D0FE 		movl	$-2, -48(%ebp)
 2194      FFFFFF
 2195 0d0f E9D50000 		jmp	L103
 2195      00
 2196              	L125:
1245:../../MMI/Resource/ABMLoader.c ****                 }
1246:../../MMI/Resource/ABMLoader.c **** 
1247:../../MMI/Resource/ABMLoader.c ****                 /* update image bounding box (notice bitmap is flipped, so we have to invert y here
1248:../../MMI/Resource/ABMLoader.c ****                 update_image_bounding_box(x, h - 1 - y, abm_context);
 2198              	LM202:
 2199 0d14 8B4508   		movl	8(%ebp), %eax
 2200 0d17 89442408 		movl	%eax, 8(%esp)
 2201 0d1b 8B55F8   		movl	-8(%ebp), %edx
 2202 0d1e 8B45F0   		movl	-16(%ebp), %eax
 2203 0d21 29D0     		subl	%edx, %eax
 2204 0d23 48       		decl	%eax
 2205 0d24 89442404 		movl	%eax, 4(%esp)
 2206 0d28 8B45FC   		movl	-4(%ebp), %eax
 2207 0d2b 890424   		movl	%eax, (%esp)
 2208 0d2e E87EFCFF 		call	_update_image_bounding_box
 2208      FF
 2209              	L124:
1249:../../MMI/Resource/ABMLoader.c ****             }
1250:../../MMI/Resource/ABMLoader.c **** 
1251:../../MMI/Resource/ABMLoader.c ****             /* containing a transparent color, this image is not fully opaque! */            
1252:../../MMI/Resource/ABMLoader.c ****             if (A_OF_ARGB8888(c) != 255)
 2211              	LM203:
 2212 0d33 8B45D8   		movl	-40(%ebp), %eax
 2213 0d36 C1E818   		shrl	$24, %eax
 2214 0d39 3DFF0000 		cmpl	$255, %eax
 2214      00
 2215 0d3e 740D     		je	L110
1253:../../MMI/Resource/ABMLoader.c ****             {
1254:../../MMI/Resource/ABMLoader.c ****                 abm_context->abm_enc.is_fully_opaque = 0;
 2217              	LM204:
 2218 0d40 8B4508   		movl	8(%ebp), %eax
 2219 0d43 C7803004 		movl	$0, 1072(%eax)
 2219      00000000 
 2219      0000
 2221              	LM205:
 2222              	L110:
 2223 0d4d 8D45FC   		leal	-4(%ebp), %eax
 2224 0d50 FF00     		incl	(%eax)
 2225 0d52 E946FEFF 		jmp	L108
 2225      FF
 2226              	L109:
1255:../../MMI/Resource/ABMLoader.c ****             }
1256:../../MMI/Resource/ABMLoader.c ****         }
1257:../../MMI/Resource/ABMLoader.c ****         /* End of line. Taking care of padding. Will read first nibble for the next line. */
1258:../../MMI/Resource/ABMLoader.c ****         last_nibble = 0;
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 50


 2228              	LM206:
 2229 0d57 C645E200 		movb	$0, -30(%ebp)
1259:../../MMI/Resource/ABMLoader.c ****         pixel_p += line_padding_bytes;
 2231              	LM207:
 2232 0d5b 8B45EC   		movl	-20(%ebp), %eax
 2233 0d5e 8D55E8   		leal	-24(%ebp), %edx
 2234 0d61 0102     		addl	%eax, (%edx)
 2236              	LM208:
 2237 0d63 8D45F8   		leal	-8(%ebp), %eax
 2238 0d66 FF00     		incl	(%eax)
 2239 0d68 E91CFEFF 		jmp	L104
 2239      FF
 2240              	L105:
1260:../../MMI/Resource/ABMLoader.c ****     }
1261:../../MMI/Resource/ABMLoader.c **** 
1262:../../MMI/Resource/ABMLoader.c ****     /* handle special case, all transparent color */
1263:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.x2 < abm_context->abm_enc.x1)
 2242              	LM209:
 2243 0d6d 8B4508   		movl	8(%ebp), %eax
 2244 0d70 8B5508   		movl	8(%ebp), %edx
 2245 0d73 8B802004 		movl	1056(%eax), %eax
 2245      0000
 2246 0d79 3B821804 		cmpl	1048(%edx), %eax
 2246      0000
 2247 0d7f 7D56     		jge	L127
1264:../../MMI/Resource/ABMLoader.c ****     {
1265:../../MMI/Resource/ABMLoader.c ****         /* 1 dummy point at the center of image to make best use of the bounding box*/
1266:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.x1 = w / 2;
 2249              	LM210:
 2250 0d81 8B4D08   		movl	8(%ebp), %ecx
 2251 0d84 8B55F4   		movl	-12(%ebp), %edx
 2252 0d87 89D0     		movl	%edx, %eax
 2253 0d89 C1F81F   		sarl	$31, %eax
 2254 0d8c C1E81F   		shrl	$31, %eax
 2255 0d8f 8D0410   		leal	(%eax,%edx), %eax
 2256 0d92 D1F8     		sarl	%eax
 2257 0d94 89811804 		movl	%eax, 1048(%ecx)
 2257      0000
1267:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.y1 = h / 2;
 2259              	LM211:
 2260 0d9a 8B4D08   		movl	8(%ebp), %ecx
 2261 0d9d 8B55F0   		movl	-16(%ebp), %edx
 2262 0da0 89D0     		movl	%edx, %eax
 2263 0da2 C1F81F   		sarl	$31, %eax
 2264 0da5 C1E81F   		shrl	$31, %eax
 2265 0da8 8D0410   		leal	(%eax,%edx), %eax
 2266 0dab D1F8     		sarl	%eax
 2267 0dad 89811C04 		movl	%eax, 1052(%ecx)
 2267      0000
1268:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.x2 = abm_context->abm_enc.x1;
 2269              	LM212:
 2270 0db3 8B5508   		movl	8(%ebp), %edx
 2271 0db6 8B4508   		movl	8(%ebp), %eax
 2272 0db9 8B801804 		movl	1048(%eax), %eax
 2272      0000
 2273 0dbf 89822004 		movl	%eax, 1056(%edx)
 2273      0000
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 51


1269:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.y2 = abm_context->abm_enc.y1;
 2275              	LM213:
 2276 0dc5 8B5508   		movl	8(%ebp), %edx
 2277 0dc8 8B4508   		movl	8(%ebp), %eax
 2278 0dcb 8B801C04 		movl	1052(%eax), %eax
 2278      0000
 2279 0dd1 89822404 		movl	%eax, 1060(%edx)
 2279      0000
 2280              	L127:
1270:../../MMI/Resource/ABMLoader.c ****     }    
1271:../../MMI/Resource/ABMLoader.c ****     
1272:../../MMI/Resource/ABMLoader.c ****     limit_image_bounding_box(abm_context);
 2282              	LM214:
 2283 0dd7 8B4508   		movl	8(%ebp), %eax
 2284 0dda 890424   		movl	%eax, (%esp)
 2285 0ddd E86FFCFF 		call	_limit_image_bounding_box
 2285      FF
1273:../../MMI/Resource/ABMLoader.c ****     return ABM_ENC_OK;
 2287              	LM215:
 2288 0de2 C745D003 		movl	$3, -48(%ebp)
 2288      000000
1274:../../MMI/Resource/ABMLoader.c **** }
 2290              	LM216:
 2291              	L103:
 2292              	LBE11:
 2293 0de9 8B45D0   		movl	-48(%ebp), %eax
 2294 0dec C9       		leave
 2295 0ded C3       		ret
 2310              	Lscope12:
 2315              	_log2_ceiling:
1275:../../MMI/Resource/ABMLoader.c **** 
1276:../../MMI/Resource/ABMLoader.c **** 
1277:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1278:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1279:../../MMI/Resource/ABMLoader.c ****  *  log2_ceiling
1280:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1281:../../MMI/Resource/ABMLoader.c ****  *  calculate ceiling(log2(x))
1282:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1283:../../MMI/Resource/ABMLoader.c ****  *  x       [IN]    x must be in the range of [0, 65535]
1284:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1285:../../MMI/Resource/ABMLoader.c ****  *  ceiling(log2(x))
1286:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1287:../../MMI/Resource/ABMLoader.c **** static U32 log2_ceiling(U32 x)
1288:../../MMI/Resource/ABMLoader.c **** {
 2317              	LM217:
 2318 0dee 55       		pushl	%ebp
 2319 0def 89E5     		movl	%esp, %ebp
 2320 0df1 83EC04   		subl	$4, %esp
1289:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1290:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1291:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/   
1292:../../MMI/Resource/ABMLoader.c ****     S32     i;
1293:../../MMI/Resource/ABMLoader.c **** 
1294:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1295:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1296:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1297:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < 15; i++)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 52


 2322              	LM218:
 2323              	LBB12:
 2324 0df4 C745FC00 		movl	$0, -4(%ebp)
 2324      000000
 2325              	L129:
 2326 0dfb 837DFC0E 		cmpl	$14, -4(%ebp)
 2327 0dff 7E02     		jle	L132
 2328 0e01 EB19     		jmp	L130
 2329              	L132:
1298:../../MMI/Resource/ABMLoader.c ****     {
1299:../../MMI/Resource/ABMLoader.c ****         if (x <= log2_table[i])
 2331              	LM219:
 2332 0e03 8B45FC   		movl	-4(%ebp), %eax
 2333 0e06 0FB78400 		movzwl	_log2_table(%eax,%eax), %eax
 2333      08010000 
 2334 0e0e 394508   		cmpl	%eax, 8(%ebp)
 2335 0e11 7702     		ja	L131
1300:../../MMI/Resource/ABMLoader.c ****             break;
 2337              	LM220:
 2338 0e13 EB07     		jmp	L130
 2340              	LM221:
 2341              	L131:
 2342 0e15 8D45FC   		leal	-4(%ebp), %eax
 2343 0e18 FF00     		incl	(%eax)
 2344 0e1a EBDF     		jmp	L129
 2345              	L130:
1301:../../MMI/Resource/ABMLoader.c ****     }
1302:../../MMI/Resource/ABMLoader.c **** 
1303:../../MMI/Resource/ABMLoader.c ****     return i + 1;
 2347              	LM222:
 2348 0e1c 8B45FC   		movl	-4(%ebp), %eax
 2349 0e1f 40       		incl	%eax
1304:../../MMI/Resource/ABMLoader.c **** }
 2351              	LM223:
 2352 0e20 C9       		leave
 2353 0e21 C3       		ret
 2354              	LBE12:
 2358              	Lscope13:
 2363              	_ab2_bs_flush:
1305:../../MMI/Resource/ABMLoader.c **** 
1306:../../MMI/Resource/ABMLoader.c **** 
1307:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1308:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1309:../../MMI/Resource/ABMLoader.c ****  *  ab2_bs_init
1310:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1311:../../MMI/Resource/ABMLoader.c ****  *  Initialize the given bit-stream data structure.
1312:../../MMI/Resource/ABMLoader.c ****  *  The first data will start at given memory pointer.
1313:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1314:../../MMI/Resource/ABMLoader.c ****  *  bs              [INOUT] the bit-stream structure to be initialized
1315:../../MMI/Resource/ABMLoader.c ****  *  mem_ptr         [IN]    the start memory to be a bit-stream
1316:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1317:../../MMI/Resource/ABMLoader.c ****  *  void
1318:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1319:../../MMI/Resource/ABMLoader.c **** static GDI_IMAGE_AB2_INLINE void ab2_bs_init(ab2_bs_struct *bs, U8 *mem_ptr)
1320:../../MMI/Resource/ABMLoader.c **** {
1321:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1322:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 53


1323:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1324:../../MMI/Resource/ABMLoader.c ****     
1325:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1326:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1327:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1328:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(bs != NULL);
1329:../../MMI/Resource/ABMLoader.c **** 
1330:../../MMI/Resource/ABMLoader.c ****     bs->mem_ptr     = mem_ptr;
1331:../../MMI/Resource/ABMLoader.c ****     bs->buf         = 0;
1332:../../MMI/Resource/ABMLoader.c ****     bs->buf_bits    = 0;
1333:../../MMI/Resource/ABMLoader.c **** }
1334:../../MMI/Resource/ABMLoader.c **** 
1335:../../MMI/Resource/ABMLoader.c **** 
1336:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1337:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1338:../../MMI/Resource/ABMLoader.c ****  *  ab2_bs_write
1339:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1340:../../MMI/Resource/ABMLoader.c ****  *  Write given bits data to bit-stream. The data must less or equal 16 bits.
1341:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1342:../../MMI/Resource/ABMLoader.c ****  *  bs              [IN]    the bit-stream
1343:../../MMI/Resource/ABMLoader.c ****  *  data            [IN]    the bit data to write
1344:../../MMI/Resource/ABMLoader.c ****  *  bits            [IN]    the number of bits to write (must <= 16)
1345:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1346:../../MMI/Resource/ABMLoader.c ****  *  void 
1347:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1348:../../MMI/Resource/ABMLoader.c **** static GDI_IMAGE_AB2_INLINE void ab2_bs_write(ab2_bs_struct *bs, U32 data, U32 bits)
1349:../../MMI/Resource/ABMLoader.c **** {
1350:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1351:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1352:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1353:../../MMI/Resource/ABMLoader.c ****     
1354:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1355:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1356:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1357:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(bs != NULL);
1358:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(bits <= 16);
1359:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(data < (1 << bits));
1360:../../MMI/Resource/ABMLoader.c **** 
1361:../../MMI/Resource/ABMLoader.c ****     bs->buf |= (data << bs->buf_bits);
1362:../../MMI/Resource/ABMLoader.c ****     bs->buf_bits += bits;
1363:../../MMI/Resource/ABMLoader.c ****     
1364:../../MMI/Resource/ABMLoader.c ****     /* write out 16 bits data if enough */
1365:../../MMI/Resource/ABMLoader.c ****     if (bs->buf_bits >= 16)
1366:../../MMI/Resource/ABMLoader.c ****     {
1367:../../MMI/Resource/ABMLoader.c ****         *(U16 *)bs->mem_ptr = (U16)bs->buf;
1368:../../MMI/Resource/ABMLoader.c **** 
1369:../../MMI/Resource/ABMLoader.c ****         bs->buf >>= 16;
1370:../../MMI/Resource/ABMLoader.c ****         bs->buf_bits -= 16;
1371:../../MMI/Resource/ABMLoader.c ****         bs->mem_ptr += sizeof(U16);
1372:../../MMI/Resource/ABMLoader.c ****     }
1373:../../MMI/Resource/ABMLoader.c **** }
1374:../../MMI/Resource/ABMLoader.c **** 
1375:../../MMI/Resource/ABMLoader.c **** 
1376:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1377:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1378:../../MMI/Resource/ABMLoader.c ****  *  ab2_bs_flush
1379:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 54


1380:../../MMI/Resource/ABMLoader.c ****  *  Flush all data to bit-stream, it will be align to 2-bytes
1381:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1382:../../MMI/Resource/ABMLoader.c ****  *  bs              [IN]    the bit-stream
1383:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1384:../../MMI/Resource/ABMLoader.c ****  *  void 
1385:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1386:../../MMI/Resource/ABMLoader.c **** static void ab2_bs_flush(ab2_bs_struct *bs)
1387:../../MMI/Resource/ABMLoader.c **** {
 2365              	LM224:
 2366 0e22 55       		pushl	%ebp
 2367 0e23 89E5     		movl	%esp, %ebp
1388:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1389:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1390:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1391:../../MMI/Resource/ABMLoader.c ****     
1392:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1393:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1394:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1395:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(bs != NULL);
1396:../../MMI/Resource/ABMLoader.c **** 
1397:../../MMI/Resource/ABMLoader.c ****     if (bs->buf_bits > 0)
 2369              	LM225:
 2370 0e25 8B4508   		movl	8(%ebp), %eax
 2371 0e28 83780800 		cmpl	$0, 8(%eax)
 2372 0e2c 7430     		je	L137
1398:../../MMI/Resource/ABMLoader.c ****     {
1399:../../MMI/Resource/ABMLoader.c ****         *(U16 *)bs->mem_ptr = (U16)bs->buf;
 2374              	LM226:
 2375 0e2e 8B4508   		movl	8(%ebp), %eax
 2376 0e31 8B10     		movl	(%eax), %edx
 2377 0e33 8B4508   		movl	8(%ebp), %eax
 2378 0e36 0FB74004 		movzwl	4(%eax), %eax
 2379 0e3a 668902   		movw	%ax, (%edx)
1400:../../MMI/Resource/ABMLoader.c **** 
1401:../../MMI/Resource/ABMLoader.c ****         bs->buf = 0;
 2381              	LM227:
 2382 0e3d 8B4508   		movl	8(%ebp), %eax
 2383 0e40 C7400400 		movl	$0, 4(%eax)
 2383      000000
1402:../../MMI/Resource/ABMLoader.c ****         bs->buf_bits = 0;
 2385              	LM228:
 2386 0e47 8B4508   		movl	8(%ebp), %eax
 2387 0e4a C7400800 		movl	$0, 8(%eax)
 2387      000000
1403:../../MMI/Resource/ABMLoader.c ****         bs->mem_ptr += sizeof(U16);
 2389              	LM229:
 2390 0e51 8B5508   		movl	8(%ebp), %edx
 2391 0e54 8B4508   		movl	8(%ebp), %eax
 2392 0e57 8B00     		movl	(%eax), %eax
 2393 0e59 83C002   		addl	$2, %eax
 2394 0e5c 8902     		movl	%eax, (%edx)
1404:../../MMI/Resource/ABMLoader.c ****     }
1405:../../MMI/Resource/ABMLoader.c **** }
 2396              	LM230:
 2397              	L137:
 2398 0e5e 5D       		popl	%ebp
 2399 0e5f C3       		ret
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 55


 2400              	Lscope14:
 2406              	_ab2enc_color_preprocess:
1406:../../MMI/Resource/ABMLoader.c **** 
1407:../../MMI/Resource/ABMLoader.c **** 
1408:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1409:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1410:../../MMI/Resource/ABMLoader.c ****  *  ab2_bs_offset
1411:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1412:../../MMI/Resource/ABMLoader.c ****  *  Caculate the offset according by given base memory location
1413:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1414:../../MMI/Resource/ABMLoader.c ****  *  bs              [IN]    the bit-stream
1415:../../MMI/Resource/ABMLoader.c ****  *  base_ptr        [IN]    the base memory location
1416:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1417:../../MMI/Resource/ABMLoader.c ****  *  The number of offset
1418:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1419:../../MMI/Resource/ABMLoader.c **** static GDI_IMAGE_AB2_INLINE U32 ab2_bs_offset(ab2_bs_struct *bs, const U8 *base_ptr)
1420:../../MMI/Resource/ABMLoader.c **** {
1421:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1422:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1423:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1424:../../MMI/Resource/ABMLoader.c ****     
1425:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1426:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1427:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1428:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(bs != NULL);
1429:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(bs->buf_bits == 0);
1430:../../MMI/Resource/ABMLoader.c **** 
1431:../../MMI/Resource/ABMLoader.c ****     return bs->mem_ptr - base_ptr;
1432:../../MMI/Resource/ABMLoader.c **** }
1433:../../MMI/Resource/ABMLoader.c **** 
1434:../../MMI/Resource/ABMLoader.c **** 
1435:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1436:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1437:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_color_preprocess
1438:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1439:../../MMI/Resource/ABMLoader.c ****  *  Preprocess the color to save to color table:
1440:../../MMI/Resource/ABMLoader.c ****  *  - Prevent blue channel from saturation to get rid of source key 
1441:../../MMI/Resource/ABMLoader.c ****  *    checking in the decoder
1442:../../MMI/Resource/ABMLoader.c ****  *  - Pre-multiply alpha color
1443:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1444:../../MMI/Resource/ABMLoader.c ****  *  color          [IN]     the color to preprocess
1445:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1446:../../MMI/Resource/ABMLoader.c ****  *  The color has been processed
1447:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1448:../../MMI/Resource/ABMLoader.c **** static mycolor ab2enc_color_preprocess(mycolor color, ABM_Context * abm_context)
1449:../../MMI/Resource/ABMLoader.c **** {
 2408              	LM231:
 2409 0e60 55       		pushl	%ebp
 2410 0e61 89E5     		movl	%esp, %ebp
 2411 0e63 83EC14   		subl	$20, %esp
1450:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1451:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1452:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1453:../../MMI/Resource/ABMLoader.c ****     mycolor a, r, g, b;
1454:../../MMI/Resource/ABMLoader.c ****     
1455:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1456:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 56


1457:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1458:../../MMI/Resource/ABMLoader.c ****     /* 
1459:../../MMI/Resource/ABMLoader.c ****      * prevent blue channel 
1460:../../MMI/Resource/ABMLoader.c ****      */
1461:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_palette_bpp == 16)
 2413              	LM232:
 2414              	LBB13:
 2415 0e66 8B450C   		movl	12(%ebp), %eax
 2416 0e69 83B83C74 		cmpl	$16, 1537084(%eax)
 2416      170010
 2417 0e70 753F     		jne	L141
1462:../../MMI/Resource/ABMLoader.c ****     {
1463:../../MMI/Resource/ABMLoader.c ****         mycolor color16 = ARGB8888_TO_RGB16(color);
 2419              	LM233:
 2420              	LBB14:
 2421 0e72 8B4508   		movl	8(%ebp), %eax
 2422 0e75 C1E008   		sall	$8, %eax
 2423 0e78 C1E818   		shrl	$24, %eax
 2424 0e7b C1E803   		shrl	$3, %eax
 2425 0e7e 89C2     		movl	%eax, %edx
 2426 0e80 C1E20B   		sall	$11, %edx
 2427 0e83 8B4508   		movl	8(%ebp), %eax
 2428 0e86 C1E010   		sall	$16, %eax
 2429 0e89 C1E818   		shrl	$24, %eax
 2430 0e8c C1E802   		shrl	$2, %eax
 2431 0e8f C1E005   		sall	$5, %eax
 2432 0e92 09C2     		orl	%eax, %edx
 2433 0e94 8B4508   		movl	8(%ebp), %eax
 2434 0e97 C1E018   		sall	$24, %eax
 2435 0e9a C1E818   		shrl	$24, %eax
 2436 0e9d C1E803   		shrl	$3, %eax
 2437 0ea0 09D0     		orl	%edx, %eax
 2438 0ea2 8945EC   		movl	%eax, -20(%ebp)
1464:../../MMI/Resource/ABMLoader.c ****         if ((color16) == 0x1F)
 2440              	LM234:
 2441 0ea5 837DEC1F 		cmpl	$31, -20(%ebp)
 2442 0ea9 7519     		jne	L143
1465:../../MMI/Resource/ABMLoader.c ****         {
1466:../../MMI/Resource/ABMLoader.c ****             /* 5-bit B: 0x1F -> 0x1E */
1467:../../MMI/Resource/ABMLoader.c ****             color -= 1 << 3;
 2444              	LM235:
 2445 0eab 836D0808 		subl	$8, 8(%ebp)
 2446              	LBE14:
 2447 0eaf EB13     		jmp	L143
 2448              	L141:
1468:../../MMI/Resource/ABMLoader.c ****         }
1469:../../MMI/Resource/ABMLoader.c ****     }
1470:../../MMI/Resource/ABMLoader.c ****     else
1471:../../MMI/Resource/ABMLoader.c ****     {
1472:../../MMI/Resource/ABMLoader.c ****         /* 24-bit and 32-bit ABM both use 24-bit palette */
1473:../../MMI/Resource/ABMLoader.c ****         if (B_OF_ARGB8888(color) == 0xFF)
 2450              	LM236:
 2451 0eb1 8B4508   		movl	8(%ebp), %eax
 2452 0eb4 C1E018   		sall	$24, %eax
 2453 0eb7 C1E818   		shrl	$24, %eax
 2454 0eba 3DFF0000 		cmpl	$255, %eax
 2454      00
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 57


 2455 0ebf 7503     		jne	L143
1474:../../MMI/Resource/ABMLoader.c ****         {
1475:../../MMI/Resource/ABMLoader.c ****             /* 8-bit B: 0xFF -> 0xFE */
1476:../../MMI/Resource/ABMLoader.c ****             color -= 1;
 2457              	LM237:
 2458 0ec1 FF4D08   		decl	8(%ebp)
 2459              	L143:
1477:../../MMI/Resource/ABMLoader.c ****         }
1478:../../MMI/Resource/ABMLoader.c ****     }
1479:../../MMI/Resource/ABMLoader.c **** 
1480:../../MMI/Resource/ABMLoader.c ****     /* 
1481:../../MMI/Resource/ABMLoader.c ****      * pre-multiply alpha color 
1482:../../MMI/Resource/ABMLoader.c ****      */
1483:../../MMI/Resource/ABMLoader.c ****     a = A_OF_ARGB8888(color);
 2461              	LM238:
 2462 0ec4 8B4508   		movl	8(%ebp), %eax
 2463 0ec7 C1E818   		shrl	$24, %eax
 2464 0eca 8945FC   		movl	%eax, -4(%ebp)
1484:../../MMI/Resource/ABMLoader.c ****     r = R_OF_ARGB8888(color);
 2466              	LM239:
 2467 0ecd 8B4508   		movl	8(%ebp), %eax
 2468 0ed0 C1E008   		sall	$8, %eax
 2469 0ed3 C1E818   		shrl	$24, %eax
 2470 0ed6 8945F8   		movl	%eax, -8(%ebp)
1485:../../MMI/Resource/ABMLoader.c ****     g = G_OF_ARGB8888(color);
 2472              	LM240:
 2473 0ed9 8B4508   		movl	8(%ebp), %eax
 2474 0edc C1E010   		sall	$16, %eax
 2475 0edf C1E818   		shrl	$24, %eax
 2476 0ee2 8945F4   		movl	%eax, -12(%ebp)
1486:../../MMI/Resource/ABMLoader.c ****     b = B_OF_ARGB8888(color);
 2478              	LM241:
 2479 0ee5 8B4508   		movl	8(%ebp), %eax
 2480 0ee8 C1E018   		sall	$24, %eax
 2481 0eeb C1E818   		shrl	$24, %eax
 2482 0eee 8945F0   		movl	%eax, -16(%ebp)
1487:../../MMI/Resource/ABMLoader.c **** 
1488:../../MMI/Resource/ABMLoader.c ****     r = GDI_IMAGE_AB2_DIV_255(r * a);
 2484              	LM242:
 2485 0ef1 8B45F8   		movl	-8(%ebp), %eax
 2486 0ef4 89C2     		movl	%eax, %edx
 2487 0ef6 0FAF55FC 		imull	-4(%ebp), %edx
 2488 0efa 89D0     		movl	%edx, %eax
 2489 0efc C1E008   		sall	$8, %eax
 2490 0eff 01D0     		addl	%edx, %eax
 2491 0f01 05808000 		addl	$32896, %eax
 2491      00
 2492 0f06 C1E810   		shrl	$16, %eax
 2493 0f09 8945F8   		movl	%eax, -8(%ebp)
1489:../../MMI/Resource/ABMLoader.c ****     g = GDI_IMAGE_AB2_DIV_255(g * a);
 2495              	LM243:
 2496 0f0c 8B45F4   		movl	-12(%ebp), %eax
 2497 0f0f 89C2     		movl	%eax, %edx
 2498 0f11 0FAF55FC 		imull	-4(%ebp), %edx
 2499 0f15 89D0     		movl	%edx, %eax
 2500 0f17 C1E008   		sall	$8, %eax
 2501 0f1a 01D0     		addl	%edx, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 58


 2502 0f1c 05808000 		addl	$32896, %eax
 2502      00
 2503 0f21 C1E810   		shrl	$16, %eax
 2504 0f24 8945F4   		movl	%eax, -12(%ebp)
1490:../../MMI/Resource/ABMLoader.c ****     b = GDI_IMAGE_AB2_DIV_255(b * a);
 2506              	LM244:
 2507 0f27 8B45F0   		movl	-16(%ebp), %eax
 2508 0f2a 89C2     		movl	%eax, %edx
 2509 0f2c 0FAF55FC 		imull	-4(%ebp), %edx
 2510 0f30 89D0     		movl	%edx, %eax
 2511 0f32 C1E008   		sall	$8, %eax
 2512 0f35 01D0     		addl	%edx, %eax
 2513 0f37 05808000 		addl	$32896, %eax
 2513      00
 2514 0f3c C1E810   		shrl	$16, %eax
 2515 0f3f 8945F0   		movl	%eax, -16(%ebp)
1491:../../MMI/Resource/ABMLoader.c **** 
1492:../../MMI/Resource/ABMLoader.c ****     return ARGB(0xff - a, r, g, b);
 2517              	LM245:
 2518 0f42 B8FF0000 		movl	$255, %eax
 2518      00
 2519 0f47 2B45FC   		subl	-4(%ebp), %eax
 2520 0f4a C1E018   		sall	$24, %eax
 2521 0f4d 8B55F8   		movl	-8(%ebp), %edx
 2522 0f50 C1E210   		sall	$16, %edx
 2523 0f53 09D0     		orl	%edx, %eax
 2524 0f55 8B55F4   		movl	-12(%ebp), %edx
 2525 0f58 C1E208   		sall	$8, %edx
 2526 0f5b 09D0     		orl	%edx, %eax
 2527 0f5d 0B45F0   		orl	-16(%ebp), %eax
1493:../../MMI/Resource/ABMLoader.c **** }
 2529              	LM246:
 2530 0f60 C9       		leave
 2531 0f61 C3       		ret
 2532              	LBE13:
 2542              	Lscope15:
 2547              	_ab2enc_get_pixel_format:
1494:../../MMI/Resource/ABMLoader.c **** 
1495:../../MMI/Resource/ABMLoader.c **** 
1496:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1497:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1498:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_get_pixel_format
1499:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1500:../../MMI/Resource/ABMLoader.c ****  *  Decide the pixel format to save to ABM file
1501:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1502:../../MMI/Resource/ABMLoader.c ****  *  none
1503:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1504:../../MMI/Resource/ABMLoader.c ****  *  The pixel format to save
1505:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1506:../../MMI/Resource/ABMLoader.c **** static U32 ab2enc_get_pixel_format(ABM_Context * abm_context)
1507:../../MMI/Resource/ABMLoader.c **** {
 2549              	LM247:
 2550 0f62 55       		pushl	%ebp
 2551 0f63 89E5     		movl	%esp, %ebp
 2552 0f65 83EC18   		subl	$24, %esp
1508:../../MMI/Resource/ABMLoader.c **** 
1509:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 59


1510:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1511:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1512:../../MMI/Resource/ABMLoader.c ****     U32 normal_color_cnt;
1513:../../MMI/Resource/ABMLoader.c ****     U32 alpha_color_cnt;
1514:../../MMI/Resource/ABMLoader.c ****     
1515:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1516:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1517:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1518:../../MMI/Resource/ABMLoader.c ****     normal_color_cnt    = get_normal_color_num(abm_context);
 2554              	LM248:
 2555              	LBB15:
 2556 0f68 8B4508   		movl	8(%ebp), %eax
 2557 0f6b 890424   		movl	%eax, (%esp)
 2558 0f6e E897F3FF 		call	_get_normal_color_num
 2558      FF
 2559 0f73 8945FC   		movl	%eax, -4(%ebp)
1519:../../MMI/Resource/ABMLoader.c ****     alpha_color_cnt     = abm_context->color_idx_tab.color_num - normal_color_cnt;
 2561              	LM249:
 2562 0f76 8B4508   		movl	8(%ebp), %eax
 2563 0f79 8B55FC   		movl	-4(%ebp), %edx
 2564 0f7c 8B803474 		movl	1537076(%eax), %eax
 2564      1700
 2565 0f82 29D0     		subl	%edx, %eax
 2566 0f84 8945F8   		movl	%eax, -8(%ebp)
1520:../../MMI/Resource/ABMLoader.c ****     
1521:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.src_key_color_enable || alpha_color_cnt == 0)
 2568              	LM250:
 2569 0f87 8B4508   		movl	8(%ebp), %eax
 2570 0f8a 83B82804 		cmpl	$0, 1064(%eax)
 2570      000000
 2571 0f91 7506     		jne	L147
 2572 0f93 837DF800 		cmpl	$0, -8(%ebp)
 2573 0f97 7548     		jne	L146
 2574              	L147:
1522:../../MMI/Resource/ABMLoader.c ****     {
1523:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_enc.is_fully_opaque)
 2576              	LM251:
 2577 0f99 8B4508   		movl	8(%ebp), %eax
 2578 0f9c 83B83004 		cmpl	$0, 1072(%eax)
 2578      000000
 2579 0fa3 741E     		je	L148
1524:../../MMI/Resource/ABMLoader.c ****         {
1525:../../MMI/Resource/ABMLoader.c ****             if (abm_context->abm_palette_bpp == 16)
 2581              	LM252:
 2582 0fa5 8B4508   		movl	8(%ebp), %eax
 2583 0fa8 83B83C74 		cmpl	$16, 1537084(%eax)
 2583      170010
 2584 0faf 7509     		jne	L149
1526:../../MMI/Resource/ABMLoader.c ****             {   
1527:../../MMI/Resource/ABMLoader.c ****                 return GDI_IMAGE_AB2_FORMAT_RGB565_FULLY_OPAQUE;
 2586              	LM253:
 2587 0fb1 C745F405 		movl	$5, -12(%ebp)
 2587      000000
 2588 0fb8 EB43     		jmp	L145
 2589              	L149:
1528:../../MMI/Resource/ABMLoader.c ****             }
1529:../../MMI/Resource/ABMLoader.c ****             
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 60


1530:../../MMI/Resource/ABMLoader.c ****             return GDI_IMAGE_AB2_FORMAT_RGB888_FULLY_OPAQUE;
 2591              	LM254:
 2592 0fba C745F404 		movl	$4, -12(%ebp)
 2592      000000
 2593 0fc1 EB3A     		jmp	L145
 2594              	L148:
1531:../../MMI/Resource/ABMLoader.c ****         }
1532:../../MMI/Resource/ABMLoader.c ****         else
1533:../../MMI/Resource/ABMLoader.c ****         {
1534:../../MMI/Resource/ABMLoader.c ****             if (abm_context->abm_palette_bpp == 16)
 2596              	LM255:
 2597 0fc3 8B4508   		movl	8(%ebp), %eax
 2598 0fc6 83B83C74 		cmpl	$16, 1537084(%eax)
 2598      170010
 2599 0fcd 7509     		jne	L151
1535:../../MMI/Resource/ABMLoader.c ****             {   
1536:../../MMI/Resource/ABMLoader.c ****                 return GDI_IMAGE_AB2_FORMAT_RGB565_SRC_KEY;
 2601              	LM256:
 2602 0fcf C745F401 		movl	$1, -12(%ebp)
 2602      000000
 2603 0fd6 EB25     		jmp	L145
 2604              	L151:
1537:../../MMI/Resource/ABMLoader.c ****             }
1538:../../MMI/Resource/ABMLoader.c ****             
1539:../../MMI/Resource/ABMLoader.c ****             return GDI_IMAGE_AB2_FORMAT_RGB888_SRC_KEY;
 2606              	LM257:
 2607 0fd8 C745F400 		movl	$0, -12(%ebp)
 2607      000000
 2608 0fdf EB1C     		jmp	L145
 2609              	L146:
1540:../../MMI/Resource/ABMLoader.c ****         }            
1541:../../MMI/Resource/ABMLoader.c ****     }
1542:../../MMI/Resource/ABMLoader.c ****     else
1543:../../MMI/Resource/ABMLoader.c ****     {
1544:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_palette_bpp == 16)
 2611              	LM258:
 2612 0fe1 8B4508   		movl	8(%ebp), %eax
 2613 0fe4 83B83C74 		cmpl	$16, 1537084(%eax)
 2613      170010
 2614 0feb 7509     		jne	L153
1545:../../MMI/Resource/ABMLoader.c ****         {   
1546:../../MMI/Resource/ABMLoader.c ****             return GDI_IMAGE_AB2_FORMAT_PARGB8565;
 2616              	LM259:
 2617 0fed C745F403 		movl	$3, -12(%ebp)
 2617      000000
 2618 0ff4 EB07     		jmp	L145
 2619              	L153:
1547:../../MMI/Resource/ABMLoader.c ****         }
1548:../../MMI/Resource/ABMLoader.c ****         
1549:../../MMI/Resource/ABMLoader.c ****         return GDI_IMAGE_AB2_FORMAT_PARGB8888;
 2621              	LM260:
 2622 0ff6 C745F402 		movl	$2, -12(%ebp)
 2622      000000
1550:../../MMI/Resource/ABMLoader.c ****     }
1551:../../MMI/Resource/ABMLoader.c **** }
 2624              	LM261:
 2625              	L145:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 61


 2626              	LBE15:
 2627 0ffd 8B45F4   		movl	-12(%ebp), %eax
 2628 1000 C9       		leave
 2629 1001 C3       		ret
 2634              	Lscope16:
 2642              	_ab2_encode_rle_repeat_code:
1552:../../MMI/Resource/ABMLoader.c **** 
1553:../../MMI/Resource/ABMLoader.c **** 
1554:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1555:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1556:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_get_img_color_idx
1557:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1558:../../MMI/Resource/ABMLoader.c ****  *  Get the color index at poisition (x, y) of input image.
1559:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1560:../../MMI/Resource/ABMLoader.c ****  *  param          [IN]     param usage
1561:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1562:../../MMI/Resource/ABMLoader.c ****  *  The color index. 
1563:../../MMI/Resource/ABMLoader.c ****  *  It will return GDI_IMAGE_AB2_INVALID_COLOR_IDX if error.
1564:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1565:../../MMI/Resource/ABMLoader.c **** static GDI_IMAGE_AB2_INLINE U32 ab2enc_get_img_color_idx(U32 x, U32 y, ABM_Context * abm_context)
1566:../../MMI/Resource/ABMLoader.c **** {
1567:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1568:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1569:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1570:../../MMI/Resource/ABMLoader.c ****     const bytes_per_pixel  = abm_context->abm_enc.bmp_bpp / 8;
1571:../../MMI/Resource/ABMLoader.c ****     const line_pitch_bytes = 
1572:../../MMI/Resource/ABMLoader.c ****         bytes_per_pixel * abm_context->abm_enc.bmp_width + abm_context->abm_enc.line_padding_bytes;
1573:../../MMI/Resource/ABMLoader.c **** 
1574:../../MMI/Resource/ABMLoader.c ****     U8 *pixel_ptr;
1575:../../MMI/Resource/ABMLoader.c ****     U8 pixel_nibble_index, last_nibble;
1576:../../MMI/Resource/ABMLoader.c ****     S32 line_pitch_bytes_4bpp;
1577:../../MMI/Resource/ABMLoader.c ****     
1578:../../MMI/Resource/ABMLoader.c ****     mycolor color;
1579:../../MMI/Resource/ABMLoader.c ****     
1580:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1581:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1582:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1583:../../MMI/Resource/ABMLoader.c ****     /* Pixel ptr should be specially handled for 4bpp as it will be chosen from nibbles */
1584:../../MMI/Resource/ABMLoader.c ****     if(abm_context->abm_enc.bmp_bpp == 4)
1585:../../MMI/Resource/ABMLoader.c ****     {
1586:../../MMI/Resource/ABMLoader.c ****         line_pitch_bytes_4bpp = 
1587:../../MMI/Resource/ABMLoader.c ****             ((abm_context->abm_enc.bmp_width + 7) / 8 * 8) /2;
1588:../../MMI/Resource/ABMLoader.c **** 
1589:../../MMI/Resource/ABMLoader.c ****         /* Pixel byte position = start address + reverse calculated Y + nibble index in byte for X 
1590:../../MMI/Resource/ABMLoader.c ****         pixel_ptr = 
1591:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.bmp_pixel_start_p + 
1592:../../MMI/Resource/ABMLoader.c ****             line_pitch_bytes_4bpp * (abm_context->abm_enc.bmp_height - y - 1) +
1593:../../MMI/Resource/ABMLoader.c ****             (x - (x % 2))/2;
1594:../../MMI/Resource/ABMLoader.c **** 
1595:../../MMI/Resource/ABMLoader.c ****         /* If x is odd, pixel color index lies in the last nibble. Set the last nibble flag ON */
1596:../../MMI/Resource/ABMLoader.c ****         last_nibble = x % 2;
1597:../../MMI/Resource/ABMLoader.c ****     }
1598:../../MMI/Resource/ABMLoader.c ****     else
1599:../../MMI/Resource/ABMLoader.c ****     {
1600:../../MMI/Resource/ABMLoader.c ****         /* BMP file is saved by bottom-up format */
1601:../../MMI/Resource/ABMLoader.c ****         pixel_ptr = 
1602:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.bmp_pixel_start_p + 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 62


1603:../../MMI/Resource/ABMLoader.c ****             line_pitch_bytes * (abm_context->abm_enc.bmp_height - y - 1) +
1604:../../MMI/Resource/ABMLoader.c ****             bytes_per_pixel * x;
1605:../../MMI/Resource/ABMLoader.c ****     }
1606:../../MMI/Resource/ABMLoader.c **** 
1607:../../MMI/Resource/ABMLoader.c ****     /* read pixel */
1608:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.bmp_bpp == 32)
1609:../../MMI/Resource/ABMLoader.c ****     {
1610:../../MMI/Resource/ABMLoader.c ****         color = GET_32(pixel_ptr);
1611:../../MMI/Resource/ABMLoader.c **** 
1612:../../MMI/Resource/ABMLoader.c ****         /* Windows 32-bit BMP is always 0x00RRGGBB. */                    
1613:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_enc.is_windows_bmp)
1614:../../MMI/Resource/ABMLoader.c ****         {
1615:../../MMI/Resource/ABMLoader.c ****             color |= 0xFF000000;
1616:../../MMI/Resource/ABMLoader.c ****         }
1617:../../MMI/Resource/ABMLoader.c **** 
1618:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_enc.src_key_color_enable && (color == TRANSPARENT_COLOR_32))
1619:../../MMI/Resource/ABMLoader.c ****         {
1620:../../MMI/Resource/ABMLoader.c ****             /* transparent color, alpha = 0 */
1621:../../MMI/Resource/ABMLoader.c ****             color = 0;
1622:../../MMI/Resource/ABMLoader.c ****         }                
1623:../../MMI/Resource/ABMLoader.c ****     }
1624:../../MMI/Resource/ABMLoader.c ****     else if (abm_context->abm_enc.bmp_bpp == 24)
1625:../../MMI/Resource/ABMLoader.c ****     {
1626:../../MMI/Resource/ABMLoader.c ****         color = GET_24(pixel_ptr);
1627:../../MMI/Resource/ABMLoader.c **** 
1628:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_enc.src_key_color_enable && (color == TRANSPARENT_COLOR_24))
1629:../../MMI/Resource/ABMLoader.c ****         {   
1630:../../MMI/Resource/ABMLoader.c ****             /* transparent color, alpha = 0 */
1631:../../MMI/Resource/ABMLoader.c ****             color = 0;
1632:../../MMI/Resource/ABMLoader.c ****         }
1633:../../MMI/Resource/ABMLoader.c ****         else
1634:../../MMI/Resource/ABMLoader.c ****         {   
1635:../../MMI/Resource/ABMLoader.c ****             /* opaque color, alpha = 255 */                    
1636:../../MMI/Resource/ABMLoader.c ****             color |= 0xFF000000;
1637:../../MMI/Resource/ABMLoader.c ****         }
1638:../../MMI/Resource/ABMLoader.c ****     }
1639:../../MMI/Resource/ABMLoader.c ****     else if (abm_context->abm_enc.bmp_bpp == 8)
1640:../../MMI/Resource/ABMLoader.c ****     {   
1641:../../MMI/Resource/ABMLoader.c ****         color = abm_context->abm_enc.bmp_palette[*pixel_ptr];
1642:../../MMI/Resource/ABMLoader.c ****     }
1643:../../MMI/Resource/ABMLoader.c ****     else if(abm_context->abm_enc.bmp_bpp == 4)
1644:../../MMI/Resource/ABMLoader.c ****     {   
1645:../../MMI/Resource/ABMLoader.c ****         /* Use the last_nibble flag as it is an indicator for whther it is for first nibble or last
1646:../../MMI/Resource/ABMLoader.c ****         if(!last_nibble )
1647:../../MMI/Resource/ABMLoader.c ****         {
1648:../../MMI/Resource/ABMLoader.c ****             /* First nibble contains the color index */
1649:../../MMI/Resource/ABMLoader.c ****             pixel_nibble_index = (U8)((*pixel_ptr) >> 4);
1650:../../MMI/Resource/ABMLoader.c ****         }
1651:../../MMI/Resource/ABMLoader.c ****         else
1652:../../MMI/Resource/ABMLoader.c ****         {
1653:../../MMI/Resource/ABMLoader.c ****             /* Last nibble contains the color index */
1654:../../MMI/Resource/ABMLoader.c ****             pixel_nibble_index = (U8)((*pixel_ptr) & 0x0F);
1655:../../MMI/Resource/ABMLoader.c ****         }
1656:../../MMI/Resource/ABMLoader.c ****         color = abm_context->abm_enc.bmp_palette[pixel_nibble_index];
1657:../../MMI/Resource/ABMLoader.c ****     }
1658:../../MMI/Resource/ABMLoader.c ****     else
1659:../../MMI/Resource/ABMLoader.c ****     {
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 63


1660:../../MMI/Resource/ABMLoader.c ****         return GDI_IMAGE_AB2_INVALID_COLOR_IDX;
1661:../../MMI/Resource/ABMLoader.c ****     }
1662:../../MMI/Resource/ABMLoader.c **** 
1663:../../MMI/Resource/ABMLoader.c ****     if (A_OF_ARGB8888(color) == 0)
1664:../../MMI/Resource/ABMLoader.c ****     {   
1665:../../MMI/Resource/ABMLoader.c ****         /* index 0 is transparent color */
1666:../../MMI/Resource/ABMLoader.c ****         return 0;
1667:../../MMI/Resource/ABMLoader.c ****     }
1668:../../MMI/Resource/ABMLoader.c ****     
1669:../../MMI/Resource/ABMLoader.c ****     /* index 0 is reserved for transparent color, so +1 */
1670:../../MMI/Resource/ABMLoader.c ****     return (U32)search_color(COLOR_REDUCE(color,abm_context), abm_context) + 1;
1671:../../MMI/Resource/ABMLoader.c **** }
1672:../../MMI/Resource/ABMLoader.c **** 
1673:../../MMI/Resource/ABMLoader.c **** 
1674:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1675:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1676:../../MMI/Resource/ABMLoader.c ****  *  ab2_encode_rle_repeat_code
1677:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1678:../../MMI/Resource/ABMLoader.c ****  *  Encode the RLE repeat code.
1679:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1680:../../MMI/Resource/ABMLoader.c ****  *  os              [IN]    the bit stream to write
1681:../../MMI/Resource/ABMLoader.c ****  *  color_idx       [IN]    the repeat color index to encode
1682:../../MMI/Resource/ABMLoader.c ****  *  color_idx_bits  [IN]    the bits of the repeat color index
1683:../../MMI/Resource/ABMLoader.c ****  *  cnt             [IN]    the number of repeat pixels
1684:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1685:../../MMI/Resource/ABMLoader.c ****  *  void
1686:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1687:../../MMI/Resource/ABMLoader.c **** static void ab2_encode_rle_repeat_code(
1688:../../MMI/Resource/ABMLoader.c ****     ab2_bs_struct *os, 
1689:../../MMI/Resource/ABMLoader.c ****     U32 color_idx, 
1690:../../MMI/Resource/ABMLoader.c ****     U32 color_idx_bits,
1691:../../MMI/Resource/ABMLoader.c ****     U32 cnt)
1692:../../MMI/Resource/ABMLoader.c **** {
 2644              	LM262:
 2645 1002 55       		pushl	%ebp
 2646 1003 89E5     		movl	%esp, %ebp
 2647 1005 83EC18   		subl	$24, %esp
1693:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1694:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1695:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1696:../../MMI/Resource/ABMLoader.c ****     const U32 max_cnt = 128;
 2649              	LM263:
 2650              	LBB16:
 2651 1008 C745FC80 		movl	$128, -4(%ebp)
 2651      000000
1697:../../MMI/Resource/ABMLoader.c ****     
1698:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1699:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1700:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1701:../../MMI/Resource/ABMLoader.c ****     while (cnt > max_cnt)
 2653              	LM264:
 2654              	L175:
 2655 100f 8B4514   		movl	20(%ebp), %eax
 2656 1012 3B45FC   		cmpl	-4(%ebp), %eax
 2657 1015 7702     		ja	L177
 2658 1017 EB3E     		jmp	L176
 2659              	L177:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 64


1702:../../MMI/Resource/ABMLoader.c ****     {
1703:../../MMI/Resource/ABMLoader.c ****         ab2_bs_write(os, max_cnt - 1, 8);
 2661              	LM265:
 2662 1019 C7442408 		movl	$8, 8(%esp)
 2662      08000000 
 2663 1021 8B45FC   		movl	-4(%ebp), %eax
 2664 1024 48       		decl	%eax
 2665 1025 89442404 		movl	%eax, 4(%esp)
 2666 1029 8B4508   		movl	8(%ebp), %eax
 2667 102c 890424   		movl	%eax, (%esp)
 2668 102f E8DB1900 		call	_ab2_bs_write
 2668      00
1704:../../MMI/Resource/ABMLoader.c ****         ab2_bs_write(os, color_idx, color_idx_bits);
 2670              	LM266:
 2671 1034 8B4510   		movl	16(%ebp), %eax
 2672 1037 89442408 		movl	%eax, 8(%esp)
 2673 103b 8B450C   		movl	12(%ebp), %eax
 2674 103e 89442404 		movl	%eax, 4(%esp)
 2675 1042 8B4508   		movl	8(%ebp), %eax
 2676 1045 890424   		movl	%eax, (%esp)
 2677 1048 E8C21900 		call	_ab2_bs_write
 2677      00
1705:../../MMI/Resource/ABMLoader.c **** 
1706:../../MMI/Resource/ABMLoader.c ****         cnt -= max_cnt;
 2679              	LM267:
 2680 104d 8B55FC   		movl	-4(%ebp), %edx
 2681 1050 8D4514   		leal	20(%ebp), %eax
 2682 1053 2910     		subl	%edx, (%eax)
 2683 1055 EBB8     		jmp	L175
 2684              	L176:
1707:../../MMI/Resource/ABMLoader.c ****     }
1708:../../MMI/Resource/ABMLoader.c **** 
1709:../../MMI/Resource/ABMLoader.c ****     if (cnt > 0)
 2686              	LM268:
 2687 1057 837D1400 		cmpl	$0, 20(%ebp)
 2688 105b 7434     		je	L174
1710:../../MMI/Resource/ABMLoader.c ****     {
1711:../../MMI/Resource/ABMLoader.c ****         ab2_bs_write(os, cnt - 1, 8);
 2690              	LM269:
 2691 105d C7442408 		movl	$8, 8(%esp)
 2691      08000000 
 2692 1065 8B4514   		movl	20(%ebp), %eax
 2693 1068 48       		decl	%eax
 2694 1069 89442404 		movl	%eax, 4(%esp)
 2695 106d 8B4508   		movl	8(%ebp), %eax
 2696 1070 890424   		movl	%eax, (%esp)
 2697 1073 E8971900 		call	_ab2_bs_write
 2697      00
1712:../../MMI/Resource/ABMLoader.c ****         ab2_bs_write(os, color_idx, color_idx_bits);
 2699              	LM270:
 2700 1078 8B4510   		movl	16(%ebp), %eax
 2701 107b 89442408 		movl	%eax, 8(%esp)
 2702 107f 8B450C   		movl	12(%ebp), %eax
 2703 1082 89442404 		movl	%eax, 4(%esp)
 2704 1086 8B4508   		movl	8(%ebp), %eax
 2705 1089 890424   		movl	%eax, (%esp)
 2706 108c E87E1900 		call	_ab2_bs_write
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 65


 2706      00
1713:../../MMI/Resource/ABMLoader.c ****     }
1714:../../MMI/Resource/ABMLoader.c **** }
 2708              	LM271:
 2709              	L174:
 2710 1091 C9       		leave
 2711 1092 C3       		ret
 2712              	LBE16:
 2716              	Lscope17:
 2726              	_ab2_encode_rle_discount_code:
1715:../../MMI/Resource/ABMLoader.c **** 
1716:../../MMI/Resource/ABMLoader.c **** 
1717:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1718:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1719:../../MMI/Resource/ABMLoader.c ****  *  ab2_encode_rle_discount_code
1720:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1721:../../MMI/Resource/ABMLoader.c ****  *  Encode the RLE discontinue code.
1722:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1723:../../MMI/Resource/ABMLoader.c ****  *  os              [IN]    the bit stream to write
1724:../../MMI/Resource/ABMLoader.c ****  *  x               [IN]    x of the start poisition to encode
1725:../../MMI/Resource/ABMLoader.c ****  *  y               [IN]    y of the start poisition to encode
1726:../../MMI/Resource/ABMLoader.c ****  *  color_idx_bits  [IN]    the bits of the repeat color index
1727:../../MMI/Resource/ABMLoader.c ****  *  cnt             [IN]    the number pixels to encode
1728:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1729:../../MMI/Resource/ABMLoader.c ****  *  void
1730:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1731:../../MMI/Resource/ABMLoader.c **** static void ab2_encode_rle_discount_code(
1732:../../MMI/Resource/ABMLoader.c ****     ab2_bs_struct *os, 
1733:../../MMI/Resource/ABMLoader.c ****     U32 x, 
1734:../../MMI/Resource/ABMLoader.c ****     U32 y, 
1735:../../MMI/Resource/ABMLoader.c ****     U32 color_idx_bits,
1736:../../MMI/Resource/ABMLoader.c ****     U32 cnt,
1737:../../MMI/Resource/ABMLoader.c ****     ABM_Context * abm_context)
1738:../../MMI/Resource/ABMLoader.c **** {
 2728              	LM272:
 2729 1093 55       		pushl	%ebp
 2730 1094 89E5     		movl	%esp, %ebp
 2731 1096 83EC28   		subl	$40, %esp
1739:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1740:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1741:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1742:../../MMI/Resource/ABMLoader.c ****     const U32 max_cnt = 128;
 2733              	LM273:
 2734              	LBB17:
 2735 1099 C745FC80 		movl	$128, -4(%ebp)
 2735      000000
1743:../../MMI/Resource/ABMLoader.c ****     
1744:../../MMI/Resource/ABMLoader.c ****     U32 x0 = abm_context->abm_enc.x1;
 2737              	LM274:
 2738 10a0 8B451C   		movl	28(%ebp), %eax
 2739 10a3 8B801804 		movl	1048(%eax), %eax
 2739      0000
 2740 10a9 8945F8   		movl	%eax, -8(%ebp)
1745:../../MMI/Resource/ABMLoader.c ****     U32 x1 = abm_context->abm_enc.x2;
 2742              	LM275:
 2743 10ac 8B451C   		movl	28(%ebp), %eax
 2744 10af 8B802004 		movl	1056(%eax), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 66


 2744      0000
 2745 10b5 8945F4   		movl	%eax, -12(%ebp)
1746:../../MMI/Resource/ABMLoader.c ****     
1747:../../MMI/Resource/ABMLoader.c ****     U32 i;
1748:../../MMI/Resource/ABMLoader.c ****     
1749:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1750:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1751:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1752:../../MMI/Resource/ABMLoader.c ****     while (cnt > max_cnt)
 2747              	LM276:
 2748              	L180:
 2749 10b8 8B4518   		movl	24(%ebp), %eax
 2750 10bb 3B45FC   		cmpl	-4(%ebp), %eax
 2751 10be 7705     		ja	L182
 2752 10c0 E98F0000 		jmp	L181
 2752      00
 2753              	L182:
1753:../../MMI/Resource/ABMLoader.c ****     {
1754:../../MMI/Resource/ABMLoader.c ****         ab2_bs_write(os, 0x80 | (max_cnt - 1), 8);
 2755              	LM277:
 2756 10c5 C7442408 		movl	$8, 8(%esp)
 2756      08000000 
 2757 10cd 8B45FC   		movl	-4(%ebp), %eax
 2758 10d0 48       		decl	%eax
 2759 10d1 0D800000 		orl	$128, %eax
 2759      00
 2760 10d6 89442404 		movl	%eax, 4(%esp)
 2761 10da 8B4508   		movl	8(%ebp), %eax
 2762 10dd 890424   		movl	%eax, (%esp)
 2763 10e0 E82A1900 		call	_ab2_bs_write
 2763      00
1755:../../MMI/Resource/ABMLoader.c **** 
1756:../../MMI/Resource/ABMLoader.c ****         for (i = max_cnt; i != 0; i--)
 2765              	LM278:
 2766 10e5 8B45FC   		movl	-4(%ebp), %eax
 2767 10e8 8945F0   		movl	%eax, -16(%ebp)
 2768              	L183:
 2769 10eb 837DF000 		cmpl	$0, -16(%ebp)
 2770 10ef 7502     		jne	L186
 2771 10f1 EB54     		jmp	L184
 2772              	L186:
1757:../../MMI/Resource/ABMLoader.c ****         {
1758:../../MMI/Resource/ABMLoader.c ****             U32 color_idx = ab2enc_get_img_color_idx(x, y, abm_context);
 2774              	LM279:
 2775              	LBB18:
 2776 10f3 8B451C   		movl	28(%ebp), %eax
 2777 10f6 89442408 		movl	%eax, 8(%esp)
 2778 10fa 8B4510   		movl	16(%ebp), %eax
 2779 10fd 89442404 		movl	%eax, 4(%esp)
 2780 1101 8B450C   		movl	12(%ebp), %eax
 2781 1104 890424   		movl	%eax, (%esp)
 2782 1107 E8831900 		call	_ab2enc_get_img_color_idx
 2782      00
 2783 110c 8945EC   		movl	%eax, -20(%ebp)
1759:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(os, color_idx, color_idx_bits);
 2785              	LM280:
 2786 110f 8B4514   		movl	20(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 67


 2787 1112 89442408 		movl	%eax, 8(%esp)
 2788 1116 8B45EC   		movl	-20(%ebp), %eax
 2789 1119 89442404 		movl	%eax, 4(%esp)
 2790 111d 8B4508   		movl	8(%ebp), %eax
 2791 1120 890424   		movl	%eax, (%esp)
 2792 1123 E8E71800 		call	_ab2_bs_write
 2792      00
1760:../../MMI/Resource/ABMLoader.c **** 
1761:../../MMI/Resource/ABMLoader.c ****             /* seek to next image pixel */
1762:../../MMI/Resource/ABMLoader.c ****             x++;
 2794              	LM281:
 2795 1128 8D450C   		leal	12(%ebp), %eax
 2796 112b FF00     		incl	(%eax)
1763:../../MMI/Resource/ABMLoader.c ****             if (x > x1)
 2798              	LM282:
 2799 112d 8B450C   		movl	12(%ebp), %eax
 2800 1130 3B45F4   		cmpl	-12(%ebp), %eax
 2801 1133 760B     		jbe	L185
1764:../../MMI/Resource/ABMLoader.c ****             {
1765:../../MMI/Resource/ABMLoader.c ****                 x = x0;
 2803              	LM283:
 2804 1135 8B45F8   		movl	-8(%ebp), %eax
 2805 1138 89450C   		movl	%eax, 12(%ebp)
1766:../../MMI/Resource/ABMLoader.c ****                 y++;
 2807              	LM284:
 2808 113b 8D4510   		leal	16(%ebp), %eax
 2809 113e FF00     		incl	(%eax)
 2811              	LM285:
 2812              	L185:
 2813 1140 8D45F0   		leal	-16(%ebp), %eax
 2814              	LBE18:
 2815 1143 FF08     		decl	(%eax)
 2816 1145 EBA4     		jmp	L183
 2817              	L184:
1767:../../MMI/Resource/ABMLoader.c ****             }
1768:../../MMI/Resource/ABMLoader.c ****         }
1769:../../MMI/Resource/ABMLoader.c ****         
1770:../../MMI/Resource/ABMLoader.c ****         cnt -= max_cnt;
 2819              	LM286:
 2820 1147 8B55FC   		movl	-4(%ebp), %edx
 2821 114a 8D4518   		leal	24(%ebp), %eax
 2822 114d 2910     		subl	%edx, (%eax)
 2823 114f E964FFFF 		jmp	L180
 2823      FF
 2824              	L181:
1771:../../MMI/Resource/ABMLoader.c ****     } /* while (cnt > max_cnt) */
1772:../../MMI/Resource/ABMLoader.c **** 
1773:../../MMI/Resource/ABMLoader.c ****     if (cnt > 0)
 2826              	LM287:
 2827 1154 837D1800 		cmpl	$0, 24(%ebp)
 2828 1158 0F848200 		je	L179
 2828      0000
1774:../../MMI/Resource/ABMLoader.c ****     {
1775:../../MMI/Resource/ABMLoader.c ****         ab2_bs_write(os, 0x80 | (cnt - 1), 8);
 2830              	LM288:
 2831 115e C7442408 		movl	$8, 8(%esp)
 2831      08000000 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 68


 2832 1166 8B4518   		movl	24(%ebp), %eax
 2833 1169 48       		decl	%eax
 2834 116a 0D800000 		orl	$128, %eax
 2834      00
 2835 116f 89442404 		movl	%eax, 4(%esp)
 2836 1173 8B4508   		movl	8(%ebp), %eax
 2837 1176 890424   		movl	%eax, (%esp)
 2838 1179 E8911800 		call	_ab2_bs_write
 2838      00
1776:../../MMI/Resource/ABMLoader.c **** 
1777:../../MMI/Resource/ABMLoader.c ****         for (i = cnt; i != 0; i--)
 2840              	LM289:
 2841 117e 8B4518   		movl	24(%ebp), %eax
 2842 1181 8945F0   		movl	%eax, -16(%ebp)
 2843              	L189:
 2844 1184 837DF000 		cmpl	$0, -16(%ebp)
 2845 1188 7502     		jne	L192
 2846 118a EB54     		jmp	L179
 2847              	L192:
1778:../../MMI/Resource/ABMLoader.c ****         {
1779:../../MMI/Resource/ABMLoader.c ****             U32 color_idx = ab2enc_get_img_color_idx(x, y, abm_context);
 2849              	LM290:
 2850              	LBB19:
 2851 118c 8B451C   		movl	28(%ebp), %eax
 2852 118f 89442408 		movl	%eax, 8(%esp)
 2853 1193 8B4510   		movl	16(%ebp), %eax
 2854 1196 89442404 		movl	%eax, 4(%esp)
 2855 119a 8B450C   		movl	12(%ebp), %eax
 2856 119d 890424   		movl	%eax, (%esp)
 2857 11a0 E8EA1800 		call	_ab2enc_get_img_color_idx
 2857      00
 2858 11a5 8945EC   		movl	%eax, -20(%ebp)
1780:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(os, color_idx, color_idx_bits);
 2860              	LM291:
 2861 11a8 8B4514   		movl	20(%ebp), %eax
 2862 11ab 89442408 		movl	%eax, 8(%esp)
 2863 11af 8B45EC   		movl	-20(%ebp), %eax
 2864 11b2 89442404 		movl	%eax, 4(%esp)
 2865 11b6 8B4508   		movl	8(%ebp), %eax
 2866 11b9 890424   		movl	%eax, (%esp)
 2867 11bc E84E1800 		call	_ab2_bs_write
 2867      00
1781:../../MMI/Resource/ABMLoader.c **** 
1782:../../MMI/Resource/ABMLoader.c ****             /* seek to next image pixel */
1783:../../MMI/Resource/ABMLoader.c ****             x++;
 2869              	LM292:
 2870 11c1 8D450C   		leal	12(%ebp), %eax
 2871 11c4 FF00     		incl	(%eax)
1784:../../MMI/Resource/ABMLoader.c ****             if (x > x1)
 2873              	LM293:
 2874 11c6 8B450C   		movl	12(%ebp), %eax
 2875 11c9 3B45F4   		cmpl	-12(%ebp), %eax
 2876 11cc 760B     		jbe	L191
1785:../../MMI/Resource/ABMLoader.c ****             {
1786:../../MMI/Resource/ABMLoader.c ****                 x = x0;
 2878              	LM294:
 2879 11ce 8B45F8   		movl	-8(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 69


 2880 11d1 89450C   		movl	%eax, 12(%ebp)
1787:../../MMI/Resource/ABMLoader.c ****                 y++;
 2882              	LM295:
 2883 11d4 8D4510   		leal	16(%ebp), %eax
 2884 11d7 FF00     		incl	(%eax)
 2886              	LM296:
 2887              	L191:
 2888 11d9 8D45F0   		leal	-16(%ebp), %eax
 2889              	LBE19:
 2890 11dc FF08     		decl	(%eax)
 2891 11de EBA4     		jmp	L189
1788:../../MMI/Resource/ABMLoader.c ****             }
1789:../../MMI/Resource/ABMLoader.c ****         }
1790:../../MMI/Resource/ABMLoader.c ****     } /* if (cnt > 0) */
1791:../../MMI/Resource/ABMLoader.c **** }
 2893              	LM297:
 2894              	L179:
 2895 11e0 C9       		leave
 2896 11e1 C3       		ret
 2897              	LBE17:
 2910              	Lscope18:
 2916              	_ab2enc_encode_header:
1792:../../MMI/Resource/ABMLoader.c **** 
1793:../../MMI/Resource/ABMLoader.c **** 
1794:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1795:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1796:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_encode_header
1797:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1798:../../MMI/Resource/ABMLoader.c ****  *  Encode the ABM v2 header
1799:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1800:../../MMI/Resource/ABMLoader.c ****  *  mem_ptr         [IN]     buffer to write header
1801:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1802:../../MMI/Resource/ABMLoader.c ****  *  Return the bytes written. If error, it will return 0
1803:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1804:../../MMI/Resource/ABMLoader.c **** static U32 ab2enc_encode_header(U8 *mem_ptr, ABM_Context * abm_context)
1805:../../MMI/Resource/ABMLoader.c **** {
 2918              	LM298:
 2919 11e2 55       		pushl	%ebp
 2920 11e3 89E5     		movl	%esp, %ebp
 2921 11e5 83EC48   		subl	$72, %esp
1806:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1807:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1808:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1809:../../MMI/Resource/ABMLoader.c ****     ab2_bs_struct os;
1810:../../MMI/Resource/ABMLoader.c **** 
1811:../../MMI/Resource/ABMLoader.c ****     U32 boundary_left   = abm_context->abm_enc.x1;
 2923              	LM299:
 2924              	LBB20:
 2925 11e8 8B450C   		movl	12(%ebp), %eax
 2926 11eb 8B801804 		movl	1048(%eax), %eax
 2926      0000
 2927 11f1 8945E4   		movl	%eax, -28(%ebp)
1812:../../MMI/Resource/ABMLoader.c ****     U32 boundary_top    = abm_context->abm_enc.y1;
 2929              	LM300:
 2930 11f4 8B450C   		movl	12(%ebp), %eax
 2931 11f7 8B801C04 		movl	1052(%eax), %eax
 2931      0000
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 70


 2932 11fd 8945E0   		movl	%eax, -32(%ebp)
1813:../../MMI/Resource/ABMLoader.c ****     U32 boundary_right  = abm_context->abm_enc.bmp_width - 1 - abm_context->abm_enc.x2;
 2934              	LM301:
 2935 1200 8B4D0C   		movl	12(%ebp), %ecx
 2936 1203 8B450C   		movl	12(%ebp), %eax
 2937 1206 8B902004 		movl	1056(%eax), %edx
 2937      0000
 2938 120c 8B01     		movl	(%ecx), %eax
 2939 120e 29D0     		subl	%edx, %eax
 2940 1210 48       		decl	%eax
 2941 1211 8945DC   		movl	%eax, -36(%ebp)
1814:../../MMI/Resource/ABMLoader.c ****     U32 boundary_bottom = abm_context->abm_enc.bmp_height - 1 - abm_context->abm_enc.y2;
 2943              	LM302:
 2944 1214 8B4D0C   		movl	12(%ebp), %ecx
 2945 1217 8B450C   		movl	12(%ebp), %eax
 2946 121a 8B902404 		movl	1060(%eax), %edx
 2946      0000
 2947 1220 8B4104   		movl	4(%ecx), %eax
 2948 1223 29D0     		subl	%edx, %eax
 2949 1225 48       		decl	%eax
 2950 1226 8945D8   		movl	%eax, -40(%ebp)
1815:../../MMI/Resource/ABMLoader.c ****     U32 pixel_format    = ab2enc_get_pixel_format(abm_context);
 2952              	LM303:
 2953 1229 8B450C   		movl	12(%ebp), %eax
 2954 122c 890424   		movl	%eax, (%esp)
 2955 122f E82EFDFF 		call	_ab2enc_get_pixel_format
 2955      FF
 2956 1234 8945D4   		movl	%eax, -44(%ebp)
1816:../../MMI/Resource/ABMLoader.c ****     U32 algorithm       = GDI_IMAGE_AB2_ALGORITHM_RLE;
 2958              	LM304:
 2959 1237 C745D001 		movl	$1, -48(%ebp)
 2959      000000
1817:../../MMI/Resource/ABMLoader.c **** 
1818:../../MMI/Resource/ABMLoader.c ****     U32 header_size;
1819:../../MMI/Resource/ABMLoader.c ****     
1820:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1821:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1822:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1823:../../MMI/Resource/ABMLoader.c ****     ab2_bs_init(&os, mem_ptr);
 2961              	LM305:
 2962 123e 8B4508   		movl	8(%ebp), %eax
 2963 1241 89442404 		movl	%eax, 4(%esp)
 2964 1245 8D45E8   		leal	-24(%ebp), %eax
 2965 1248 890424   		movl	%eax, (%esp)
 2966 124b E89E1700 		call	_ab2_bs_init
 2966      00
1824:../../MMI/Resource/ABMLoader.c **** 
1825:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, (U32)abm_context->abm_enc.bmp_width,  GDI_IMAGE_AB2_HEADER_WIDTH_BITS);
 2968              	LM306:
 2969 1250 C7442408 		movl	$12, 8(%esp)
 2969      0C000000 
 2970 1258 8B450C   		movl	12(%ebp), %eax
 2971 125b 8B00     		movl	(%eax), %eax
 2972 125d 89442404 		movl	%eax, 4(%esp)
 2973 1261 8D45E8   		leal	-24(%ebp), %eax
 2974 1264 890424   		movl	%eax, (%esp)
 2975 1267 E8A31700 		call	_ab2_bs_write
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 71


 2975      00
1826:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, (U32)abm_context->abm_enc.bmp_height, GDI_IMAGE_AB2_HEADER_HEIGHT_BITS);
 2977              	LM307:
 2978 126c C7442408 		movl	$12, 8(%esp)
 2978      0C000000 
 2979 1274 8B450C   		movl	12(%ebp), %eax
 2980 1277 8B4004   		movl	4(%eax), %eax
 2981 127a 89442404 		movl	%eax, 4(%esp)
 2982 127e 8D45E8   		leal	-24(%ebp), %eax
 2983 1281 890424   		movl	%eax, (%esp)
 2984 1284 E8861700 		call	_ab2_bs_write
 2984      00
1827:../../MMI/Resource/ABMLoader.c **** 
1828:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, boundary_left,    GDI_IMAGE_AB2_HEADER_BOUND_LEFT_BITS);
 2986              	LM308:
 2987 1289 C7442408 		movl	$8, 8(%esp)
 2987      08000000 
 2988 1291 8B45E4   		movl	-28(%ebp), %eax
 2989 1294 89442404 		movl	%eax, 4(%esp)
 2990 1298 8D45E8   		leal	-24(%ebp), %eax
 2991 129b 890424   		movl	%eax, (%esp)
 2992 129e E86C1700 		call	_ab2_bs_write
 2992      00
1829:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, boundary_top,     GDI_IMAGE_AB2_HEADER_BOUND_TOP_BITS);
 2994              	LM309:
 2995 12a3 C7442408 		movl	$8, 8(%esp)
 2995      08000000 
 2996 12ab 8B45E0   		movl	-32(%ebp), %eax
 2997 12ae 89442404 		movl	%eax, 4(%esp)
 2998 12b2 8D45E8   		leal	-24(%ebp), %eax
 2999 12b5 890424   		movl	%eax, (%esp)
 3000 12b8 E8521700 		call	_ab2_bs_write
 3000      00
1830:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, boundary_right,   GDI_IMAGE_AB2_HEADER_BOUND_RIGHT_BITS);
 3002              	LM310:
 3003 12bd C7442408 		movl	$8, 8(%esp)
 3003      08000000 
 3004 12c5 8B45DC   		movl	-36(%ebp), %eax
 3005 12c8 89442404 		movl	%eax, 4(%esp)
 3006 12cc 8D45E8   		leal	-24(%ebp), %eax
 3007 12cf 890424   		movl	%eax, (%esp)
 3008 12d2 E8381700 		call	_ab2_bs_write
 3008      00
1831:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, boundary_bottom,  GDI_IMAGE_AB2_HEADER_BOUND_BOTTOM_BITS);
 3010              	LM311:
 3011 12d7 C7442408 		movl	$8, 8(%esp)
 3011      08000000 
 3012 12df 8B45D8   		movl	-40(%ebp), %eax
 3013 12e2 89442404 		movl	%eax, 4(%esp)
 3014 12e6 8D45E8   		leal	-24(%ebp), %eax
 3015 12e9 890424   		movl	%eax, (%esp)
 3016 12ec E81E1700 		call	_ab2_bs_write
 3016      00
1832:../../MMI/Resource/ABMLoader.c ****     
1833:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, pixel_format,     GDI_IMAGE_AB2_HEADER_FORMAT_BITS);
 3018              	LM312:
 3019 12f1 C7442408 		movl	$4, 8(%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 72


 3019      04000000 
 3020 12f9 8B45D4   		movl	-44(%ebp), %eax
 3021 12fc 89442404 		movl	%eax, 4(%esp)
 3022 1300 8D45E8   		leal	-24(%ebp), %eax
 3023 1303 890424   		movl	%eax, (%esp)
 3024 1306 E8041700 		call	_ab2_bs_write
 3024      00
1834:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, algorithm,        GDI_IMAGE_AB2_HEADER_ALGORITHM_BITS);
 3026              	LM313:
 3027 130b C7442408 		movl	$3, 8(%esp)
 3027      03000000 
 3028 1313 8B45D0   		movl	-48(%ebp), %eax
 3029 1316 89442404 		movl	%eax, 4(%esp)
 3030 131a 8D45E8   		leal	-24(%ebp), %eax
 3031 131d 890424   		movl	%eax, (%esp)
 3032 1320 E8EA1600 		call	_ab2_bs_write
 3032      00
1835:../../MMI/Resource/ABMLoader.c ****     
1836:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, 0,                GDI_IMAGE_AB2_HEADER_RESERVED_1_BITS);
 3034              	LM314:
 3035 1325 C7442408 		movl	$1, 8(%esp)
 3035      01000000 
 3036 132d C7442404 		movl	$0, 4(%esp)
 3036      00000000 
 3037 1335 8D45E8   		leal	-24(%ebp), %eax
 3038 1338 890424   		movl	%eax, (%esp)
 3039 133b E8CF1600 		call	_ab2_bs_write
 3039      00
1837:../../MMI/Resource/ABMLoader.c **** 
1838:../../MMI/Resource/ABMLoader.c ****     header_size = ab2_bs_offset(&os, mem_ptr);
 3041              	LM315:
 3042 1340 8B4508   		movl	8(%ebp), %eax
 3043 1343 89442404 		movl	%eax, 4(%esp)
 3044 1347 8D45E8   		leal	-24(%ebp), %eax
 3045 134a 890424   		movl	%eax, (%esp)
 3046 134d E82E1700 		call	_ab2_bs_offset
 3046      00
 3047 1352 8945CC   		movl	%eax, -52(%ebp)
1839:../../MMI/Resource/ABMLoader.c **** 
1840:../../MMI/Resource/ABMLoader.c ****     //MMI_ASSERT(header_size == GDI_IMAGE_AB2_HEADER_SIZE);
1841:../../MMI/Resource/ABMLoader.c ****     
1842:../../MMI/Resource/ABMLoader.c ****     return header_size;
 3049              	LM316:
 3050 1355 8B45CC   		movl	-52(%ebp), %eax
1843:../../MMI/Resource/ABMLoader.c **** }
 3052              	LM317:
 3053 1358 C9       		leave
 3054 1359 C3       		ret
 3055              	LBE20:
 3066              	Lscope19:
 3072              	_ab2enc_rle_encode_header:
1844:../../MMI/Resource/ABMLoader.c **** 
1845:../../MMI/Resource/ABMLoader.c **** 
1846:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1847:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1848:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_rle_encode_header
1849:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 73


1850:../../MMI/Resource/ABMLoader.c ****  *  Encode ABM v2 RLE header
1851:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1852:../../MMI/Resource/ABMLoader.c ****  *  mem_ptr         [OUT]    buffer to write header
1853:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1854:../../MMI/Resource/ABMLoader.c ****  *  Return the bytes written. If error, it will return 0
1855:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1856:../../MMI/Resource/ABMLoader.c **** static U32 ab2enc_rle_encode_header(U8 *mem_ptr, ABM_Context * abm_context)
1857:../../MMI/Resource/ABMLoader.c **** {
 3074              	LM318:
 3075 135a 55       		pushl	%ebp
 3076 135b 89E5     		movl	%esp, %ebp
 3077 135d 83EC48   		subl	$72, %esp
1858:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1859:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1860:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1861:../../MMI/Resource/ABMLoader.c ****     ab2_bs_struct os;
1862:../../MMI/Resource/ABMLoader.c ****     
1863:../../MMI/Resource/ABMLoader.c ****     U32 normal_color_cnt;
1864:../../MMI/Resource/ABMLoader.c ****     U32 alpha_color_cnt;
1865:../../MMI/Resource/ABMLoader.c **** 
1866:../../MMI/Resource/ABMLoader.c ****     U32 i;
1867:../../MMI/Resource/ABMLoader.c ****     
1868:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1869:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1870:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1871:../../MMI/Resource/ABMLoader.c ****     ab2_bs_init(&os, mem_ptr);
 3079              	LM319:
 3080              	LBB21:
 3081 1360 8B4508   		movl	8(%ebp), %eax
 3082 1363 89442404 		movl	%eax, 4(%esp)
 3083 1367 8D45E8   		leal	-24(%ebp), %eax
 3084 136a 890424   		movl	%eax, (%esp)
 3085 136d E87C1600 		call	_ab2_bs_init
 3085      00
1872:../../MMI/Resource/ABMLoader.c **** 
1873:../../MMI/Resource/ABMLoader.c ****     normal_color_cnt    = get_normal_color_num(abm_context);
 3087              	LM320:
 3088 1372 8B450C   		movl	12(%ebp), %eax
 3089 1375 890424   		movl	%eax, (%esp)
 3090 1378 E88DEFFF 		call	_get_normal_color_num
 3090      FF
 3091 137d 8945E4   		movl	%eax, -28(%ebp)
1874:../../MMI/Resource/ABMLoader.c ****     alpha_color_cnt     = abm_context->color_idx_tab.color_num - normal_color_cnt;
 3093              	LM321:
 3094 1380 8B450C   		movl	12(%ebp), %eax
 3095 1383 8B55E4   		movl	-28(%ebp), %edx
 3096 1386 8B803474 		movl	1537076(%eax), %eax
 3096      1700
 3097 138c 29D0     		subl	%edx, %eax
 3098 138e 8945E0   		movl	%eax, -32(%ebp)
1875:../../MMI/Resource/ABMLoader.c ****     
1876:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, normal_color_cnt, 16);
 3100              	LM322:
 3101 1391 C7442408 		movl	$16, 8(%esp)
 3101      10000000 
 3102 1399 8B45E4   		movl	-28(%ebp), %eax
 3103 139c 89442404 		movl	%eax, 4(%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 74


 3104 13a0 8D45E8   		leal	-24(%ebp), %eax
 3105 13a3 890424   		movl	%eax, (%esp)
 3106 13a6 E8641600 		call	_ab2_bs_write
 3106      00
1877:../../MMI/Resource/ABMLoader.c ****     ab2_bs_write(&os, alpha_color_cnt,  16);
 3108              	LM323:
 3109 13ab C7442408 		movl	$16, 8(%esp)
 3109      10000000 
 3110 13b3 8B45E0   		movl	-32(%ebp), %eax
 3111 13b6 89442404 		movl	%eax, 4(%esp)
 3112 13ba 8D45E8   		leal	-24(%ebp), %eax
 3113 13bd 890424   		movl	%eax, (%esp)
 3114 13c0 E84A1600 		call	_ab2_bs_write
 3114      00
1878:../../MMI/Resource/ABMLoader.c **** 
1879:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < normal_color_cnt; i++)
 3116              	LM324:
 3117 13c5 C745DC00 		movl	$0, -36(%ebp)
 3117      000000
 3118              	L196:
 3119 13cc 8B45DC   		movl	-36(%ebp), %eax
 3120 13cf 3B45E4   		cmpl	-28(%ebp), %eax
 3121 13d2 7205     		jb	L199
 3122 13d4 E9D00000 		jmp	L197
 3122      00
 3123              	L199:
1880:../../MMI/Resource/ABMLoader.c ****     {
1881:../../MMI/Resource/ABMLoader.c ****         mycolor color = ab2enc_color_preprocess(abm_context->color_idx_tab.color_table[i], abm_cont
 3125              	LM325:
 3126              	LBB22:
 3127 13d9 8B450C   		movl	12(%ebp), %eax
 3128 13dc 89442404 		movl	%eax, 4(%esp)
 3129 13e0 8B550C   		movl	12(%ebp), %edx
 3130 13e3 8B45DC   		movl	-36(%ebp), %eax
 3131 13e6 8B848234 		movl	1076(%edx,%eax,4), %eax
 3131      040000
 3132 13ed 890424   		movl	%eax, (%esp)
 3133 13f0 E86BFAFF 		call	_ab2enc_color_preprocess
 3133      FF
 3134 13f5 8945D8   		movl	%eax, -40(%ebp)
1882:../../MMI/Resource/ABMLoader.c ****         
1883:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_palette_bpp == 16)
 3136              	LM326:
 3137 13f8 8B450C   		movl	12(%ebp), %eax
 3138 13fb 83B83C74 		cmpl	$16, 1537084(%eax)
 3138      170010
 3139 1402 7549     		jne	L200
1884:../../MMI/Resource/ABMLoader.c ****         {   
1885:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, ARGB8888_TO_RGB16(color), 16);
 3141              	LM327:
 3142 1404 C7442408 		movl	$16, 8(%esp)
 3142      10000000 
 3143 140c 8B45D8   		movl	-40(%ebp), %eax
 3144 140f C1E008   		sall	$8, %eax
 3145 1412 C1E818   		shrl	$24, %eax
 3146 1415 C1E803   		shrl	$3, %eax
 3147 1418 89C2     		movl	%eax, %edx
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 75


 3148 141a C1E20B   		sall	$11, %edx
 3149 141d 8B45D8   		movl	-40(%ebp), %eax
 3150 1420 C1E010   		sall	$16, %eax
 3151 1423 C1E818   		shrl	$24, %eax
 3152 1426 C1E802   		shrl	$2, %eax
 3153 1429 C1E005   		sall	$5, %eax
 3154 142c 09C2     		orl	%eax, %edx
 3155 142e 8B45D8   		movl	-40(%ebp), %eax
 3156 1431 C1E018   		sall	$24, %eax
 3157 1434 C1E818   		shrl	$24, %eax
 3158 1437 C1E803   		shrl	$3, %eax
 3159 143a 09D0     		orl	%edx, %eax
 3160 143c 89442404 		movl	%eax, 4(%esp)
 3161 1440 8D45E8   		leal	-24(%ebp), %eax
 3162 1443 890424   		movl	%eax, (%esp)
 3163 1446 E8C41500 		call	_ab2_bs_write
 3163      00
 3164 144b EB52     		jmp	L198
 3165              	L200:
1886:../../MMI/Resource/ABMLoader.c ****         }
1887:../../MMI/Resource/ABMLoader.c ****         else if (abm_context->abm_palette_bpp == 24)
 3167              	LM328:
 3168 144d 8B450C   		movl	12(%ebp), %eax
 3169 1450 83B83C74 		cmpl	$24, 1537084(%eax)
 3169      170018
 3170 1457 753A     		jne	L202
1888:../../MMI/Resource/ABMLoader.c ****         {
1889:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, color & 0xffff, 16);
 3172              	LM329:
 3173 1459 C7442408 		movl	$16, 8(%esp)
 3173      10000000 
 3174 1461 0FB745D8 		movzwl	-40(%ebp),%eax
 3175 1465 89442404 		movl	%eax, 4(%esp)
 3176 1469 8D45E8   		leal	-24(%ebp), %eax
 3177 146c 890424   		movl	%eax, (%esp)
 3178 146f E89B1500 		call	_ab2_bs_write
 3178      00
1890:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, color >> 16, 8);
 3180              	LM330:
 3181 1474 C7442408 		movl	$8, 8(%esp)
 3181      08000000 
 3182 147c 8B45D8   		movl	-40(%ebp), %eax
 3183 147f C1E810   		shrl	$16, %eax
 3184 1482 89442404 		movl	%eax, 4(%esp)
 3185 1486 8D45E8   		leal	-24(%ebp), %eax
 3186 1489 890424   		movl	%eax, (%esp)
 3187 148c E87E1500 		call	_ab2_bs_write
 3187      00
 3188 1491 EB0C     		jmp	L198
 3189              	L202:
1891:../../MMI/Resource/ABMLoader.c ****         }
1892:../../MMI/Resource/ABMLoader.c ****         else
1893:../../MMI/Resource/ABMLoader.c ****         {
1894:../../MMI/Resource/ABMLoader.c ****             return 0;
 3191              	LM331:
 3192 1493 C745D400 		movl	$0, -44(%ebp)
 3192      000000
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 76


 3193 149a E9480100 		jmp	L195
 3193      00
 3195              	LM332:
 3196              	L198:
 3197 149f 8D45DC   		leal	-36(%ebp), %eax
 3198              	LBE22:
 3199 14a2 FF00     		incl	(%eax)
 3200 14a4 E923FFFF 		jmp	L196
 3200      FF
 3201              	L197:
1895:../../MMI/Resource/ABMLoader.c ****         }
1896:../../MMI/Resource/ABMLoader.c ****     } /* for (i = 0; i < normal_color_cnt; i++) */ 
1897:../../MMI/Resource/ABMLoader.c **** 
1898:../../MMI/Resource/ABMLoader.c ****     /* flush buffer to align to 2-bytes */
1899:../../MMI/Resource/ABMLoader.c ****     ab2_bs_flush(&os);
 3203              	LM333:
 3204 14a9 8D45E8   		leal	-24(%ebp), %eax
 3205 14ac 890424   		movl	%eax, (%esp)
 3206 14af E86EF9FF 		call	_ab2_bs_flush
 3206      FF
1900:../../MMI/Resource/ABMLoader.c **** 
1901:../../MMI/Resource/ABMLoader.c ****     /* align alpha color palette ptr to 4 bytes alignment in palette color format: 8888 */
1902:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_palette_bpp == 24)
 3208              	LM334:
 3209 14b4 8B450C   		movl	12(%ebp), %eax
 3210 14b7 83B83C74 		cmpl	$24, 1537084(%eax)
 3210      170018
 3211 14be 750C     		jne	L204
1903:../../MMI/Resource/ABMLoader.c ****     {
1904:../../MMI/Resource/ABMLoader.c ****         os.mem_ptr = ((U8 *)(((U32)(os.mem_ptr) + 3) & ~0x3));
 3213              	LM335:
 3214 14c0 8B45E8   		movl	-24(%ebp), %eax
 3215 14c3 83C003   		addl	$3, %eax
 3216 14c6 83E0FC   		andl	$-4, %eax
 3217 14c9 8945E8   		movl	%eax, -24(%ebp)
 3218              	L204:
 3219 14cc 90       		nop
1905:../../MMI/Resource/ABMLoader.c ****     }
1906:../../MMI/Resource/ABMLoader.c ****     
1907:../../MMI/Resource/ABMLoader.c ****     for (; i < normal_color_cnt + alpha_color_cnt; i++)
 3221              	LM336:
 3222              	L205:
 3223 14cd 8B45E0   		movl	-32(%ebp), %eax
 3224 14d0 0345E4   		addl	-28(%ebp), %eax
 3225 14d3 3945DC   		cmpl	%eax, -36(%ebp)
 3226 14d6 7205     		jb	L208
 3227 14d8 E9EA0000 		jmp	L206
 3227      00
 3228              	L208:
1908:../../MMI/Resource/ABMLoader.c ****     {
1909:../../MMI/Resource/ABMLoader.c ****         mycolor color = ab2enc_color_preprocess(abm_context->color_idx_tab.color_table[i], abm_cont
 3230              	LM337:
 3231              	LBB23:
 3232 14dd 8B450C   		movl	12(%ebp), %eax
 3233 14e0 89442404 		movl	%eax, 4(%esp)
 3234 14e4 8B550C   		movl	12(%ebp), %edx
 3235 14e7 8B45DC   		movl	-36(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 77


 3236 14ea 8B848234 		movl	1076(%edx,%eax,4), %eax
 3236      040000
 3237 14f1 890424   		movl	%eax, (%esp)
 3238 14f4 E867F9FF 		call	_ab2enc_color_preprocess
 3238      FF
 3239 14f9 8945D8   		movl	%eax, -40(%ebp)
1910:../../MMI/Resource/ABMLoader.c ****         
1911:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_palette_bpp == 16)
 3241              	LM338:
 3242 14fc 8B450C   		movl	12(%ebp), %eax
 3243 14ff 83B83C74 		cmpl	$16, 1537084(%eax)
 3243      170010
 3244 1506 7566     		jne	L209
1912:../../MMI/Resource/ABMLoader.c ****         {   
1913:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, ARGB8888_TO_RGB16(color), 16);
 3246              	LM339:
 3247 1508 C7442408 		movl	$16, 8(%esp)
 3247      10000000 
 3248 1510 8B45D8   		movl	-40(%ebp), %eax
 3249 1513 C1E008   		sall	$8, %eax
 3250 1516 C1E818   		shrl	$24, %eax
 3251 1519 C1E803   		shrl	$3, %eax
 3252 151c 89C2     		movl	%eax, %edx
 3253 151e C1E20B   		sall	$11, %edx
 3254 1521 8B45D8   		movl	-40(%ebp), %eax
 3255 1524 C1E010   		sall	$16, %eax
 3256 1527 C1E818   		shrl	$24, %eax
 3257 152a C1E802   		shrl	$2, %eax
 3258 152d C1E005   		sall	$5, %eax
 3259 1530 09C2     		orl	%eax, %edx
 3260 1532 8B45D8   		movl	-40(%ebp), %eax
 3261 1535 C1E018   		sall	$24, %eax
 3262 1538 C1E818   		shrl	$24, %eax
 3263 153b C1E803   		shrl	$3, %eax
 3264 153e 09D0     		orl	%edx, %eax
 3265 1540 89442404 		movl	%eax, 4(%esp)
 3266 1544 8D45E8   		leal	-24(%ebp), %eax
 3267 1547 890424   		movl	%eax, (%esp)
 3268 154a E8C01400 		call	_ab2_bs_write
 3268      00
1914:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, A_OF_ARGB8888(color), 8);
 3270              	LM340:
 3271 154f C7442408 		movl	$8, 8(%esp)
 3271      08000000 
 3272 1557 8B45D8   		movl	-40(%ebp), %eax
 3273 155a C1E818   		shrl	$24, %eax
 3274 155d 89442404 		movl	%eax, 4(%esp)
 3275 1561 8D45E8   		leal	-24(%ebp), %eax
 3276 1564 890424   		movl	%eax, (%esp)
 3277 1567 E8A31400 		call	_ab2_bs_write
 3277      00
 3278 156c EB4F     		jmp	L207
 3279              	L209:
1915:../../MMI/Resource/ABMLoader.c ****         }
1916:../../MMI/Resource/ABMLoader.c ****         else if (abm_context->abm_palette_bpp == 24)
 3281              	LM341:
 3282 156e 8B450C   		movl	12(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 78


 3283 1571 83B83C74 		cmpl	$24, 1537084(%eax)
 3283      170018
 3284 1578 753A     		jne	L211
1917:../../MMI/Resource/ABMLoader.c ****         {
1918:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, color & 0xffff, 16);
 3286              	LM342:
 3287 157a C7442408 		movl	$16, 8(%esp)
 3287      10000000 
 3288 1582 0FB745D8 		movzwl	-40(%ebp),%eax
 3289 1586 89442404 		movl	%eax, 4(%esp)
 3290 158a 8D45E8   		leal	-24(%ebp), %eax
 3291 158d 890424   		movl	%eax, (%esp)
 3292 1590 E87A1400 		call	_ab2_bs_write
 3292      00
1919:../../MMI/Resource/ABMLoader.c ****             ab2_bs_write(&os, color >> 16, 16);
 3294              	LM343:
 3295 1595 C7442408 		movl	$16, 8(%esp)
 3295      10000000 
 3296 159d 8B45D8   		movl	-40(%ebp), %eax
 3297 15a0 C1E810   		shrl	$16, %eax
 3298 15a3 89442404 		movl	%eax, 4(%esp)
 3299 15a7 8D45E8   		leal	-24(%ebp), %eax
 3300 15aa 890424   		movl	%eax, (%esp)
 3301 15ad E85D1400 		call	_ab2_bs_write
 3301      00
 3302 15b2 EB09     		jmp	L207
 3303              	L211:
1920:../../MMI/Resource/ABMLoader.c ****         }
1921:../../MMI/Resource/ABMLoader.c ****         else
1922:../../MMI/Resource/ABMLoader.c ****         {
1923:../../MMI/Resource/ABMLoader.c ****             return 0;
 3305              	LM344:
 3306 15b4 C745D400 		movl	$0, -44(%ebp)
 3306      000000
 3307 15bb EB2A     		jmp	L195
 3309              	LM345:
 3310              	L207:
 3311 15bd 8D45DC   		leal	-36(%ebp), %eax
 3312              	LBE23:
 3313 15c0 FF00     		incl	(%eax)
 3314 15c2 E906FFFF 		jmp	L205
 3314      FF
 3315              	L206:
1924:../../MMI/Resource/ABMLoader.c ****         }
1925:../../MMI/Resource/ABMLoader.c ****     } /* for (; i < normal_color_cnt + alpha_color_cnt; i++) */
1926:../../MMI/Resource/ABMLoader.c ****     
1927:../../MMI/Resource/ABMLoader.c ****     /* align to 2-bytes */
1928:../../MMI/Resource/ABMLoader.c ****     ab2_bs_flush(&os);
 3317              	LM346:
 3318 15c7 8D45E8   		leal	-24(%ebp), %eax
 3319 15ca 890424   		movl	%eax, (%esp)
 3320 15cd E850F8FF 		call	_ab2_bs_flush
 3320      FF
1929:../../MMI/Resource/ABMLoader.c **** 
1930:../../MMI/Resource/ABMLoader.c ****     return ab2_bs_offset(&os, mem_ptr);
 3322              	LM347:
 3323 15d2 8B4508   		movl	8(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 79


 3324 15d5 89442404 		movl	%eax, 4(%esp)
 3325 15d9 8D45E8   		leal	-24(%ebp), %eax
 3326 15dc 890424   		movl	%eax, (%esp)
 3327 15df E89C1400 		call	_ab2_bs_offset
 3327      00
 3328 15e4 8945D4   		movl	%eax, -44(%ebp)
1931:../../MMI/Resource/ABMLoader.c **** }
 3330              	LM348:
 3331              	L195:
 3332              	LBE21:
 3333 15e7 8B45D4   		movl	-44(%ebp), %eax
 3334 15ea C9       		leave
 3335 15eb C3       		ret
 3348              	Lscope20:
 3354              	_ab2enc_rle_encode_body:
1932:../../MMI/Resource/ABMLoader.c **** 
1933:../../MMI/Resource/ABMLoader.c **** 
1934:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
1935:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
1936:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_rle_encode_body
1937:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
1938:../../MMI/Resource/ABMLoader.c ****  *  Encode body of ABM v2 image by RLE
1939:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
1940:../../MMI/Resource/ABMLoader.c ****  *  mem_ptr         [OUT]    buffer to write header
1941:../../MMI/Resource/ABMLoader.c ****  * RETURNS
1942:../../MMI/Resource/ABMLoader.c ****  *  Return the bytes written. If error, it will return 0
1943:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
1944:../../MMI/Resource/ABMLoader.c **** static U32 ab2enc_rle_encode_body(U8 *mem_ptr, ABM_Context * abm_context)
1945:../../MMI/Resource/ABMLoader.c **** {
 3356              	LM349:
 3357 15ec 55       		pushl	%ebp
 3358 15ed 89E5     		movl	%esp, %ebp
 3359 15ef 81EC9800 		subl	$152, %esp
 3359      0000
1946:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1947:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
1948:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1949:../../MMI/Resource/ABMLoader.c ****     ab2_bs_struct os;
1950:../../MMI/Resource/ABMLoader.c ****     
1951:../../MMI/Resource/ABMLoader.c ****     U32 total_color_cnt;
1952:../../MMI/Resource/ABMLoader.c ****     U32 color_idx_bits;
1953:../../MMI/Resource/ABMLoader.c ****     U32 min_repeat_cnt;
1954:../../MMI/Resource/ABMLoader.c ****     
1955:../../MMI/Resource/ABMLoader.c ****     U32 last_color_idx;
1956:../../MMI/Resource/ABMLoader.c ****     U32 counter;
1957:../../MMI/Resource/ABMLoader.c ****     
1958:../../MMI/Resource/ABMLoader.c ****     U32 x0 = abm_context->abm_enc.x1;
 3361              	LM350:
 3362              	LBB24:
 3363 15f5 8B450C   		movl	12(%ebp), %eax
 3364 15f8 8B801804 		movl	1048(%eax), %eax
 3364      0000
 3365 15fe 8945D0   		movl	%eax, -48(%ebp)
1959:../../MMI/Resource/ABMLoader.c ****     U32 y0 = abm_context->abm_enc.y1;
 3367              	LM351:
 3368 1601 8B450C   		movl	12(%ebp), %eax
 3369 1604 8B801C04 		movl	1052(%eax), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 80


 3369      0000
 3370 160a 8945CC   		movl	%eax, -52(%ebp)
1960:../../MMI/Resource/ABMLoader.c ****     U32 x1 = abm_context->abm_enc.x2;
 3372              	LM352:
 3373 160d 8B450C   		movl	12(%ebp), %eax
 3374 1610 8B802004 		movl	1056(%eax), %eax
 3374      0000
 3375 1616 8945C8   		movl	%eax, -56(%ebp)
1961:../../MMI/Resource/ABMLoader.c ****     U32 y1 = abm_context->abm_enc.y2;
 3377              	LM353:
 3378 1619 8B450C   		movl	12(%ebp), %eax
 3379 161c 8B802404 		movl	1060(%eax), %eax
 3379      0000
 3380 1622 8945C4   		movl	%eax, -60(%ebp)
1962:../../MMI/Resource/ABMLoader.c ****     
1963:../../MMI/Resource/ABMLoader.c ****     U32 discount_start_x, discount_start_y;
1964:../../MMI/Resource/ABMLoader.c ****     U32 discount_sure;
1965:../../MMI/Resource/ABMLoader.c ****     U32 discount_cnt;
1966:../../MMI/Resource/ABMLoader.c **** 
1967:../../MMI/Resource/ABMLoader.c ****     U32 i, j;
1968:../../MMI/Resource/ABMLoader.c **** 
1969:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1970:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
1971:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
1972:../../MMI/Resource/ABMLoader.c ****     
1973:../../MMI/Resource/ABMLoader.c ****     /*
1974:../../MMI/Resource/ABMLoader.c ****      * prepare encoded data
1975:../../MMI/Resource/ABMLoader.c ****      */
1976:../../MMI/Resource/ABMLoader.c ****     ab2_bs_init(&os, mem_ptr);
 3382              	LM354:
 3383 1625 8B4508   		movl	8(%ebp), %eax
 3384 1628 89442404 		movl	%eax, 4(%esp)
 3385 162c 8D45E8   		leal	-24(%ebp), %eax
 3386 162f 890424   		movl	%eax, (%esp)
 3387 1632 E8B71300 		call	_ab2_bs_init
 3387      00
1977:../../MMI/Resource/ABMLoader.c **** 
1978:../../MMI/Resource/ABMLoader.c ****     /* 1 for transparent color */
1979:../../MMI/Resource/ABMLoader.c ****     /* caculate the color index bits and the threshole of repeat number*/
1980:../../MMI/Resource/ABMLoader.c ****     total_color_cnt = abm_context->color_idx_tab.color_num + 1;
 3389              	LM355:
 3390 1637 8B450C   		movl	12(%ebp), %eax
 3391 163a 8B803474 		movl	1537076(%eax), %eax
 3391      1700
 3392 1640 40       		incl	%eax
 3393 1641 8945E4   		movl	%eax, -28(%ebp)
1981:../../MMI/Resource/ABMLoader.c ****     color_idx_bits  = log2_ceiling(total_color_cnt);
 3395              	LM356:
 3396 1644 8B45E4   		movl	-28(%ebp), %eax
 3397 1647 890424   		movl	%eax, (%esp)
 3398 164a E89FF7FF 		call	_log2_ceiling
 3398      FF
 3399 164f 8945E0   		movl	%eax, -32(%ebp)
1982:../../MMI/Resource/ABMLoader.c ****     min_repeat_cnt  = 1 + ((8 + (color_idx_bits - 1)) / color_idx_bits);
 3401              	LM357:
 3402 1652 8B55E0   		movl	-32(%ebp), %edx
 3403 1655 83C207   		addl	$7, %edx
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 81


 3404 1658 8D45E0   		leal	-32(%ebp), %eax
 3405 165b 894594   		movl	%eax, -108(%ebp)
 3406 165e 89D0     		movl	%edx, %eax
 3407 1660 8B4D94   		movl	-108(%ebp), %ecx
 3408 1663 BA000000 		movl	$0, %edx
 3408      00
 3409 1668 F731     		divl	(%ecx)
 3410 166a 894594   		movl	%eax, -108(%ebp)
 3411 166d 8B4594   		movl	-108(%ebp), %eax
 3412 1670 40       		incl	%eax
 3413 1671 8945DC   		movl	%eax, -36(%ebp)
1983:../../MMI/Resource/ABMLoader.c **** 
1984:../../MMI/Resource/ABMLoader.c ****     /*
1985:../../MMI/Resource/ABMLoader.c ****      * start to encode RLE body
1986:../../MMI/Resource/ABMLoader.c ****      */
1987:../../MMI/Resource/ABMLoader.c ****     last_color_idx = GDI_IMAGE_AB2_INVALID_COLOR_IDX;
 3415              	LM358:
 3416 1674 C745D8FF 		movl	$65535, -40(%ebp)
 3416      FF0000
1988:../../MMI/Resource/ABMLoader.c ****     counter = 0;
 3418              	LM359:
 3419 167b C745D400 		movl	$0, -44(%ebp)
 3419      000000
1989:../../MMI/Resource/ABMLoader.c **** 
1990:../../MMI/Resource/ABMLoader.c ****     discount_start_x    = x0;
 3421              	LM360:
 3422 1682 8B45D0   		movl	-48(%ebp), %eax
 3423 1685 8945C0   		movl	%eax, -64(%ebp)
1991:../../MMI/Resource/ABMLoader.c ****     discount_start_y    = y0;
 3425              	LM361:
 3426 1688 8B45CC   		movl	-52(%ebp), %eax
 3427 168b 8945BC   		movl	%eax, -68(%ebp)
1992:../../MMI/Resource/ABMLoader.c ****     discount_sure       = 0;
 3429              	LM362:
 3430 168e C745B800 		movl	$0, -72(%ebp)
 3430      000000
1993:../../MMI/Resource/ABMLoader.c ****     discount_cnt        = 0;
 3432              	LM363:
 3433 1695 C745B400 		movl	$0, -76(%ebp)
 3433      000000
1994:../../MMI/Resource/ABMLoader.c **** 
1995:../../MMI/Resource/ABMLoader.c ****     /* for all image pixels */
1996:../../MMI/Resource/ABMLoader.c ****     for (j = y0; j <= y1; j++)
 3435              	LM364:
 3436 169c 8B45CC   		movl	-52(%ebp), %eax
 3437 169f 8945AC   		movl	%eax, -84(%ebp)
 3438              	L214:
 3439 16a2 8B45AC   		movl	-84(%ebp), %eax
 3440 16a5 3B45C4   		cmpl	-60(%ebp), %eax
 3441 16a8 7605     		jbe	L217
 3442 16aa E9480100 		jmp	L215
 3442      00
 3443              	L217:
1997:../../MMI/Resource/ABMLoader.c ****     {
1998:../../MMI/Resource/ABMLoader.c ****         for (i = x0; i <= x1; i++)
 3445              	LM365:
 3446 16af 8B45D0   		movl	-48(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 82


 3447 16b2 8945B0   		movl	%eax, -80(%ebp)
 3448              	L218:
 3449 16b5 8B45B0   		movl	-80(%ebp), %eax
 3450 16b8 3B45C8   		cmpl	-56(%ebp), %eax
 3451 16bb 7605     		jbe	L221
 3452 16bd E92B0100 		jmp	L216
 3452      00
 3453              	L221:
1999:../../MMI/Resource/ABMLoader.c ****         {
2000:../../MMI/Resource/ABMLoader.c ****             U32 color_idx = ab2enc_get_img_color_idx(i, j, abm_context);
 3455              	LM366:
 3456              	LBB25:
 3457 16c2 8B450C   		movl	12(%ebp), %eax
 3458 16c5 89442408 		movl	%eax, 8(%esp)
 3459 16c9 8B45AC   		movl	-84(%ebp), %eax
 3460 16cc 89442404 		movl	%eax, 4(%esp)
 3461 16d0 8B45B0   		movl	-80(%ebp), %eax
 3462 16d3 890424   		movl	%eax, (%esp)
 3463 16d6 E8B41300 		call	_ab2enc_get_img_color_idx
 3463      00
 3464 16db 8945A8   		movl	%eax, -88(%ebp)
2001:../../MMI/Resource/ABMLoader.c ****             if (color_idx != last_color_idx)
 3466              	LM367:
 3467 16de 8B45A8   		movl	-88(%ebp), %eax
 3468 16e1 3B45D8   		cmpl	-40(%ebp), %eax
 3469 16e4 0F84F400 		je	L222
 3469      0000
2002:../../MMI/Resource/ABMLoader.c ****             {
2003:../../MMI/Resource/ABMLoader.c ****                 /* discontinue at current position */
2004:../../MMI/Resource/ABMLoader.c ****                 if (counter < min_repeat_cnt)
 3471              	LM368:
 3472 16ea 8B45D4   		movl	-44(%ebp), %eax
 3473 16ed 3B45DC   		cmpl	-36(%ebp), %eax
 3474 16f0 731A     		jae	L223
2005:../../MMI/Resource/ABMLoader.c ****                 {
2006:../../MMI/Resource/ABMLoader.c ****                     /* repeat pixels is less than threshole, 
2007:../../MMI/Resource/ABMLoader.c ****                      * counted into discountinue pixels */
2008:../../MMI/Resource/ABMLoader.c ****                     discount_sure = (discount_cnt != 0);
 3476              	LM369:
 3477 16f2 837DB400 		cmpl	$0, -76(%ebp)
 3478 16f6 0F95C0   		setne	%al
 3479 16f9 0FB6C0   		movzbl	%al, %eax
 3480 16fc 8945B8   		movl	%eax, -72(%ebp)
2009:../../MMI/Resource/ABMLoader.c ****                     discount_cnt += counter;
 3482              	LM370:
 3483 16ff 8B55D4   		movl	-44(%ebp), %edx
 3484 1702 8D45B4   		leal	-76(%ebp), %eax
 3485 1705 0110     		addl	%edx, (%eax)
 3486 1707 E9C30000 		jmp	L224
 3486      00
 3487              	L223:
2010:../../MMI/Resource/ABMLoader.c ****                 }
2011:../../MMI/Resource/ABMLoader.c ****                 else
2012:../../MMI/Resource/ABMLoader.c ****                 {
2013:../../MMI/Resource/ABMLoader.c ****                     /* output discount pixels if needed */
2014:../../MMI/Resource/ABMLoader.c ****                     if (discount_cnt > 0)
 3489              	LM371:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 83


 3490 170c 837DB400 		cmpl	$0, -76(%ebp)
 3491 1710 0F848000 		je	L225
 3491      0000
2015:../../MMI/Resource/ABMLoader.c ****                     {
2016:../../MMI/Resource/ABMLoader.c ****                         if (discount_sure)
 3493              	LM372:
 3494 1716 837DB800 		cmpl	$0, -72(%ebp)
 3495 171a 7430     		je	L226
2017:../../MMI/Resource/ABMLoader.c ****                         {
2018:../../MMI/Resource/ABMLoader.c ****                             ab2_encode_rle_discount_code(
 3497              	LM373:
 3498 171c 8B450C   		movl	12(%ebp), %eax
 3499 171f 89442414 		movl	%eax, 20(%esp)
 3500 1723 8B45B4   		movl	-76(%ebp), %eax
 3501 1726 89442410 		movl	%eax, 16(%esp)
 3502 172a 8B45E0   		movl	-32(%ebp), %eax
 3503 172d 8944240C 		movl	%eax, 12(%esp)
 3504 1731 8B45BC   		movl	-68(%ebp), %eax
 3505 1734 89442408 		movl	%eax, 8(%esp)
 3506 1738 8B45C0   		movl	-64(%ebp), %eax
 3507 173b 89442404 		movl	%eax, 4(%esp)
 3508 173f 8D45E8   		leal	-24(%ebp), %eax
 3509 1742 890424   		movl	%eax, (%esp)
 3510 1745 E849F9FF 		call	_ab2_encode_rle_discount_code
 3510      FF
 3511 174a EB3C     		jmp	L227
 3512              	L226:
2019:../../MMI/Resource/ABMLoader.c ****                                 &os, 
2020:../../MMI/Resource/ABMLoader.c ****                                 discount_start_x,
2021:../../MMI/Resource/ABMLoader.c ****                                 discount_start_y,
2022:../../MMI/Resource/ABMLoader.c ****                                 color_idx_bits,
2023:../../MMI/Resource/ABMLoader.c ****                                 discount_cnt,
2024:../../MMI/Resource/ABMLoader.c ****                                 abm_context);
2025:../../MMI/Resource/ABMLoader.c ****                         }
2026:../../MMI/Resource/ABMLoader.c ****                         else
2027:../../MMI/Resource/ABMLoader.c ****                         {
2028:../../MMI/Resource/ABMLoader.c ****                             U32 iscount_color_index = 
 3514              	LM374:
 3515              	LBB26:
 3516 174c 8B450C   		movl	12(%ebp), %eax
 3517 174f 89442408 		movl	%eax, 8(%esp)
 3518 1753 8B45BC   		movl	-68(%ebp), %eax
 3519 1756 89442404 		movl	%eax, 4(%esp)
 3520 175a 8B45C0   		movl	-64(%ebp), %eax
 3521 175d 890424   		movl	%eax, (%esp)
 3522 1760 E82A1300 		call	_ab2enc_get_img_color_idx
 3522      00
 3523 1765 8945A4   		movl	%eax, -92(%ebp)
2029:../../MMI/Resource/ABMLoader.c ****                                 ab2enc_get_img_color_idx(
2030:../../MMI/Resource/ABMLoader.c ****                                     discount_start_x, 
2031:../../MMI/Resource/ABMLoader.c ****                                     discount_start_y,
2032:../../MMI/Resource/ABMLoader.c ****                                     abm_context);
2033:../../MMI/Resource/ABMLoader.c ****                             ab2_encode_rle_repeat_code(
 3525              	LM375:
 3526 1768 8B45B4   		movl	-76(%ebp), %eax
 3527 176b 8944240C 		movl	%eax, 12(%esp)
 3528 176f 8B45E0   		movl	-32(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 84


 3529 1772 89442408 		movl	%eax, 8(%esp)
 3530 1776 8B45A4   		movl	-92(%ebp), %eax
 3531 1779 89442404 		movl	%eax, 4(%esp)
 3532 177d 8D45E8   		leal	-24(%ebp), %eax
 3533 1780 890424   		movl	%eax, (%esp)
 3534 1783 E87AF8FF 		call	_ab2_encode_rle_repeat_code
 3534      FF
 3535              	L227:
2034:../../MMI/Resource/ABMLoader.c ****                                 &os, 
2035:../../MMI/Resource/ABMLoader.c ****                                 iscount_color_index,
2036:../../MMI/Resource/ABMLoader.c ****                                 color_idx_bits,
2037:../../MMI/Resource/ABMLoader.c ****                                 discount_cnt);
2038:../../MMI/Resource/ABMLoader.c ****                         }
2039:../../MMI/Resource/ABMLoader.c **** 
2040:../../MMI/Resource/ABMLoader.c ****                         discount_sure   = 0;
 3537              	LM376:
 3538              	LBE26:
 3539 1788 C745B800 		movl	$0, -72(%ebp)
 3539      000000
2041:../../MMI/Resource/ABMLoader.c ****                         discount_cnt    = 0;
 3541              	LM377:
 3542 178f C745B400 		movl	$0, -76(%ebp)
 3542      000000
 3543              	L225:
2042:../../MMI/Resource/ABMLoader.c ****                     }
2043:../../MMI/Resource/ABMLoader.c **** 
2044:../../MMI/Resource/ABMLoader.c ****                     /* output repeat pixels if needed */
2045:../../MMI/Resource/ABMLoader.c ****                     if (counter > 0)
 3545              	LM378:
 3546 1796 837DD400 		cmpl	$0, -44(%ebp)
 3547 179a 7427     		je	L228
2046:../../MMI/Resource/ABMLoader.c ****                     {
2047:../../MMI/Resource/ABMLoader.c ****                         ab2_encode_rle_repeat_code(
 3549              	LM379:
 3550 179c 8B45D4   		movl	-44(%ebp), %eax
 3551 179f 8944240C 		movl	%eax, 12(%esp)
 3552 17a3 8B45E0   		movl	-32(%ebp), %eax
 3553 17a6 89442408 		movl	%eax, 8(%esp)
 3554 17aa 8B45D8   		movl	-40(%ebp), %eax
 3555 17ad 89442404 		movl	%eax, 4(%esp)
 3556 17b1 8D45E8   		leal	-24(%ebp), %eax
 3557 17b4 890424   		movl	%eax, (%esp)
 3558 17b7 E846F8FF 		call	_ab2_encode_rle_repeat_code
 3558      FF
2048:../../MMI/Resource/ABMLoader.c ****                             &os,
2049:../../MMI/Resource/ABMLoader.c ****                             last_color_idx,
2050:../../MMI/Resource/ABMLoader.c ****                             color_idx_bits,
2051:../../MMI/Resource/ABMLoader.c ****                             counter);
2052:../../MMI/Resource/ABMLoader.c **** 
2053:../../MMI/Resource/ABMLoader.c ****                         counter = 0;
 3560              	LM380:
 3561 17bc C745D400 		movl	$0, -44(%ebp)
 3561      000000
 3562              	L228:
2054:../../MMI/Resource/ABMLoader.c ****                     }
2055:../../MMI/Resource/ABMLoader.c **** 
2056:../../MMI/Resource/ABMLoader.c ****                     discount_start_x = i;
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 85


 3564              	LM381:
 3565 17c3 8B45B0   		movl	-80(%ebp), %eax
 3566 17c6 8945C0   		movl	%eax, -64(%ebp)
2057:../../MMI/Resource/ABMLoader.c ****                     discount_start_y = j;
 3568              	LM382:
 3569 17c9 8B45AC   		movl	-84(%ebp), %eax
 3570 17cc 8945BC   		movl	%eax, -68(%ebp)
 3571              	L224:
2058:../../MMI/Resource/ABMLoader.c ****                 }
2059:../../MMI/Resource/ABMLoader.c **** 
2060:../../MMI/Resource/ABMLoader.c ****                 last_color_idx = color_idx;
 3573              	LM383:
 3574 17cf 8B45A8   		movl	-88(%ebp), %eax
 3575 17d2 8945D8   		movl	%eax, -40(%ebp)
2061:../../MMI/Resource/ABMLoader.c ****                 counter = 1;
 3577              	LM384:
 3578 17d5 C745D401 		movl	$1, -44(%ebp)
 3578      000000
 3579 17dc EB05     		jmp	L220
 3580              	L222:
2062:../../MMI/Resource/ABMLoader.c ****             }
2063:../../MMI/Resource/ABMLoader.c ****             else
2064:../../MMI/Resource/ABMLoader.c ****             {
2065:../../MMI/Resource/ABMLoader.c ****                 /* same as previous pixel color */
2066:../../MMI/Resource/ABMLoader.c ****                 counter++;
 3582              	LM385:
 3583 17de 8D45D4   		leal	-44(%ebp), %eax
 3584 17e1 FF00     		incl	(%eax)
 3586              	LM386:
 3587              	L220:
 3588 17e3 8D45B0   		leal	-80(%ebp), %eax
 3589              	LBE25:
 3590 17e6 FF00     		incl	(%eax)
 3591 17e8 E9C8FEFF 		jmp	L218
 3591      FF
 3593              	LM387:
 3594              	L216:
 3595 17ed 8D45AC   		leal	-84(%ebp), %eax
 3596 17f0 FF00     		incl	(%eax)
 3597 17f2 E9ABFEFF 		jmp	L214
 3597      FF
 3598              	L215:
2067:../../MMI/Resource/ABMLoader.c ****             }
2068:../../MMI/Resource/ABMLoader.c ****         } /* for (i = x0; i <= x1; i++) */
2069:../../MMI/Resource/ABMLoader.c ****     } /* for(j = y0; j <= y1; j++) */
2070:../../MMI/Resource/ABMLoader.c **** 
2071:../../MMI/Resource/ABMLoader.c ****     /*
2072:../../MMI/Resource/ABMLoader.c ****      * Send the retail data
2073:../../MMI/Resource/ABMLoader.c ****      */
2074:../../MMI/Resource/ABMLoader.c ****     if (discount_cnt > 0)
 3600              	LM388:
 3601 17f7 837DB400 		cmpl	$0, -76(%ebp)
 3602 17fb 7445     		je	L230
2075:../../MMI/Resource/ABMLoader.c ****     {
2076:../../MMI/Resource/ABMLoader.c ****         if (counter < min_repeat_cnt)
 3604              	LM389:
 3605 17fd 8B45D4   		movl	-44(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 86


 3606 1800 3B45DC   		cmpl	-36(%ebp), %eax
 3607 1803 730F     		jae	L231
2077:../../MMI/Resource/ABMLoader.c ****         {
2078:../../MMI/Resource/ABMLoader.c ****             discount_cnt += counter;
 3609              	LM390:
 3610 1805 8B55D4   		movl	-44(%ebp), %edx
 3611 1808 8D45B4   		leal	-76(%ebp), %eax
 3612 180b 0110     		addl	%edx, (%eax)
2079:../../MMI/Resource/ABMLoader.c ****             counter = 0;
 3614              	LM391:
 3615 180d C745D400 		movl	$0, -44(%ebp)
 3615      000000
 3616              	L231:
2080:../../MMI/Resource/ABMLoader.c ****         }
2081:../../MMI/Resource/ABMLoader.c ****         
2082:../../MMI/Resource/ABMLoader.c ****         ab2_encode_rle_discount_code(
 3618              	LM392:
 3619 1814 8B450C   		movl	12(%ebp), %eax
 3620 1817 89442414 		movl	%eax, 20(%esp)
 3621 181b 8B45B4   		movl	-76(%ebp), %eax
 3622 181e 89442410 		movl	%eax, 16(%esp)
 3623 1822 8B45E0   		movl	-32(%ebp), %eax
 3624 1825 8944240C 		movl	%eax, 12(%esp)
 3625 1829 8B45BC   		movl	-68(%ebp), %eax
 3626 182c 89442408 		movl	%eax, 8(%esp)
 3627 1830 8B45C0   		movl	-64(%ebp), %eax
 3628 1833 89442404 		movl	%eax, 4(%esp)
 3629 1837 8D45E8   		leal	-24(%ebp), %eax
 3630 183a 890424   		movl	%eax, (%esp)
 3631 183d E851F8FF 		call	_ab2_encode_rle_discount_code
 3631      FF
 3632              	L230:
2083:../../MMI/Resource/ABMLoader.c ****             &os,
2084:../../MMI/Resource/ABMLoader.c ****             discount_start_x,
2085:../../MMI/Resource/ABMLoader.c ****             discount_start_y,
2086:../../MMI/Resource/ABMLoader.c ****             color_idx_bits,
2087:../../MMI/Resource/ABMLoader.c ****             discount_cnt,
2088:../../MMI/Resource/ABMLoader.c ****             abm_context);
2089:../../MMI/Resource/ABMLoader.c ****     }
2090:../../MMI/Resource/ABMLoader.c **** 
2091:../../MMI/Resource/ABMLoader.c ****     if (counter > 0)
 3634              	LM393:
 3635 1842 837DD400 		cmpl	$0, -44(%ebp)
 3636 1846 7420     		je	L232
2092:../../MMI/Resource/ABMLoader.c ****     {
2093:../../MMI/Resource/ABMLoader.c ****         ab2_encode_rle_repeat_code(
 3638              	LM394:
 3639 1848 8B45D4   		movl	-44(%ebp), %eax
 3640 184b 8944240C 		movl	%eax, 12(%esp)
 3641 184f 8B45E0   		movl	-32(%ebp), %eax
 3642 1852 89442408 		movl	%eax, 8(%esp)
 3643 1856 8B45D8   		movl	-40(%ebp), %eax
 3644 1859 89442404 		movl	%eax, 4(%esp)
 3645 185d 8D45E8   		leal	-24(%ebp), %eax
 3646 1860 890424   		movl	%eax, (%esp)
 3647 1863 E89AF7FF 		call	_ab2_encode_rle_repeat_code
 3647      FF
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 87


 3648              	L232:
2094:../../MMI/Resource/ABMLoader.c ****             &os,
2095:../../MMI/Resource/ABMLoader.c ****             last_color_idx,
2096:../../MMI/Resource/ABMLoader.c ****             color_idx_bits,
2097:../../MMI/Resource/ABMLoader.c ****             counter);
2098:../../MMI/Resource/ABMLoader.c ****     }
2099:../../MMI/Resource/ABMLoader.c **** 
2100:../../MMI/Resource/ABMLoader.c ****     /* flush all data of bitstream */
2101:../../MMI/Resource/ABMLoader.c ****     ab2_bs_flush(&os);
 3650              	LM395:
 3651 1868 8D45E8   		leal	-24(%ebp), %eax
 3652 186b 890424   		movl	%eax, (%esp)
 3653 186e E8AFF5FF 		call	_ab2_bs_flush
 3653      FF
2102:../../MMI/Resource/ABMLoader.c **** 
2103:../../MMI/Resource/ABMLoader.c ****     return ab2_bs_offset(&os, mem_ptr);
 3655              	LM396:
 3656 1873 8B4508   		movl	8(%ebp), %eax
 3657 1876 89442404 		movl	%eax, 4(%esp)
 3658 187a 8D45E8   		leal	-24(%ebp), %eax
 3659 187d 890424   		movl	%eax, (%esp)
 3660 1880 E8FB1100 		call	_ab2_bs_offset
 3660      00
2104:../../MMI/Resource/ABMLoader.c **** }
 3662              	LM397:
 3663 1885 C9       		leave
 3664 1886 C3       		ret
 3665              	LBE24:
 3690              	Lscope21:
 3696              	_ab2enc_encode:
2105:../../MMI/Resource/ABMLoader.c **** 
2106:../../MMI/Resource/ABMLoader.c **** 
2107:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
2108:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
2109:../../MMI/Resource/ABMLoader.c ****  *  ab2enc_encode
2110:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
2111:../../MMI/Resource/ABMLoader.c ****  *  ABM v2 encoder main routine.
2112:../../MMI/Resource/ABMLoader.c ****  *  Must prepare the image data and color table by calling 
2113:../../MMI/Resource/ABMLoader.c ****  *  abmenc_build_color_index_table() before.
2114:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
2115:../../MMI/Resource/ABMLoader.c ****  *  out_mem_p       [OUT] output memory pointer
2116:../../MMI/Resource/ABMLoader.c ****  * RETURNS
2117:../../MMI/Resource/ABMLoader.c ****  *  Total ABMv2 data size. If error, it will return 0xffffffff.
2118:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
2119:../../MMI/Resource/ABMLoader.c **** static U32 ab2enc_encode(U8* out_mem_p, ABM_Context * abm_context)
2120:../../MMI/Resource/ABMLoader.c **** {
 3698              	LM398:
 3699 1887 55       		pushl	%ebp
 3700 1888 89E5     		movl	%esp, %ebp
 3701 188a 83EC28   		subl	$40, %esp
2121:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2122:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
2123:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2124:../../MMI/Resource/ABMLoader.c ****     U32 ab2_header_size = 0;
 3703              	LM399:
 3704              	LBB27:
 3705 188d C745FC00 		movl	$0, -4(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 88


 3705      000000
2125:../../MMI/Resource/ABMLoader.c ****     U32 rle_header_size = 0;
 3707              	LM400:
 3708 1894 C745F800 		movl	$0, -8(%ebp)
 3708      000000
2126:../../MMI/Resource/ABMLoader.c ****     U32 rle_body_size   = 0;
 3710              	LM401:
 3711 189b C745F400 		movl	$0, -12(%ebp)
 3711      000000
2127:../../MMI/Resource/ABMLoader.c ****     U32 ab2_total_size  = 0;
 3713              	LM402:
 3714 18a2 C745F000 		movl	$0, -16(%ebp)
 3714      000000
2128:../../MMI/Resource/ABMLoader.c ****     
2129:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2130:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
2131:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2132:../../MMI/Resource/ABMLoader.c **** 
2133:../../MMI/Resource/ABMLoader.c ****     /* out of ABM limit, return a large size to prevent choosing ABM */
2134:../../MMI/Resource/ABMLoader.c ****     if (abm_context->color_idx_tab.color_num >= ABM_MAX_COLOR_NUM)
 3716              	LM403:
 3717 18a9 8B450C   		movl	12(%ebp), %eax
 3718 18ac 81B83474 		cmpl	$383999, 1537076(%eax)
 3718      1700FFDB 
 3718      0500
 3719 18b6 7E0C     		jle	L234
2135:../../MMI/Resource/ABMLoader.c ****     {
2136:../../MMI/Resource/ABMLoader.c ****         return 0xffffffff;
 3721              	LM404:
 3722 18b8 C745ECFF 		movl	$-1, -20(%ebp)
 3722      FFFFFF
 3723 18bf E9900000 		jmp	L233
 3723      00
 3724              	L234:
2137:../../MMI/Resource/ABMLoader.c ****     }
2138:../../MMI/Resource/ABMLoader.c **** 
2139:../../MMI/Resource/ABMLoader.c ****     /* write header */
2140:../../MMI/Resource/ABMLoader.c ****     ab2_header_size = ab2enc_encode_header(out_mem_p, abm_context);
 3726              	LM405:
 3727 18c4 8B450C   		movl	12(%ebp), %eax
 3728 18c7 89442404 		movl	%eax, 4(%esp)
 3729 18cb 8B4508   		movl	8(%ebp), %eax
 3730 18ce 890424   		movl	%eax, (%esp)
 3731 18d1 E80CF9FF 		call	_ab2enc_encode_header
 3731      FF
 3732 18d6 8945FC   		movl	%eax, -4(%ebp)
2141:../../MMI/Resource/ABMLoader.c ****     if (ab2_header_size == 0)
 3734              	LM406:
 3735 18d9 837DFC00 		cmpl	$0, -4(%ebp)
 3736 18dd 7509     		jne	L235
2142:../../MMI/Resource/ABMLoader.c ****     {
2143:../../MMI/Resource/ABMLoader.c ****         return 0xffffffff;
 3738              	LM407:
 3739 18df C745ECFF 		movl	$-1, -20(%ebp)
 3739      FFFFFF
 3740 18e6 EB6C     		jmp	L233
 3741              	L235:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 89


2144:../../MMI/Resource/ABMLoader.c ****     }
2145:../../MMI/Resource/ABMLoader.c ****     out_mem_p += ab2_header_size;
 3743              	LM408:
 3744 18e8 8B45FC   		movl	-4(%ebp), %eax
 3745 18eb 014508   		addl	%eax, 8(%ebp)
2146:../../MMI/Resource/ABMLoader.c **** 
2147:../../MMI/Resource/ABMLoader.c ****     /* write AB2 RLE header and color table */
2148:../../MMI/Resource/ABMLoader.c ****     rle_header_size = ab2enc_rle_encode_header(out_mem_p, abm_context);
 3747              	LM409:
 3748 18ee 8B450C   		movl	12(%ebp), %eax
 3749 18f1 89442404 		movl	%eax, 4(%esp)
 3750 18f5 8B4508   		movl	8(%ebp), %eax
 3751 18f8 890424   		movl	%eax, (%esp)
 3752 18fb E85AFAFF 		call	_ab2enc_rle_encode_header
 3752      FF
 3753 1900 8945F8   		movl	%eax, -8(%ebp)
2149:../../MMI/Resource/ABMLoader.c ****     if (rle_header_size == 0)
 3755              	LM410:
 3756 1903 837DF800 		cmpl	$0, -8(%ebp)
 3757 1907 7509     		jne	L236
2150:../../MMI/Resource/ABMLoader.c ****     {
2151:../../MMI/Resource/ABMLoader.c ****         return 0xffffffff;
 3759              	LM411:
 3760 1909 C745ECFF 		movl	$-1, -20(%ebp)
 3760      FFFFFF
 3761 1910 EB42     		jmp	L233
 3762              	L236:
2152:../../MMI/Resource/ABMLoader.c ****     }
2153:../../MMI/Resource/ABMLoader.c ****     out_mem_p += rle_header_size;
 3764              	LM412:
 3765 1912 8B45F8   		movl	-8(%ebp), %eax
 3766 1915 014508   		addl	%eax, 8(%ebp)
2154:../../MMI/Resource/ABMLoader.c **** 
2155:../../MMI/Resource/ABMLoader.c ****     /* write AB2 RLE body */
2156:../../MMI/Resource/ABMLoader.c ****     rle_body_size = ab2enc_rle_encode_body(out_mem_p, abm_context);
 3768              	LM413:
 3769 1918 8B450C   		movl	12(%ebp), %eax
 3770 191b 89442404 		movl	%eax, 4(%esp)
 3771 191f 8B4508   		movl	8(%ebp), %eax
 3772 1922 890424   		movl	%eax, (%esp)
 3773 1925 E8C2FCFF 		call	_ab2enc_rle_encode_body
 3773      FF
 3774 192a 8945F4   		movl	%eax, -12(%ebp)
2157:../../MMI/Resource/ABMLoader.c ****     if (rle_body_size == 0)
 3776              	LM414:
 3777 192d 837DF400 		cmpl	$0, -12(%ebp)
 3778 1931 7509     		jne	L237
2158:../../MMI/Resource/ABMLoader.c ****     {
2159:../../MMI/Resource/ABMLoader.c ****         return 0xffffffff;
 3780              	LM415:
 3781 1933 C745ECFF 		movl	$-1, -20(%ebp)
 3781      FFFFFF
 3782 193a EB18     		jmp	L233
 3783              	L237:
2160:../../MMI/Resource/ABMLoader.c ****     }
2161:../../MMI/Resource/ABMLoader.c ****     out_mem_p += rle_body_size;
 3785              	LM416:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 90


 3786 193c 8B45F4   		movl	-12(%ebp), %eax
 3787 193f 014508   		addl	%eax, 8(%ebp)
2162:../../MMI/Resource/ABMLoader.c **** 
2163:../../MMI/Resource/ABMLoader.c **** 
2164:../../MMI/Resource/ABMLoader.c ****     ab2_total_size = ab2_header_size + rle_header_size + rle_body_size;
 3789              	LM417:
 3790 1942 8B45F8   		movl	-8(%ebp), %eax
 3791 1945 0345FC   		addl	-4(%ebp), %eax
 3792 1948 0345F4   		addl	-12(%ebp), %eax
 3793 194b 8945F0   		movl	%eax, -16(%ebp)
2165:../../MMI/Resource/ABMLoader.c **** 
2166:../../MMI/Resource/ABMLoader.c ****     return ab2_total_size;
 3795              	LM418:
 3796 194e 8B45F0   		movl	-16(%ebp), %eax
 3797 1951 8945EC   		movl	%eax, -20(%ebp)
2167:../../MMI/Resource/ABMLoader.c **** }
 3799              	LM419:
 3800              	L233:
 3801              	LBE27:
 3802 1954 8B45EC   		movl	-20(%ebp), %eax
 3803 1957 C9       		leave
 3804 1958 C3       		ret
 3811              	Lscope22:
 3817              	_abmenc_encode:
2168:../../MMI/Resource/ABMLoader.c **** 
2169:../../MMI/Resource/ABMLoader.c **** 
2170:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
2171:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
2172:../../MMI/Resource/ABMLoader.c ****  *  abmenc_encode
2173:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
2174:../../MMI/Resource/ABMLoader.c ****  *  abm encoder main routine
2175:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
2176:../../MMI/Resource/ABMLoader.c ****  *  out_mem_p       [OUT] output memory pointer
2177:../../MMI/Resource/ABMLoader.c ****  * RETURNS
2178:../../MMI/Resource/ABMLoader.c ****  *  ABM data size
2179:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
2180:../../MMI/Resource/ABMLoader.c **** static U32 abmenc_encode(U8* out_mem_p, ABM_Context * abm_context)
2181:../../MMI/Resource/ABMLoader.c **** {
 3819              	LM420:
 3820 1959 55       		pushl	%ebp
 3821 195a 89E5     		movl	%esp, %ebp
 3822 195c 53       		pushl	%ebx
 3823 195d 81EC9400 		subl	$148, %esp
 3823      0000
2182:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2183:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
2184:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2185:../../MMI/Resource/ABMLoader.c ****     S32     x, y, w, h, bottom_right_off_w, bottom_right_off_h;
2186:../../MMI/Resource/ABMLoader.c ****     S32     bound_box_w, bound_box_h;
2187:../../MMI/Resource/ABMLoader.c ****     S32     line_padding_bytes;
2188:../../MMI/Resource/ABMLoader.c ****     U8      *img_p, *mem8_p;
2189:../../MMI/Resource/ABMLoader.c ****     U32     p;
2190:../../MMI/Resource/ABMLoader.c ****     U32     bpp;
2191:../../MMI/Resource/ABMLoader.c ****     U16     *mem16_p;
2192:../../MMI/Resource/ABMLoader.c ****     S32     normal_color_num, alpha_color_num, color_num;
2193:../../MMI/Resource/ABMLoader.c ****     S32     i;
2194:../../MMI/Resource/ABMLoader.c **** 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 91


2195:../../MMI/Resource/ABMLoader.c ****     U32     abm_size;
2196:../../MMI/Resource/ABMLoader.c ****     U32     bmp_bpp;
2197:../../MMI/Resource/ABMLoader.c ****     mycolor c, color16;
2198:../../MMI/Resource/ABMLoader.c ****     mycolor a, r, g, b;
2199:../../MMI/Resource/ABMLoader.c ****     U32     bytes_per_pixel;
2200:../../MMI/Resource/ABMLoader.c **** 
2201:../../MMI/Resource/ABMLoader.c ****     U32     bitstream_padding_byte;
2202:../../MMI/Resource/ABMLoader.c **** 
2203:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2204:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
2205:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2206:../../MMI/Resource/ABMLoader.c ****     w = abm_context->abm_enc.bmp_width;
 3825              	LM421:
 3826              	LBB28:
 3827 1963 8B450C   		movl	12(%ebp), %eax
 3828 1966 8B00     		movl	(%eax), %eax
 3829 1968 8945F0   		movl	%eax, -16(%ebp)
2207:../../MMI/Resource/ABMLoader.c ****     h = abm_context->abm_enc.bmp_height;   
 3831              	LM422:
 3832 196b 8B450C   		movl	12(%ebp), %eax
 3833 196e 8B4004   		movl	4(%eax), %eax
 3834 1971 8945EC   		movl	%eax, -20(%ebp)
2208:../../MMI/Resource/ABMLoader.c ****     
2209:../../MMI/Resource/ABMLoader.c ****     bmp_bpp = abm_context->abm_enc.bmp_bpp;
 3836              	LM423:
 3837 1974 8B450C   		movl	12(%ebp), %eax
 3838 1977 8B4008   		movl	8(%eax), %eax
 3839 197a 8945AC   		movl	%eax, -84(%ebp)
2210:../../MMI/Resource/ABMLoader.c ****     line_padding_bytes = abm_context->abm_enc.line_padding_bytes;
 3841              	LM424:
 3842 197d 8B450C   		movl	12(%ebp), %eax
 3843 1980 8B801404 		movl	1044(%eax), %eax
 3843      0000
 3844 1986 8945D8   		movl	%eax, -40(%ebp)
2211:../../MMI/Resource/ABMLoader.c **** 
2212:../../MMI/Resource/ABMLoader.c ****     /* out of ABM limit, return a large size to prevent choosing ABM */
2213:../../MMI/Resource/ABMLoader.c ****     if (abm_context->color_idx_tab.color_num >= ABM_MAX_COLOR_NUM)
 3846              	LM425:
 3847 1989 8B450C   		movl	12(%ebp), %eax
 3848 198c 81B83474 		cmpl	$383999, 1537076(%eax)
 3848      1700FFDB 
 3848      0500
 3849 1996 7E0F     		jle	L239
2214:../../MMI/Resource/ABMLoader.c ****     {
2215:../../MMI/Resource/ABMLoader.c ****         return 0xFFFFFFFF;
 3851              	LM426:
 3852 1998 C7857CFF 		movl	$-1, -132(%ebp)
 3852      FFFFFFFF 
 3852      FFFF
 3853 19a2 E9990400 		jmp	L238
 3853      00
 3854              	L239:
2216:../../MMI/Resource/ABMLoader.c ****     }
2217:../../MMI/Resource/ABMLoader.c **** 
2218:../../MMI/Resource/ABMLoader.c ****     color_num = abm_context->color_idx_tab.color_num + 1;                 /* 1 for transparent colo
 3856              	LM427:
 3857 19a7 8B450C   		movl	12(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 92


 3858 19aa 8B803474 		movl	1537076(%eax), %eax
 3858      1700
 3859 19b0 40       		incl	%eax
 3860 19b1 8945B8   		movl	%eax, -72(%ebp)
2219:../../MMI/Resource/ABMLoader.c ****     normal_color_num = get_normal_color_num(abm_context) + 1;  /* 1 for transparent color 0 */
 3862              	LM428:
 3863 19b4 8B450C   		movl	12(%ebp), %eax
 3864 19b7 890424   		movl	%eax, (%esp)
 3865 19ba E84BE9FF 		call	_get_normal_color_num
 3865      FF
 3866 19bf 40       		incl	%eax
 3867 19c0 8945C0   		movl	%eax, -64(%ebp)
2220:../../MMI/Resource/ABMLoader.c ****     alpha_color_num = color_num - normal_color_num;
 3869              	LM429:
 3870 19c3 8B55C0   		movl	-64(%ebp), %edx
 3871 19c6 8B45B8   		movl	-72(%ebp), %eax
 3872 19c9 29D0     		subl	%edx, %eax
 3873 19cb 8945BC   		movl	%eax, -68(%ebp)
2221:../../MMI/Resource/ABMLoader.c ****     bpp = log2_ceiling(color_num);
 3875              	LM430:
 3876 19ce 8B45B8   		movl	-72(%ebp), %eax
 3877 19d1 890424   		movl	%eax, (%esp)
 3878 19d4 E815F4FF 		call	_log2_ceiling
 3878      FF
 3879 19d9 8945C8   		movl	%eax, -56(%ebp)
2222:../../MMI/Resource/ABMLoader.c ****     
2223:../../MMI/Resource/ABMLoader.c ****     /* 
2224:../../MMI/Resource/ABMLoader.c ****      * fill the ABM 12-byte header 
2225:../../MMI/Resource/ABMLoader.c ****      */
2226:../../MMI/Resource/ABMLoader.c ****     mem16_p = (U16*)out_mem_p;
 3881              	LM431:
 3882 19dc 8B4508   		movl	8(%ebp), %eax
 3883 19df 8945C4   		movl	%eax, -60(%ebp)
2227:../../MMI/Resource/ABMLoader.c ****     mem16_p[0] = w;    
 3885              	LM432:
 3886 19e2 8B55C4   		movl	-60(%ebp), %edx
 3887 19e5 8B45F0   		movl	-16(%ebp), %eax
 3888 19e8 668902   		movw	%ax, (%edx)
2228:../../MMI/Resource/ABMLoader.c ****     mem16_p[1] = h;
 3890              	LM433:
 3891 19eb 8B55C4   		movl	-60(%ebp), %edx
 3892 19ee 83C202   		addl	$2, %edx
 3893 19f1 8B45EC   		movl	-20(%ebp), %eax
 3894 19f4 668902   		movw	%ax, (%edx)
2229:../../MMI/Resource/ABMLoader.c **** 
2230:../../MMI/Resource/ABMLoader.c ****     /* store fully opaque flag on the width MSB */
2231:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_enc.is_fully_opaque)
 3896              	LM434:
 3897 19f7 8B450C   		movl	12(%ebp), %eax
 3898 19fa 83B83004 		cmpl	$0, 1072(%eax)
 3898      000000
 3899 1a01 7411     		je	L240
2232:../../MMI/Resource/ABMLoader.c ****     {
2233:../../MMI/Resource/ABMLoader.c ****         mem16_p[0] |= 0x8000;
 3901              	LM435:
 3902 1a03 8B55C4   		movl	-60(%ebp), %edx
 3903 1a06 8B45C4   		movl	-60(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 93


 3904 1a09 0FB700   		movzwl	(%eax), %eax
 3905 1a0c 0D0080FF 		orl	$-32768, %eax
 3905      FF
 3906 1a11 668902   		movw	%ax, (%edx)
 3907              	L240:
2234:../../MMI/Resource/ABMLoader.c ****     }
2235:../../MMI/Resource/ABMLoader.c ****     
2236:../../MMI/Resource/ABMLoader.c ****     if (abm_context->abm_palette_bpp!= 16)
 3909              	LM436:
 3910 1a14 8B450C   		movl	12(%ebp), %eax
 3911 1a17 83B83C74 		cmpl	$16, 1537084(%eax)
 3911      170010
 3912 1a1e 7417     		je	L241
2237:../../MMI/Resource/ABMLoader.c ****     {
2238:../../MMI/Resource/ABMLoader.c ****         mem16_p[1] |= 0x8000;    /* bit 15 is 1 to indicate it's 24-bit palette. */
 3914              	LM437:
 3915 1a20 8B55C4   		movl	-60(%ebp), %edx
 3916 1a23 83C202   		addl	$2, %edx
 3917 1a26 8B45C4   		movl	-60(%ebp), %eax
 3918 1a29 83C002   		addl	$2, %eax
 3919 1a2c 0FB700   		movzwl	(%eax), %eax
 3920 1a2f 0D0080FF 		orl	$-32768, %eax
 3920      FF
 3921 1a34 668902   		movw	%ax, (%edx)
 3922              	L241:
2239:../../MMI/Resource/ABMLoader.c ****     }
2240:../../MMI/Resource/ABMLoader.c ****     
2241:../../MMI/Resource/ABMLoader.c ****     mem16_p[2] = normal_color_num;  /* number of normal colors */
 3924              	LM438:
 3925 1a37 8B55C4   		movl	-60(%ebp), %edx
 3926 1a3a 83C204   		addl	$4, %edx
 3927 1a3d 8B45C0   		movl	-64(%ebp), %eax
 3928 1a40 668902   		movw	%ax, (%edx)
2242:../../MMI/Resource/ABMLoader.c ****     mem16_p[3] = alpha_color_num;   /* number of alpha colors */
 3930              	LM439:
 3931 1a43 8B55C4   		movl	-60(%ebp), %edx
 3932 1a46 83C206   		addl	$6, %edx
 3933 1a49 8B45BC   		movl	-68(%ebp), %eax
 3934 1a4c 668902   		movw	%ax, (%edx)
2243:../../MMI/Resource/ABMLoader.c **** 
2244:../../MMI/Resource/ABMLoader.c ****     /* bounding box info header (width and height offsets, not bounding box coordinates) */
2245:../../MMI/Resource/ABMLoader.c ****     mem16_p[4] = (abm_context->abm_enc.y1 << 8) | abm_context->abm_enc.x1;
 3936              	LM440:
 3937 1a4f 8B5DC4   		movl	-60(%ebp), %ebx
 3938 1a52 83C308   		addl	$8, %ebx
 3939 1a55 8B450C   		movl	12(%ebp), %eax
 3940 1a58 8B801C04 		movl	1052(%eax), %eax
 3940      0000
 3941 1a5e C1E008   		sall	$8, %eax
 3942 1a61 8B550C   		movl	12(%ebp), %edx
 3943 1a64 89C1     		movl	%eax, %ecx
 3944 1a66 0FB78218 		movzwl	1048(%edx), %eax
 3944      040000
 3945 1a6d 09C8     		orl	%ecx, %eax
 3946 1a6f 668903   		movw	%ax, (%ebx)
2246:../../MMI/Resource/ABMLoader.c ****     bottom_right_off_w = w - 1 - abm_context->abm_enc.x2;
 3948              	LM441:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 94


 3949 1a72 8B450C   		movl	12(%ebp), %eax
 3950 1a75 8B902004 		movl	1056(%eax), %edx
 3950      0000
 3951 1a7b 8B45F0   		movl	-16(%ebp), %eax
 3952 1a7e 29D0     		subl	%edx, %eax
 3953 1a80 48       		decl	%eax
 3954 1a81 8945E8   		movl	%eax, -24(%ebp)
2247:../../MMI/Resource/ABMLoader.c ****     bottom_right_off_h = h - 1 - abm_context->abm_enc.y2;
 3956              	LM442:
 3957 1a84 8B450C   		movl	12(%ebp), %eax
 3958 1a87 8B902404 		movl	1060(%eax), %edx
 3958      0000
 3959 1a8d 8B45EC   		movl	-20(%ebp), %eax
 3960 1a90 29D0     		subl	%edx, %eax
 3961 1a92 48       		decl	%eax
 3962 1a93 8945E4   		movl	%eax, -28(%ebp)
2248:../../MMI/Resource/ABMLoader.c ****     mem16_p[5] = (bottom_right_off_h << 8) | bottom_right_off_w;
 3964              	LM443:
 3965 1a96 8B4DC4   		movl	-60(%ebp), %ecx
 3966 1a99 83C10A   		addl	$10, %ecx
 3967 1a9c 8B45E4   		movl	-28(%ebp), %eax
 3968 1a9f C1E008   		sall	$8, %eax
 3969 1aa2 89C2     		movl	%eax, %edx
 3970 1aa4 8B45E8   		movl	-24(%ebp), %eax
 3971 1aa7 09D0     		orl	%edx, %eax
 3972 1aa9 668901   		movw	%ax, (%ecx)
2249:../../MMI/Resource/ABMLoader.c **** 
2250:../../MMI/Resource/ABMLoader.c ****     mem16_p += 6;    
 3974              	LM444:
 3975 1aac 8D45C4   		leal	-60(%ebp), %eax
 3976 1aaf 83000C   		addl	$12, (%eax)
2251:../../MMI/Resource/ABMLoader.c **** 
2252:../../MMI/Resource/ABMLoader.c ****     mem8_p = (U8*)mem16_p;
 3978              	LM445:
 3979 1ab2 8B45C4   		movl	-60(%ebp), %eax
 3980 1ab5 8945D0   		movl	%eax, -48(%ebp)
2253:../../MMI/Resource/ABMLoader.c **** 
2254:../../MMI/Resource/ABMLoader.c ****     /* output color palette */
2255:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < color_num - 1; i++)
 3982              	LM446:
 3983 1ab8 C745B400 		movl	$0, -76(%ebp)
 3983      000000
 3984              	L242:
 3985 1abf 8B45B8   		movl	-72(%ebp), %eax
 3986 1ac2 48       		decl	%eax
 3987 1ac3 3945B4   		cmpl	%eax, -76(%ebp)
 3988 1ac6 7C05     		jl	L245
 3989 1ac8 E9910100 		jmp	L243
 3989      00
 3990              	L245:
2256:../../MMI/Resource/ABMLoader.c ****     {
2257:../../MMI/Resource/ABMLoader.c ****         c = abm_context->color_idx_tab.color_table[i];
 3992              	LM447:
 3993 1acd 8B550C   		movl	12(%ebp), %edx
 3994 1ad0 8B45B4   		movl	-76(%ebp), %eax
 3995 1ad3 8B848234 		movl	1076(%edx,%eax,4), %eax
 3995      040000
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 95


 3996 1ada 8945A8   		movl	%eax, -88(%ebp)
2258:../../MMI/Resource/ABMLoader.c **** 
2259:../../MMI/Resource/ABMLoader.c ****         a = A_OF_ARGB8888(c);
 3998              	LM448:
 3999 1add 8B45A8   		movl	-88(%ebp), %eax
 4000 1ae0 C1E818   		shrl	$24, %eax
 4001 1ae3 8945A0   		movl	%eax, -96(%ebp)
2260:../../MMI/Resource/ABMLoader.c **** 
2261:../../MMI/Resource/ABMLoader.c ****         /* prevent blue channel from saturation to get rid of source key checking in the decoder */
2262:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_palette_bpp== 16)
 4003              	LM449:
 4004 1ae6 8B450C   		movl	12(%ebp), %eax
 4005 1ae9 83B83C74 		cmpl	$16, 1537084(%eax)
 4005      170010
 4006 1af0 7549     		jne	L246
2263:../../MMI/Resource/ABMLoader.c ****         {   /* 16-bit */
2264:../../MMI/Resource/ABMLoader.c ****             color16 = ARGB8888_TO_RGB16(c);
 4008              	LM450:
 4009 1af2 8B45A8   		movl	-88(%ebp), %eax
 4010 1af5 C1E008   		sall	$8, %eax
 4011 1af8 C1E818   		shrl	$24, %eax
 4012 1afb C1E803   		shrl	$3, %eax
 4013 1afe 89C2     		movl	%eax, %edx
 4014 1b00 C1E20B   		sall	$11, %edx
 4015 1b03 8B45A8   		movl	-88(%ebp), %eax
 4016 1b06 C1E010   		sall	$16, %eax
 4017 1b09 C1E818   		shrl	$24, %eax
 4018 1b0c C1E802   		shrl	$2, %eax
 4019 1b0f C1E005   		sall	$5, %eax
 4020 1b12 09C2     		orl	%eax, %edx
 4021 1b14 8B45A8   		movl	-88(%ebp), %eax
 4022 1b17 C1E018   		sall	$24, %eax
 4023 1b1a C1E818   		shrl	$24, %eax
 4024 1b1d C1E803   		shrl	$3, %eax
 4025 1b20 09D0     		orl	%edx, %eax
 4026 1b22 8945A4   		movl	%eax, -92(%ebp)
2265:../../MMI/Resource/ABMLoader.c ****             if (B_OF_RGB16(color16) == 0x1F)
 4028              	LM451:
 4029 1b25 8B45A4   		movl	-92(%ebp), %eax
 4030 1b28 C1E01B   		sall	$27, %eax
 4031 1b2b C1E81B   		shrl	$27, %eax
 4032 1b2e 83F81F   		cmpl	$31, %eax
 4033 1b31 751D     		jne	L248
2266:../../MMI/Resource/ABMLoader.c ****             {
2267:../../MMI/Resource/ABMLoader.c ****                 c -= 1 << 3;    /* 5-bit B: 0x1F -> 0x1E */
 4035              	LM452:
 4036 1b33 8D45A8   		leal	-88(%ebp), %eax
 4037 1b36 832808   		subl	$8, (%eax)
 4038 1b39 EB15     		jmp	L248
 4039              	L246:
2268:../../MMI/Resource/ABMLoader.c ****             }
2269:../../MMI/Resource/ABMLoader.c ****         }
2270:../../MMI/Resource/ABMLoader.c ****         else
2271:../../MMI/Resource/ABMLoader.c ****         {   /* 24-bit and 32-bit ABM both use 24-bit palette */
2272:../../MMI/Resource/ABMLoader.c ****             if (B_OF_ARGB8888(c) == 0xFF)
 4041              	LM453:
 4042 1b3b 8B45A8   		movl	-88(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 96


 4043 1b3e C1E018   		sall	$24, %eax
 4044 1b41 C1E818   		shrl	$24, %eax
 4045 1b44 3DFF0000 		cmpl	$255, %eax
 4045      00
 4046 1b49 7505     		jne	L248
2273:../../MMI/Resource/ABMLoader.c ****             {
2274:../../MMI/Resource/ABMLoader.c ****                 c -= 1;         /* 8-bit B: 0xFF -> 0xFE */
 4048              	LM454:
 4049 1b4b 8D45A8   		leal	-88(%ebp), %eax
 4050 1b4e FF08     		decl	(%eax)
 4051              	L248:
2275:../../MMI/Resource/ABMLoader.c ****             }
2276:../../MMI/Resource/ABMLoader.c ****         }
2277:../../MMI/Resource/ABMLoader.c **** 
2278:../../MMI/Resource/ABMLoader.c ****         /* pre-calculate alpha color */
2279:../../MMI/Resource/ABMLoader.c ****         r = R_OF_ARGB8888(c);
 4053              	LM455:
 4054 1b50 8B45A8   		movl	-88(%ebp), %eax
 4055 1b53 C1E008   		sall	$8, %eax
 4056 1b56 C1E818   		shrl	$24, %eax
 4057 1b59 89459C   		movl	%eax, -100(%ebp)
2280:../../MMI/Resource/ABMLoader.c ****         g = G_OF_ARGB8888(c);
 4059              	LM456:
 4060 1b5c 8B45A8   		movl	-88(%ebp), %eax
 4061 1b5f C1E010   		sall	$16, %eax
 4062 1b62 C1E818   		shrl	$24, %eax
 4063 1b65 894598   		movl	%eax, -104(%ebp)
2281:../../MMI/Resource/ABMLoader.c ****         b = B_OF_ARGB8888(c);
 4065              	LM457:
 4066 1b68 8B45A8   		movl	-88(%ebp), %eax
 4067 1b6b C1E018   		sall	$24, %eax
 4068 1b6e C1E818   		shrl	$24, %eax
 4069 1b71 894594   		movl	%eax, -108(%ebp)
2282:../../MMI/Resource/ABMLoader.c **** 
2283:../../MMI/Resource/ABMLoader.c ****         r = GDI_IMAGE_AB2_DIV_255(r * a);
 4071              	LM458:
 4072 1b74 8B459C   		movl	-100(%ebp), %eax
 4073 1b77 89C2     		movl	%eax, %edx
 4074 1b79 0FAF55A0 		imull	-96(%ebp), %edx
 4075 1b7d 89D0     		movl	%edx, %eax
 4076 1b7f C1E008   		sall	$8, %eax
 4077 1b82 01D0     		addl	%edx, %eax
 4078 1b84 05808000 		addl	$32896, %eax
 4078      00
 4079 1b89 C1E810   		shrl	$16, %eax
 4080 1b8c 89459C   		movl	%eax, -100(%ebp)
2284:../../MMI/Resource/ABMLoader.c ****         g = GDI_IMAGE_AB2_DIV_255(g * a);
 4082              	LM459:
 4083 1b8f 8B4598   		movl	-104(%ebp), %eax
 4084 1b92 89C2     		movl	%eax, %edx
 4085 1b94 0FAF55A0 		imull	-96(%ebp), %edx
 4086 1b98 89D0     		movl	%edx, %eax
 4087 1b9a C1E008   		sall	$8, %eax
 4088 1b9d 01D0     		addl	%edx, %eax
 4089 1b9f 05808000 		addl	$32896, %eax
 4089      00
 4090 1ba4 C1E810   		shrl	$16, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 97


 4091 1ba7 894598   		movl	%eax, -104(%ebp)
2285:../../MMI/Resource/ABMLoader.c ****         b = GDI_IMAGE_AB2_DIV_255(b * a);
 4093              	LM460:
 4094 1baa 8B4594   		movl	-108(%ebp), %eax
 4095 1bad 89C2     		movl	%eax, %edx
 4096 1baf 0FAF55A0 		imull	-96(%ebp), %edx
 4097 1bb3 89D0     		movl	%edx, %eax
 4098 1bb5 C1E008   		sall	$8, %eax
 4099 1bb8 01D0     		addl	%edx, %eax
 4100 1bba 05808000 		addl	$32896, %eax
 4100      00
 4101 1bbf C1E810   		shrl	$16, %eax
 4102 1bc2 894594   		movl	%eax, -108(%ebp)
2286:../../MMI/Resource/ABMLoader.c **** 
2287:../../MMI/Resource/ABMLoader.c ****         c = RGB(r, g, b);
 4104              	LM461:
 4105 1bc5 8B459C   		movl	-100(%ebp), %eax
 4106 1bc8 89C2     		movl	%eax, %edx
 4107 1bca C1E210   		sall	$16, %edx
 4108 1bcd 8B4598   		movl	-104(%ebp), %eax
 4109 1bd0 C1E008   		sall	$8, %eax
 4110 1bd3 09D0     		orl	%edx, %eax
 4111 1bd5 0B4594   		orl	-108(%ebp), %eax
 4112 1bd8 8945A8   		movl	%eax, -88(%ebp)
2288:../../MMI/Resource/ABMLoader.c **** 
2289:../../MMI/Resource/ABMLoader.c ****         if (abm_context->abm_palette_bpp == 16)
 4114              	LM462:
 4115 1bdb 8B450C   		movl	12(%ebp), %eax
 4116 1bde 83B83C74 		cmpl	$16, 1537084(%eax)
 4116      170010
 4117 1be5 753E     		jne	L250
2290:../../MMI/Resource/ABMLoader.c ****         {   /* 16-bit palette */
2291:../../MMI/Resource/ABMLoader.c ****             PUT_16(mem8_p, ARGB8888_TO_RGB16(c));
 4119              	LM463:
 4120 1be7 8B4DD0   		movl	-48(%ebp), %ecx
 4121 1bea 8B45A8   		movl	-88(%ebp), %eax
 4122 1bed C1E008   		sall	$8, %eax
 4123 1bf0 C1E818   		shrl	$24, %eax
 4124 1bf3 C1E803   		shrl	$3, %eax
 4125 1bf6 89C2     		movl	%eax, %edx
 4126 1bf8 C1E20B   		sall	$11, %edx
 4127 1bfb 8B45A8   		movl	-88(%ebp), %eax
 4128 1bfe C1E010   		sall	$16, %eax
 4129 1c01 C1E818   		shrl	$24, %eax
 4130 1c04 C1E802   		shrl	$2, %eax
 4131 1c07 C1E005   		sall	$5, %eax
 4132 1c0a 09C2     		orl	%eax, %edx
 4133 1c0c 8B45A8   		movl	-88(%ebp), %eax
 4134 1c0f C1E018   		sall	$24, %eax
 4135 1c12 C1E818   		shrl	$24, %eax
 4136 1c15 C1E803   		shrl	$3, %eax
 4137 1c18 09D0     		orl	%edx, %eax
 4138 1c1a 668901   		movw	%ax, (%ecx)
2292:../../MMI/Resource/ABMLoader.c ****             mem8_p += 2;
 4140              	LM464:
 4141 1c1d 8D45D0   		leal	-48(%ebp), %eax
 4142 1c20 830002   		addl	$2, (%eax)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 98


 4143 1c23 EB2F     		jmp	L244
 4144              	L250:
2293:../../MMI/Resource/ABMLoader.c ****         }
2294:../../MMI/Resource/ABMLoader.c ****         else
2295:../../MMI/Resource/ABMLoader.c ****         {   /* 24-bit palette */
2296:../../MMI/Resource/ABMLoader.c ****             PUT_24(mem8_p, c);
 4146              	LM465:
 4147              	LBB29:
 4148 1c25 8B45D0   		movl	-48(%ebp), %eax
 4149 1c28 894588   		movl	%eax, -120(%ebp)
 4150 1c2b 8B5588   		movl	-120(%ebp), %edx
 4151 1c2e 0FB645A8 		movzbl	-88(%ebp), %eax
 4152 1c32 8802     		movb	%al, (%edx)
 4153 1c34 8B5588   		movl	-120(%ebp), %edx
 4154 1c37 42       		incl	%edx
 4155 1c38 8B45A8   		movl	-88(%ebp), %eax
 4156 1c3b C1E808   		shrl	$8, %eax
 4157 1c3e 8802     		movb	%al, (%edx)
 4158 1c40 8B5588   		movl	-120(%ebp), %edx
 4159 1c43 83C202   		addl	$2, %edx
 4160 1c46 8B45A8   		movl	-88(%ebp), %eax
 4161 1c49 C1E810   		shrl	$16, %eax
 4162 1c4c 8802     		movb	%al, (%edx)
2297:../../MMI/Resource/ABMLoader.c ****             mem8_p += 3;
 4164              	LM466:
 4165 1c4e 8D45D0   		leal	-48(%ebp), %eax
 4166              	LBE29:
 4167 1c51 830003   		addl	$3, (%eax)
 4169              	LM467:
 4170              	L244:
 4171 1c54 8D45B4   		leal	-76(%ebp), %eax
 4172 1c57 FF00     		incl	(%eax)
 4173 1c59 E961FEFF 		jmp	L242
 4173      FF
 4174              	L243:
2298:../../MMI/Resource/ABMLoader.c ****         }
2299:../../MMI/Resource/ABMLoader.c ****     }
2300:../../MMI/Resource/ABMLoader.c **** 
2301:../../MMI/Resource/ABMLoader.c ****     /* output 1-byte alpha values of alpha colors */
2302:../../MMI/Resource/ABMLoader.c ****     for (i = normal_color_num - 1; i < color_num - 1; i++)
 4176              	LM468:
 4177 1c5e 8B45C0   		movl	-64(%ebp), %eax
 4178 1c61 48       		decl	%eax
 4179 1c62 8945B4   		movl	%eax, -76(%ebp)
 4180              	L253:
 4181 1c65 8B45B8   		movl	-72(%ebp), %eax
 4182 1c68 48       		decl	%eax
 4183 1c69 3945B4   		cmpl	%eax, -76(%ebp)
 4184 1c6c 7C02     		jl	L256
 4185 1c6e EB29     		jmp	L254
 4186              	L256:
2303:../../MMI/Resource/ABMLoader.c ****     {
2304:../../MMI/Resource/ABMLoader.c ****         /* inverted alpha due to precalculation */
2305:../../MMI/Resource/ABMLoader.c ****         *mem8_p++ = 255 - A_OF_ARGB8888(abm_context->color_idx_tab.color_table[i]);
 4188              	LM469:
 4189 1c70 8B45D0   		movl	-48(%ebp), %eax
 4190 1c73 89C1     		movl	%eax, %ecx
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 99


 4191 1c75 8B550C   		movl	12(%ebp), %edx
 4192 1c78 8B45B4   		movl	-76(%ebp), %eax
 4193 1c7b 8B848234 		movl	1076(%edx,%eax,4), %eax
 4193      040000
 4194 1c82 89C2     		movl	%eax, %edx
 4195 1c84 C1EA18   		shrl	$24, %edx
 4196 1c87 B0FF     		movb	$-1, %al
 4197 1c89 28D0     		subb	%dl, %al
 4198 1c8b 8801     		movb	%al, (%ecx)
 4199 1c8d 8D45D0   		leal	-48(%ebp), %eax
 4200 1c90 FF00     		incl	(%eax)
 4202              	LM470:
 4203 1c92 8D45B4   		leal	-76(%ebp), %eax
 4204 1c95 FF00     		incl	(%eax)
 4205 1c97 EBCC     		jmp	L253
 4206              	L254:
2306:../../MMI/Resource/ABMLoader.c ****     }
2307:../../MMI/Resource/ABMLoader.c **** 
2308:../../MMI/Resource/ABMLoader.c ****     /* add a padding byte to meet 2-byte alignment for the bitstream */
2309:../../MMI/Resource/ABMLoader.c ****     if ((U32)mem8_p & 1)
 4208              	LM471:
 4209 1c99 8B45D0   		movl	-48(%ebp), %eax
 4210 1c9c 83E001   		andl	$1, %eax
 4211 1c9f 85C0     		testl	%eax, %eax
 4212 1ca1 7414     		je	L257
2310:../../MMI/Resource/ABMLoader.c ****     {
2311:../../MMI/Resource/ABMLoader.c ****         /* padding with 0xFF */
2312:../../MMI/Resource/ABMLoader.c ****         *mem8_p++ = 0xFF;
 4214              	LM472:
 4215 1ca3 8B45D0   		movl	-48(%ebp), %eax
 4216 1ca6 C600FF   		movb	$-1, (%eax)
 4217 1ca9 8D45D0   		leal	-48(%ebp), %eax
 4218 1cac FF00     		incl	(%eax)
2313:../../MMI/Resource/ABMLoader.c ****         bitstream_padding_byte = 1;
 4220              	LM473:
 4221 1cae C7458C01 		movl	$1, -116(%ebp)
 4221      000000
 4222 1cb5 EB07     		jmp	L258
 4223              	L257:
2314:../../MMI/Resource/ABMLoader.c ****     }
2315:../../MMI/Resource/ABMLoader.c ****     else
2316:../../MMI/Resource/ABMLoader.c ****     {
2317:../../MMI/Resource/ABMLoader.c ****         bitstream_padding_byte = 0;
 4225              	LM474:
 4226 1cb7 C7458C00 		movl	$0, -116(%ebp)
 4226      000000
 4227              	L258:
2318:../../MMI/Resource/ABMLoader.c ****     }
2319:../../MMI/Resource/ABMLoader.c **** 
2320:../../MMI/Resource/ABMLoader.c ****     img_p = abm_context->abm_enc.bmp_pixel_start_p;
 4229              	LM475:
 4230 1cbe 8B450C   		movl	12(%ebp), %eax
 4231 1cc1 8B801004 		movl	1040(%eax), %eax
 4231      0000
 4232 1cc7 8945D4   		movl	%eax, -44(%ebp)
2321:../../MMI/Resource/ABMLoader.c ****     bytes_per_pixel = abm_context->abm_enc.bmp_bpp / 8;
 4234              	LM476:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 100


 4235 1cca 8B450C   		movl	12(%ebp), %eax
 4236 1ccd 8B4008   		movl	8(%eax), %eax
 4237 1cd0 898578FF 		movl	%eax, -136(%ebp)
 4237      FFFF
 4238 1cd6 83BD78FF 		cmpl	$0, -136(%ebp)
 4238      FFFF00
 4239 1cdd 7907     		jns	L259
 4240 1cdf 838578FF 		addl	$7, -136(%ebp)
 4240      FFFF07
 4241              	L259:
 4242 1ce6 8B8578FF 		movl	-136(%ebp), %eax
 4242      FFFF
 4243 1cec C1F803   		sarl	$3, %eax
 4244 1cef 894590   		movl	%eax, -112(%ebp)
2322:../../MMI/Resource/ABMLoader.c **** 
2323:../../MMI/Resource/ABMLoader.c ****     /* calculate bounding box width and height */
2324:../../MMI/Resource/ABMLoader.c ****     bound_box_w = abm_context->abm_enc.x2 - abm_context->abm_enc.x1 + 1;
 4246              	LM477:
 4247 1cf2 8B4D0C   		movl	12(%ebp), %ecx
 4248 1cf5 8B450C   		movl	12(%ebp), %eax
 4249 1cf8 8B901804 		movl	1048(%eax), %edx
 4249      0000
 4250 1cfe 8B812004 		movl	1056(%ecx), %eax
 4250      0000
 4251 1d04 29D0     		subl	%edx, %eax
 4252 1d06 40       		incl	%eax
 4253 1d07 8945E0   		movl	%eax, -32(%ebp)
2325:../../MMI/Resource/ABMLoader.c ****     bound_box_h = abm_context->abm_enc.y2 - abm_context->abm_enc.y1 + 1;
 4255              	LM478:
 4256 1d0a 8B4D0C   		movl	12(%ebp), %ecx
 4257 1d0d 8B450C   		movl	12(%ebp), %eax
 4258 1d10 8B901C04 		movl	1052(%eax), %edx
 4258      0000
 4259 1d16 8B812404 		movl	1060(%ecx), %eax
 4259      0000
 4260 1d1c 29D0     		subl	%edx, %eax
 4261 1d1e 40       		incl	%eax
 4262 1d1f 8945DC   		movl	%eax, -36(%ebp)
2326:../../MMI/Resource/ABMLoader.c **** 
2327:../../MMI/Resource/ABMLoader.c ****     /* initialize the bitstream writer */
2328:../../MMI/Resource/ABMLoader.c ****     BW_INIT((U16*)mem8_p);
 4264              	LM479:
 4265              	LBB30:
 4266 1d22 8B45D0   		movl	-48(%ebp), %eax
 4267 1d25 894584   		movl	%eax, -124(%ebp)
 4268 1d28 C7458800 		movl	$0, -120(%ebp)
 4268      000000
 4269 1d2f C7458000 		movl	$0, -128(%ebp)
 4269      000000
2329:../../MMI/Resource/ABMLoader.c **** 
2330:../../MMI/Resource/ABMLoader.c ****     /* 2nd pass, output ABM packed pixels, and do vertical flipping (BMP nature) */
2331:../../MMI/Resource/ABMLoader.c ****     for (y = abm_context->abm_enc.y1; y <= abm_context->abm_enc.y2; y++)
 4271              	LM480:
 4272 1d36 8B450C   		movl	12(%ebp), %eax
 4273 1d39 8B801C04 		movl	1052(%eax), %eax
 4273      0000
 4274 1d3f 8945F4   		movl	%eax, -12(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 101


 4275              	L260:
 4276 1d42 8B550C   		movl	12(%ebp), %edx
 4277 1d45 8B45F4   		movl	-12(%ebp), %eax
 4278 1d48 3B822404 		cmpl	1060(%edx), %eax
 4278      0000
 4279 1d4e 7E05     		jle	L263
 4280 1d50 E9900000 		jmp	L261
 4280      00
 4281              	L263:
2332:../../MMI/Resource/ABMLoader.c ****     {
2333:../../MMI/Resource/ABMLoader.c ****         for (x = abm_context->abm_enc.x1; x <= abm_context->abm_enc.x2; x++)
 4283              	LM481:
 4284 1d55 8B450C   		movl	12(%ebp), %eax
 4285 1d58 8B801804 		movl	1048(%eax), %eax
 4285      0000
 4286 1d5e 8945F8   		movl	%eax, -8(%ebp)
 4287              	L264:
 4288 1d61 8B550C   		movl	12(%ebp), %edx
 4289 1d64 8B45F8   		movl	-8(%ebp), %eax
 4290 1d67 3B822004 		cmpl	1056(%edx), %eax
 4290      0000
 4291 1d6d 7E02     		jle	L267
 4292 1d6f EB6A     		jmp	L262
 4293              	L267:
2334:../../MMI/Resource/ABMLoader.c ****         {
2335:../../MMI/Resource/ABMLoader.c ****             p = ab2enc_get_img_color_idx(x, y, abm_context);
 4295              	LM482:
 4296 1d71 8B450C   		movl	12(%ebp), %eax
 4297 1d74 89442408 		movl	%eax, 8(%esp)
 4298 1d78 8B45F4   		movl	-12(%ebp), %eax
 4299 1d7b 89442404 		movl	%eax, 4(%esp)
 4300 1d7f 8B45F8   		movl	-8(%ebp), %eax
 4301 1d82 890424   		movl	%eax, (%esp)
 4302 1d85 E8050D00 		call	_ab2enc_get_img_color_idx
 4302      00
 4303 1d8a 8945CC   		movl	%eax, -52(%ebp)
2336:../../MMI/Resource/ABMLoader.c ****             
2337:../../MMI/Resource/ABMLoader.c ****             /* write the ABM pixel data into the bitstream */
2338:../../MMI/Resource/ABMLoader.c ****             BW_WRITE(p, bpp);
 4305              	LM483:
 4306 1d8d B8010000 		movl	$1, %eax
 4306      00
 4307 1d92 0FB64DC8 		movzbl	-56(%ebp), %ecx
 4308 1d96 D3E0     		sall	%cl, %eax
 4309 1d98 48       		decl	%eax
 4310 1d99 2345CC   		andl	-52(%ebp), %eax
 4311 1d9c 0FB64D80 		movzbl	-128(%ebp), %ecx
 4312 1da0 89C2     		movl	%eax, %edx
 4313 1da2 D3E2     		sall	%cl, %edx
 4314 1da4 8D4588   		leal	-120(%ebp), %eax
 4315 1da7 0910     		orl	%edx, (%eax)
 4316 1da9 8B55C8   		movl	-56(%ebp), %edx
 4317 1dac 8D4580   		leal	-128(%ebp), %eax
 4318 1daf 0110     		addl	%edx, (%eax)
 4319 1db1 837D800F 		cmpl	$15, -128(%ebp)
 4320 1db5 761D     		jbe	L266
 4321 1db7 8B4584   		movl	-124(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 102


 4322 1dba 89C2     		movl	%eax, %edx
 4323 1dbc 8B4588   		movl	-120(%ebp), %eax
 4324 1dbf 668902   		movw	%ax, (%edx)
 4325 1dc2 8D4584   		leal	-124(%ebp), %eax
 4326 1dc5 830002   		addl	$2, (%eax)
 4327 1dc8 8D4588   		leal	-120(%ebp), %eax
 4328 1dcb C12810   		shrl	$16, (%eax)
 4329 1dce 8D4580   		leal	-128(%ebp), %eax
 4330 1dd1 832810   		subl	$16, (%eax)
 4332              	LM484:
 4333              	L266:
 4334 1dd4 8D45F8   		leal	-8(%ebp), %eax
 4335 1dd7 FF00     		incl	(%eax)
 4336 1dd9 EB86     		jmp	L264
 4338              	LM485:
 4339              	L262:
 4340 1ddb 8D45F4   		leal	-12(%ebp), %eax
 4341 1dde FF00     		incl	(%eax)
 4342 1de0 E95DFFFF 		jmp	L260
 4342      FF
 4343              	L261:
2339:../../MMI/Resource/ABMLoader.c ****         }
2340:../../MMI/Resource/ABMLoader.c ****     }
2341:../../MMI/Resource/ABMLoader.c **** 
2342:../../MMI/Resource/ABMLoader.c ****     /* flush bitstream writer */
2343:../../MMI/Resource/ABMLoader.c ****     BW_END();
 4345              	LM486:
 4346 1de5 837D8000 		cmpl	$0, -128(%ebp)
 4347 1de9 7411     		je	L269
 4348 1deb 8B4584   		movl	-124(%ebp), %eax
 4349 1dee 89C2     		movl	%eax, %edx
 4350 1df0 8B4588   		movl	-120(%ebp), %eax
 4351 1df3 668902   		movw	%ax, (%edx)
 4352 1df6 8D4584   		leal	-124(%ebp), %eax
 4353 1df9 830002   		addl	$2, (%eax)
 4354              	L269:
2344:../../MMI/Resource/ABMLoader.c **** 
2345:../../MMI/Resource/ABMLoader.c ****     abm_size = ABM_HEADER_SIZE +                            /* header size */
 4356              	LM487:
 4357 1dfc 8B55B8   		movl	-72(%ebp), %edx
 4358              	LBE30:
 4359 1dff 4A       		decl	%edx
 4360 1e00 8B450C   		movl	12(%ebp), %eax
 4361 1e03 0FAF903C 		imull	1537084(%eax), %edx
 4361      741700
 4362 1e0a 89D0     		movl	%edx, %eax
 4363 1e0c C1E803   		shrl	$3, %eax
 4364 1e0f 0345BC   		addl	-68(%ebp), %eax
 4365 1e12 89C2     		movl	%eax, %edx
 4366 1e14 03558C   		addl	-116(%ebp), %edx
 4367 1e17 8B45E0   		movl	-32(%ebp), %eax
 4368 1e1a 0FAF45DC 		imull	-36(%ebp), %eax
 4369 1e1e 0FAF45C8 		imull	-56(%ebp), %eax
 4370 1e22 83C00F   		addl	$15, %eax
 4371 1e25 C1E804   		shrl	$4, %eax
 4372 1e28 C1E004   		sall	$4, %eax
 4373 1e2b C1E803   		shrl	$3, %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 103


 4374 1e2e 8D0410   		leal	(%eax,%edx), %eax
 4375 1e31 83C00C   		addl	$12, %eax
 4376 1e34 8945B0   		movl	%eax, -80(%ebp)
2346:../../MMI/Resource/ABMLoader.c ****                (color_num - 1) * abm_context->abm_palette_bpp / 8 +      /* palette size */
2347:../../MMI/Resource/ABMLoader.c ****                alpha_color_num +                            /* 8-bit alpha channel */
2348:../../MMI/Resource/ABMLoader.c ****                bitstream_padding_byte +                     /* a padding byte or not */
2349:../../MMI/Resource/ABMLoader.c ****                (bound_box_w * bound_box_h * bpp + 15) / 16 * 16 / 8;    /* pixel data size (2-byte 
2350:../../MMI/Resource/ABMLoader.c **** 
2351:../../MMI/Resource/ABMLoader.c ****     return abm_size;
 4378              	LM488:
 4379 1e37 8B45B0   		movl	-80(%ebp), %eax
 4380 1e3a 89857CFF 		movl	%eax, -132(%ebp)
 4380      FFFF
2352:../../MMI/Resource/ABMLoader.c **** }
 4382              	LM489:
 4383              	L238:
 4384              	LBE28:
 4385 1e40 8B857CFF 		movl	-132(%ebp), %eax
 4385      FFFF
 4386 1e46 81C49400 		addl	$148, %esp
 4386      0000
 4387 1e4c 5B       		popl	%ebx
 4388 1e4d 5D       		popl	%ebp
 4389 1e4e C3       		ret
 4428              	Lscope23:
 4433              	_caculate_abm_size:
2353:../../MMI/Resource/ABMLoader.c **** 
2354:../../MMI/Resource/ABMLoader.c **** 
2355:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
2356:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
2357:../../MMI/Resource/ABMLoader.c ****  *  caculate_abm_size
2358:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
2359:../../MMI/Resource/ABMLoader.c ****  *  caculate the image in ABM format size without data encoding.
2360:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
2361:../../MMI/Resource/ABMLoader.c ****  *  width           [IN]    width of image
2362:../../MMI/Resource/ABMLoader.c ****  *  height          [IN]    height of image
2363:../../MMI/Resource/ABMLoader.c ****  *  color_cnt       [IN]    bits per pixel of image
2364:../../MMI/Resource/ABMLoader.c ****  * RETURNS
2365:../../MMI/Resource/ABMLoader.c ****  *  The result size
2366:../../MMI/Resource/ABMLoader.c ****   *****************************************************************************/
2367:../../MMI/Resource/ABMLoader.c **** static U32 caculate_abm_size(ABM_Context * abm_context)
2368:../../MMI/Resource/ABMLoader.c **** {
 4435              	LM490:
 4436 1e4f 55       		pushl	%ebp
 4437 1e50 89E5     		movl	%esp, %ebp
 4438 1e52 83EC28   		subl	$40, %esp
2369:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2370:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
2371:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2372:../../MMI/Resource/ABMLoader.c ****     U32 bound_width, bound_height;
2373:../../MMI/Resource/ABMLoader.c ****     U32 normal_color_cnt, alpha_color_cnt;
2374:../../MMI/Resource/ABMLoader.c ****     U32 color_index_bits;
2375:../../MMI/Resource/ABMLoader.c ****     
2376:../../MMI/Resource/ABMLoader.c ****     U32 palette_size;
2377:../../MMI/Resource/ABMLoader.c ****     U32 stream_size;
2378:../../MMI/Resource/ABMLoader.c ****     
2379:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 104


2380:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
2381:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2382:../../MMI/Resource/ABMLoader.c ****     bound_width         = abm_context->abm_enc.x2 - abm_context->abm_enc.x1 + 1;
 4440              	LM491:
 4441              	LBB31:
 4442 1e55 8B4D08   		movl	8(%ebp), %ecx
 4443 1e58 8B4508   		movl	8(%ebp), %eax
 4444 1e5b 8B901804 		movl	1048(%eax), %edx
 4444      0000
 4445 1e61 8B812004 		movl	1056(%ecx), %eax
 4445      0000
 4446 1e67 29D0     		subl	%edx, %eax
 4447 1e69 40       		incl	%eax
 4448 1e6a 8945FC   		movl	%eax, -4(%ebp)
2383:../../MMI/Resource/ABMLoader.c ****     bound_height        = abm_context->abm_enc.y2 - abm_context->abm_enc.y1 + 1;
 4450              	LM492:
 4451 1e6d 8B4D08   		movl	8(%ebp), %ecx
 4452 1e70 8B4508   		movl	8(%ebp), %eax
 4453 1e73 8B901C04 		movl	1052(%eax), %edx
 4453      0000
 4454 1e79 8B812404 		movl	1060(%ecx), %eax
 4454      0000
 4455 1e7f 29D0     		subl	%edx, %eax
 4456 1e81 40       		incl	%eax
 4457 1e82 8945F8   		movl	%eax, -8(%ebp)
2384:../../MMI/Resource/ABMLoader.c **** 
2385:../../MMI/Resource/ABMLoader.c ****     normal_color_cnt    = get_normal_color_num(abm_context);
 4459              	LM493:
 4460 1e85 8B4508   		movl	8(%ebp), %eax
 4461 1e88 890424   		movl	%eax, (%esp)
 4462 1e8b E87AE4FF 		call	_get_normal_color_num
 4462      FF
 4463 1e90 8945F4   		movl	%eax, -12(%ebp)
2386:../../MMI/Resource/ABMLoader.c ****     alpha_color_cnt     = abm_context->color_idx_tab.color_num - normal_color_cnt;
 4465              	LM494:
 4466 1e93 8B4508   		movl	8(%ebp), %eax
 4467 1e96 8B55F4   		movl	-12(%ebp), %edx
 4468 1e99 8B803474 		movl	1537076(%eax), %eax
 4468      1700
 4469 1e9f 29D0     		subl	%edx, %eax
 4470 1ea1 8945F0   		movl	%eax, -16(%ebp)
2387:../../MMI/Resource/ABMLoader.c ****     
2388:../../MMI/Resource/ABMLoader.c ****     color_index_bits = log2_ceiling(1 + normal_color_cnt + alpha_color_cnt);
 4472              	LM495:
 4473 1ea4 8B45F0   		movl	-16(%ebp), %eax
 4474 1ea7 0345F4   		addl	-12(%ebp), %eax
 4475 1eaa 40       		incl	%eax
 4476 1eab 890424   		movl	%eax, (%esp)
 4477 1eae E83BEFFF 		call	_log2_ceiling
 4477      FF
 4478 1eb3 8945EC   		movl	%eax, -20(%ebp)
2389:../../MMI/Resource/ABMLoader.c ****     
2390:../../MMI/Resource/ABMLoader.c ****     palette_size = 
 4480              	LM496:
 4481 1eb6 8B45F0   		movl	-16(%ebp), %eax
 4482 1eb9 8B55F4   		movl	-12(%ebp), %edx
 4483 1ebc 01C2     		addl	%eax, %edx
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 105


 4484 1ebe 8B4508   		movl	8(%ebp), %eax
 4485 1ec1 0FAF903C 		imull	1537084(%eax), %edx
 4485      741700
 4486 1ec8 89D0     		movl	%edx, %eax
 4487 1eca C1E803   		shrl	$3, %eax
 4488 1ecd 0345F0   		addl	-16(%ebp), %eax
 4489 1ed0 8945E8   		movl	%eax, -24(%ebp)
2391:../../MMI/Resource/ABMLoader.c ****         (normal_color_cnt + alpha_color_cnt) * abm_context->abm_palette_bpp / 8 +    /* palette siz
2392:../../MMI/Resource/ABMLoader.c ****         alpha_color_cnt;                                                /* 8-bit alpha channel */
2393:../../MMI/Resource/ABMLoader.c ****     palette_size = (palette_size + 1) & ~0x1;                           /* 2-bytes alignment */
 4491              	LM497:
 4492 1ed3 8B45E8   		movl	-24(%ebp), %eax
 4493 1ed6 40       		incl	%eax
 4494 1ed7 83E0FE   		andl	$-2, %eax
 4495 1eda 8945E8   		movl	%eax, -24(%ebp)
2394:../../MMI/Resource/ABMLoader.c **** 
2395:../../MMI/Resource/ABMLoader.c ****     stream_size = ((bound_width * bound_height * color_index_bits + 7) / 8);
 4497              	LM498:
 4498 1edd 8B45FC   		movl	-4(%ebp), %eax
 4499 1ee0 0FAF45F8 		imull	-8(%ebp), %eax
 4500 1ee4 0FAF45EC 		imull	-20(%ebp), %eax
 4501 1ee8 83C007   		addl	$7, %eax
 4502 1eeb C1E803   		shrl	$3, %eax
 4503 1eee 8945E4   		movl	%eax, -28(%ebp)
2396:../../MMI/Resource/ABMLoader.c ****     stream_size = (stream_size + 1) & ~0x1;                             /* 2-bytes alignment */
 4505              	LM499:
 4506 1ef1 8B45E4   		movl	-28(%ebp), %eax
 4507 1ef4 40       		incl	%eax
 4508 1ef5 83E0FE   		andl	$-2, %eax
 4509 1ef8 8945E4   		movl	%eax, -28(%ebp)
2397:../../MMI/Resource/ABMLoader.c ****     
2398:../../MMI/Resource/ABMLoader.c ****     return ABM_HEADER_SIZE + palette_size + stream_size;
 4511              	LM500:
 4512 1efb 8B45E4   		movl	-28(%ebp), %eax
 4513 1efe 0345E8   		addl	-24(%ebp), %eax
 4514 1f01 83C00C   		addl	$12, %eax
2399:../../MMI/Resource/ABMLoader.c **** }
 4516              	LM501:
 4517 1f04 C9       		leave
 4518 1f05 C3       		ret
 4519              	LBE31:
 4529              	Lscope24:
 4536              	_caculate_pbm_size:
2400:../../MMI/Resource/ABMLoader.c **** 
2401:../../MMI/Resource/ABMLoader.c **** 
2402:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
2403:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
2404:../../MMI/Resource/ABMLoader.c ****  *  caculate_pbm_size
2405:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
2406:../../MMI/Resource/ABMLoader.c ****  *  caculate the image in PBM format size without data encoding.
2407:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
2408:../../MMI/Resource/ABMLoader.c ****  *  width           [IN]    width of image
2409:../../MMI/Resource/ABMLoader.c ****  *  height          [IN]    height of image
2410:../../MMI/Resource/ABMLoader.c ****  *  bpp             [IN]    bits per pixel of image
2411:../../MMI/Resource/ABMLoader.c ****  * RETURNS
2412:../../MMI/Resource/ABMLoader.c ****  *  The result size
2413:../../MMI/Resource/ABMLoader.c ****   *****************************************************************************/
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 106


2414:../../MMI/Resource/ABMLoader.c **** static U32 caculate_pbm_size(U32 width, U32 height, U32 bpp)
2415:../../MMI/Resource/ABMLoader.c **** {
 4538              	LM502:
 4539 1f06 55       		pushl	%ebp
 4540 1f07 89E5     		movl	%esp, %ebp
 4541 1f09 83EC04   		subl	$4, %esp
2416:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2417:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
2418:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2419:../../MMI/Resource/ABMLoader.c ****     
2420:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2421:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
2422:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2423:../../MMI/Resource/ABMLoader.c **** 
2424:../../MMI/Resource/ABMLoader.c ****     return PBM_HEADER_SIZE + width * height * bpp / 8;
 4543              	LM503:
 4544 1f0c 8B4508   		movl	8(%ebp), %eax
 4545 1f0f 0FAF450C 		imull	12(%ebp), %eax
 4546 1f13 8945FC   		movl	%eax, -4(%ebp)
 4547 1f16 8B45FC   		movl	-4(%ebp), %eax
 4548 1f19 0FAF4510 		imull	16(%ebp), %eax
 4549 1f1d 8945FC   		movl	%eax, -4(%ebp)
 4550 1f20 8B45FC   		movl	-4(%ebp), %eax
 4551 1f23 C1E803   		shrl	$3, %eax
 4552 1f26 83C00D   		addl	$13, %eax
 4553 1f29 8945FC   		movl	%eax, -4(%ebp)
 4554 1f2c 8B45FC   		movl	-4(%ebp), %eax
2425:../../MMI/Resource/ABMLoader.c **** }
 4556              	LM504:
 4557 1f2f C9       		leave
 4558 1f30 C3       		ret
 4559              	Lscope25:
 4561 1f31 EB0D9090 		.align 32
 4561      90909090 
 4561      90909090 
 4561      909090
 4562              	LC27:
 4563 1f40 5B41424D 		.ascii "[ABM enc] Unique color number exceed limitation(384000):%s\0"
 4563      20656E63 
 4563      5D20556E 
 4563      69717565 
 4563      20636F6C 
 4575              	.globl _ABM_load
 4577              	_ABM_load:
2426:../../MMI/Resource/ABMLoader.c **** 
2427:../../MMI/Resource/ABMLoader.c **** 
2428:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
2429:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
2430:../../MMI/Resource/ABMLoader.c ****  *  ABM_load
2431:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
2432:../../MMI/Resource/ABMLoader.c ****  *  ABM encoder interface
2433:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
2434:../../MMI/Resource/ABMLoader.c ****  *  in_bmp_filename       [IN]  input bitmap filename
2435:../../MMI/Resource/ABMLoader.c ****  *  dev_bmp_bpp           [IN]  PBM color depth in bits
2436:../../MMI/Resource/ABMLoader.c ****  *  image_type            [IN]  for decision whether to use ABM
2437:../../MMI/Resource/ABMLoader.c ****  *  option                [IN]  select file format can be return
2438:../../MMI/Resource/ABMLoader.c ****  *  data                  [OUT] output memory
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 107


2439:../../MMI/Resource/ABMLoader.c ****  *  size                  [OUT] size of ABM image
2440:../../MMI/Resource/ABMLoader.c ****  *  width                 [OUT] width of ABM image
2441:../../MMI/Resource/ABMLoader.c ****  *  height                [OUT] height of ABM image
2442:../../MMI/Resource/ABMLoader.c ****  * RETURNS
2443:../../MMI/Resource/ABMLoader.c ****  *  return code to use ABM or not
2444:../../MMI/Resource/ABMLoader.c ****  *  + ABM_ENC_RETURN_KEEP_ORIGINAL  0   donot use ABM  
2445:../../MMI/Resource/ABMLoader.c ****  *  + ABM_ENC_RETURN_USE_ABM        1   use ABM
2446:../../MMI/Resource/ABMLoader.c ****  *  + ABM_ENC_RETURN_USE_AB2        2   use ABMv2
2447:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
2448:../../MMI/Resource/ABMLoader.c **** S32 ABM_load(
2449:../../MMI/Resource/ABMLoader.c ****         U8  *in_bmp_filename,
2450:../../MMI/Resource/ABMLoader.c ****         S32 dev_bmp_bpp,
2451:../../MMI/Resource/ABMLoader.c ****         U8  image_type,
2452:../../MMI/Resource/ABMLoader.c ****         abm_enc_option_flag_type option,
2453:../../MMI/Resource/ABMLoader.c ****         U8  *data,
2454:../../MMI/Resource/ABMLoader.c ****         S32 *size,
2455:../../MMI/Resource/ABMLoader.c ****         S32 *width,
2456:../../MMI/Resource/ABMLoader.c ****         S32 *height,
2457:../../MMI/Resource/ABMLoader.c ****         MMI_BOOL is9slice,
2458:../../MMI/Resource/ABMLoader.c ****         SetImageProcessData * processData)
2459:../../MMI/Resource/ABMLoader.c **** {
 4579              	LM505:
 4580 1f7b 55       		pushl	%ebp
 4581 1f7c 89E5     		movl	%esp, %ebp
 4582 1f7e 83EC48   		subl	$72, %esp
 4583 1f81 8B4510   		movl	16(%ebp), %eax
 4584 1f84 8845FF   		movb	%al, -1(%ebp)
2460:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2461:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
2462:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2463:../../MMI/Resource/ABMLoader.c ****     U32 input_bmp_file_size;
2464:../../MMI/Resource/ABMLoader.c ****     U32 ret = ABM_ENC_RETURN_KEEP_ORIGINAL;
 4586              	LM506:
 4587              	LBB32:
 4588 1f87 C745F400 		movl	$0, -12(%ebp)
 4588      000000
2465:../../MMI/Resource/ABMLoader.c ****     U32 ret_size = ABM_ENC_MAX_FILE_SIZE;
 4590              	LM507:
 4591 1f8e C745F0FF 		movl	$-1, -16(%ebp)
 4591      FFFFFF
2466:../../MMI/Resource/ABMLoader.c ****     ABM_Context * abm_context;
2467:../../MMI/Resource/ABMLoader.c ****     U8 *file_buf;
2468:../../MMI/Resource/ABMLoader.c ****     U32 normal_color_cnt;
2469:../../MMI/Resource/ABMLoader.c ****     U32 alpha_color_cnt;
2470:../../MMI/Resource/ABMLoader.c ****     
2471:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2472:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
2473:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2474:../../MMI/Resource/ABMLoader.c ****     /* no file format can be encode, 
2475:../../MMI/Resource/ABMLoader.c ****        do nothing and return the original format */
2476:../../MMI/Resource/ABMLoader.c ****     #if !defined(__OP01_FWPBW__) 
2477:../../MMI/Resource/ABMLoader.c ****     if (option == 0)
 4593              	LM508:
 4594 1f95 837D1400 		cmpl	$0, 20(%ebp)
 4595 1f99 750C     		jne	L273
2478:../../MMI/Resource/ABMLoader.c ****     #endif
2479:../../MMI/Resource/ABMLoader.c ****     {
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 108


2480:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_RETURN_KEEP_ORIGINAL;
 4597              	LM509:
 4598 1f9b C745D800 		movl	$0, -40(%ebp)
 4598      000000
 4599 1fa2 E9CA0300 		jmp	L272
 4599      00
 4600              	L273:
2481:../../MMI/Resource/ABMLoader.c ****     }
2482:../../MMI/Resource/ABMLoader.c **** 
2483:../../MMI/Resource/ABMLoader.c ****     /* no support bpps lower than 16-bit,
2484:../../MMI/Resource/ABMLoader.c ****        do nothing and return the original format */
2485:../../MMI/Resource/ABMLoader.c **** #if defined(DRV_MAINLCD_BIT_PER_PIXEL) && (DRV_MAINLCD_BIT_PER_PIXEL < 16)
2486:../../MMI/Resource/ABMLoader.c ****     return ABM_ENC_RETURN_KEEP_ORIGINAL;
2487:../../MMI/Resource/ABMLoader.c **** #endif
2488:../../MMI/Resource/ABMLoader.c **** 
2489:../../MMI/Resource/ABMLoader.c ****     abm_context = malloc(sizeof(ABM_Context));
 4602              	LM510:
 4603 1fa7 C7042440 		movl	$1537088, (%esp)
 4603      741700
 4604 1fae E8000000 		call	_malloc
 4604      00
 4605 1fb3 8945EC   		movl	%eax, -20(%ebp)
2490:../../MMI/Resource/ABMLoader.c ****     memset(abm_context, 0, sizeof(ABM_Context));
 4607              	LM511:
 4608 1fb6 C7442408 		movl	$1537088, 8(%esp)
 4608      40741700 
 4609 1fbe C7442404 		movl	$0, 4(%esp)
 4609      00000000 
 4610 1fc6 8B45EC   		movl	-20(%ebp), %eax
 4611 1fc9 890424   		movl	%eax, (%esp)
 4612 1fcc E8000000 		call	_memset
 4612      00
2491:../../MMI/Resource/ABMLoader.c ****     /* initialize color index table and abm encoder context */
2492:../../MMI/Resource/ABMLoader.c ****     abm_context->color_idx_tab.color_num = 0;
 4614              	LM512:
 4615 1fd1 8B45EC   		movl	-20(%ebp), %eax
 4616 1fd4 C7803474 		movl	$0, 1537076(%eax)
 4616      17000000 
 4616      0000
2493:../../MMI/Resource/ABMLoader.c ****     memset(&abm_context->abm_enc, 0, sizeof(abm_enc_struct));
 4618              	LM513:
 4619 1fde C7442408 		movl	$1076, 8(%esp)
 4619      34040000 
 4620 1fe6 C7442404 		movl	$0, 4(%esp)
 4620      00000000 
 4621 1fee 8B45EC   		movl	-20(%ebp), %eax
 4622 1ff1 890424   		movl	%eax, (%esp)
 4623 1ff4 E8000000 		call	_memset
 4623      00
2494:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_palette_bpp = ABM_PALETTE_BPP;
 4625              	LM514:
 4626 1ff9 8B45EC   		movl	-20(%ebp), %eax
 4627 1ffc C7803C74 		movl	$16, 1537084(%eax)
 4627      17001000 
 4627      0000
2495:../../MMI/Resource/ABMLoader.c **** 
2496:../../MMI/Resource/ABMLoader.c ****     abm_context->abm_enc.is_fully_opaque = 1;
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 109


 4629              	LM515:
 4630 2006 8B45EC   		movl	-20(%ebp), %eax
 4631 2009 C7803004 		movl	$1, 1072(%eax)
 4631      00000100 
 4631      0000
2497:../../MMI/Resource/ABMLoader.c **** 
2498:../../MMI/Resource/ABMLoader.c ****     /* enable source key color only for PBM and BMP */
2499:../../MMI/Resource/ABMLoader.c ****     if ((image_type == IMAGE_TYPE_DEVICE_BITMAP) || (image_type == IMAGE_TYPE_BMP))
 4633              	LM516:
 4634 2013 807DFF04 		cmpb	$4, -1(%ebp)
 4635 2017 7408     		je	L275
 4636 2019 807DFF01 		cmpb	$1, -1(%ebp)
 4637 201d 7402     		je	L275
 4638 201f EB0D     		jmp	L274
 4639              	L275:
2500:../../MMI/Resource/ABMLoader.c ****     {
2501:../../MMI/Resource/ABMLoader.c ****        abm_context->abm_enc.src_key_color_enable = 1;
 4641              	LM517:
 4642 2021 8B45EC   		movl	-20(%ebp), %eax
 4643 2024 C7802804 		movl	$1, 1064(%eax)
 4643      00000100 
 4643      0000
 4644              	L274:
2502:../../MMI/Resource/ABMLoader.c ****     }
2503:../../MMI/Resource/ABMLoader.c **** 
2504:../../MMI/Resource/ABMLoader.c ****     /* It is necessary to identify PNG to BMP or originally BMP for 32-bit BMP files. */
2505:../../MMI/Resource/ABMLoader.c ****     if (image_type != IMAGE_TYPE_PNG)
 4646              	LM518:
 4647 202e 807DFF13 		cmpb	$19, -1(%ebp)
 4648 2032 740D     		je	L276
2506:../../MMI/Resource/ABMLoader.c ****     {
2507:../../MMI/Resource/ABMLoader.c ****        abm_context->abm_enc.is_windows_bmp = 1;
 4650              	LM519:
 4651 2034 8B45EC   		movl	-20(%ebp), %eax
 4652 2037 C7802C04 		movl	$1, 1068(%eax)
 4652      00000100 
 4652      0000
 4653              	L276:
2508:../../MMI/Resource/ABMLoader.c ****     }
2509:../../MMI/Resource/ABMLoader.c **** 
2510:../../MMI/Resource/ABMLoader.c **** 
2511:../../MMI/Resource/ABMLoader.c ****     /* load input bitmap file */
2512:../../MMI/Resource/ABMLoader.c ****     file_buf = malloc(ABMENC_BMP_FILE_BUFFER_SIZE);
 4655              	LM520:
 4656 2041 C7042400 		movl	$16777216, (%esp)
 4656      000001
 4657 2048 E8000000 		call	_malloc
 4657      00
 4658 204d 8945E8   		movl	%eax, -24(%ebp)
2513:../../MMI/Resource/ABMLoader.c ****     input_bmp_file_size = load_bmp_file(file_buf, in_bmp_filename, abm_context);
 4660              	LM521:
 4661 2050 8B45EC   		movl	-20(%ebp), %eax
 4662 2053 89442408 		movl	%eax, 8(%esp)
 4663 2057 8B4508   		movl	8(%ebp), %eax
 4664 205a 89442404 		movl	%eax, 4(%esp)
 4665 205e 8B45E8   		movl	-24(%ebp), %eax
 4666 2061 890424   		movl	%eax, (%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 110


 4667 2064 E8D0E7FF 		call	_load_bmp_file
 4667      FF
 4668 2069 8945F8   		movl	%eax, -8(%ebp)
2514:../../MMI/Resource/ABMLoader.c ****     if (input_bmp_file_size == 0)
 4670              	LM522:
 4671 206c 837DF800 		cmpl	$0, -8(%ebp)
 4672 2070 7522     		jne	L277
2515:../../MMI/Resource/ABMLoader.c ****     {
2516:../../MMI/Resource/ABMLoader.c ****         free(file_buf);
 4674              	LM523:
 4675 2072 8B45E8   		movl	-24(%ebp), %eax
 4676 2075 890424   		movl	%eax, (%esp)
 4677 2078 E8000000 		call	_free
 4677      00
2517:../../MMI/Resource/ABMLoader.c ****         free(abm_context);
 4679              	LM524:
 4680 207d 8B45EC   		movl	-20(%ebp), %eax
 4681 2080 890424   		movl	%eax, (%esp)
 4682 2083 E8000000 		call	_free
 4682      00
2518:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_RETURN_KEEP_ORIGINAL;
 4684              	LM525:
 4685 2088 C745D800 		movl	$0, -40(%ebp)
 4685      000000
 4686 208f E9DD0200 		jmp	L272
 4686      00
 4687              	L277:
2519:../../MMI/Resource/ABMLoader.c ****     }
2520:../../MMI/Resource/ABMLoader.c **** 
2521:../../MMI/Resource/ABMLoader.c ****     #if defined(__RESOURCE_GEN_) && defined(__COSMOS_MMI__)
2522:../../MMI/Resource/ABMLoader.c ****     if (is9slice)
2523:../../MMI/Resource/ABMLoader.c ****     {
2524:../../MMI/Resource/ABMLoader.c ****         option &= ~ABM_ENC_OPTION_FLAG_AB2;
2525:../../MMI/Resource/ABMLoader.c ****         option |= ABM_ENC_OPTION_FLAG_24BIT;
2526:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_palette_bpp = 24;
2527:../../MMI/Resource/ABMLoader.c **** 
2528:../../MMI/Resource/ABMLoader.c ****     }
2529:../../MMI/Resource/ABMLoader.c ****     #endif
2530:../../MMI/Resource/ABMLoader.c **** 
2531:../../MMI/Resource/ABMLoader.c ****     /* Prepare image data and color table */
2532:../../MMI/Resource/ABMLoader.c ****     ret = abmenc_build_color_index_table(abm_context);
 4689              	LM526:
 4690 2094 8B45EC   		movl	-20(%ebp), %eax
 4691 2097 890424   		movl	%eax, (%esp)
 4692 209a E86BEAFF 		call	_abmenc_build_color_index_table
 4692      FF
 4693 209f 8945F4   		movl	%eax, -12(%ebp)
2533:../../MMI/Resource/ABMLoader.c **** 
2534:../../MMI/Resource/ABMLoader.c ****     /* Check whether the normal/alpha color number exceed AB2/ABM design limitation or not. */
2535:../../MMI/Resource/ABMLoader.c ****     /* If so, reduce color depth to 16bits to make sure resource can be genreated. */
2536:../../MMI/Resource/ABMLoader.c ****     normal_color_cnt    = get_normal_color_num(abm_context);
 4695              	LM527:
 4696 20a2 8B45EC   		movl	-20(%ebp), %eax
 4697 20a5 890424   		movl	%eax, (%esp)
 4698 20a8 E85DE2FF 		call	_get_normal_color_num
 4698      FF
 4699 20ad 8945E4   		movl	%eax, -28(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 111


2537:../../MMI/Resource/ABMLoader.c ****     alpha_color_cnt     = abm_context->color_idx_tab.color_num - normal_color_cnt;
 4701              	LM528:
 4702 20b0 8B45EC   		movl	-20(%ebp), %eax
 4703 20b3 8B55E4   		movl	-28(%ebp), %edx
 4704 20b6 8B803474 		movl	1537076(%eax), %eax
 4704      1700
 4705 20bc 29D0     		subl	%edx, %eax
 4706 20be 8945E0   		movl	%eax, -32(%ebp)
2538:../../MMI/Resource/ABMLoader.c ****     if (normal_color_cnt > 65535 || alpha_color_cnt > 65535)
 4708              	LM529:
 4709 20c1 817DE4FF 		cmpl	$65535, -28(%ebp)
 4709      FF0000
 4710 20c8 770E     		ja	L279
 4711 20ca 817DE0FF 		cmpl	$65535, -32(%ebp)
 4711      FF0000
 4712 20d1 7705     		ja	L279
 4713 20d3 E9110100 		jmp	L278
 4713      00
 4714              	L279:
2539:../../MMI/Resource/ABMLoader.c ****     {
2540:../../MMI/Resource/ABMLoader.c ****         free(abm_context);
 4716              	LM530:
 4717 20d8 8B45EC   		movl	-20(%ebp), %eax
 4718 20db 890424   		movl	%eax, (%esp)
 4719 20de E8000000 		call	_free
 4719      00
2541:../../MMI/Resource/ABMLoader.c ****         free(file_buf);        
 4721              	LM531:
 4722 20e3 8B45E8   		movl	-24(%ebp), %eax
 4723 20e6 890424   		movl	%eax, (%esp)
 4724 20e9 E8000000 		call	_free
 4724      00
2542:../../MMI/Resource/ABMLoader.c ****         abm_context = malloc(sizeof(ABM_Context));
 4726              	LM532:
 4727 20ee C7042440 		movl	$1537088, (%esp)
 4727      741700
 4728 20f5 E8000000 		call	_malloc
 4728      00
 4729 20fa 8945EC   		movl	%eax, -20(%ebp)
2543:../../MMI/Resource/ABMLoader.c ****         memset(abm_context, 0, sizeof(ABM_Context));
 4731              	LM533:
 4732 20fd C7442408 		movl	$1537088, 8(%esp)
 4732      40741700 
 4733 2105 C7442404 		movl	$0, 4(%esp)
 4733      00000000 
 4734 210d 8B45EC   		movl	-20(%ebp), %eax
 4735 2110 890424   		movl	%eax, (%esp)
 4736 2113 E8000000 		call	_memset
 4736      00
2544:../../MMI/Resource/ABMLoader.c ****         /* initialize color index table and abm encoder context */
2545:../../MMI/Resource/ABMLoader.c ****         abm_context->color_idx_tab.color_num = 0;
 4738              	LM534:
 4739 2118 8B45EC   		movl	-20(%ebp), %eax
 4740 211b C7803474 		movl	$0, 1537076(%eax)
 4740      17000000 
 4740      0000
2546:../../MMI/Resource/ABMLoader.c ****         memset(&abm_context->abm_enc, 0, sizeof(abm_enc_struct));
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 112


 4742              	LM535:
 4743 2125 C7442408 		movl	$1076, 8(%esp)
 4743      34040000 
 4744 212d C7442404 		movl	$0, 4(%esp)
 4744      00000000 
 4745 2135 8B45EC   		movl	-20(%ebp), %eax
 4746 2138 890424   		movl	%eax, (%esp)
 4747 213b E8000000 		call	_memset
 4747      00
2547:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_palette_bpp = 16;
 4749              	LM536:
 4750 2140 8B45EC   		movl	-20(%ebp), %eax
 4751 2143 C7803C74 		movl	$16, 1537084(%eax)
 4751      17001000 
 4751      0000
2548:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_enc.is_fully_opaque = 1;
 4753              	LM537:
 4754 214d 8B45EC   		movl	-20(%ebp), %eax
 4755 2150 C7803004 		movl	$1, 1072(%eax)
 4755      00000100 
 4755      0000
2549:../../MMI/Resource/ABMLoader.c **** 
2550:../../MMI/Resource/ABMLoader.c ****         /* enable source key color only for PBM and BMP */
2551:../../MMI/Resource/ABMLoader.c ****         if ((image_type == IMAGE_TYPE_DEVICE_BITMAP) || (image_type == IMAGE_TYPE_BMP))
 4757              	LM538:
 4758 215a 807DFF04 		cmpb	$4, -1(%ebp)
 4759 215e 7408     		je	L281
 4760 2160 807DFF01 		cmpb	$1, -1(%ebp)
 4761 2164 7402     		je	L281
 4762 2166 EB0D     		jmp	L280
 4763              	L281:
2552:../../MMI/Resource/ABMLoader.c ****         {
2553:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.src_key_color_enable = 1;
 4765              	LM539:
 4766 2168 8B45EC   		movl	-20(%ebp), %eax
 4767 216b C7802804 		movl	$1, 1064(%eax)
 4767      00000100 
 4767      0000
 4768              	L280:
2554:../../MMI/Resource/ABMLoader.c ****         }
2555:../../MMI/Resource/ABMLoader.c **** 
2556:../../MMI/Resource/ABMLoader.c ****         /* It is necessary to identify PNG to BMP or originally BMP for 32-bit BMP files. */
2557:../../MMI/Resource/ABMLoader.c ****         if (image_type != IMAGE_TYPE_PNG)
 4770              	LM540:
 4771 2175 807DFF13 		cmpb	$19, -1(%ebp)
 4772 2179 740D     		je	L282
2558:../../MMI/Resource/ABMLoader.c ****         {
2559:../../MMI/Resource/ABMLoader.c ****             abm_context->abm_enc.is_windows_bmp = 1;
 4774              	LM541:
 4775 217b 8B45EC   		movl	-20(%ebp), %eax
 4776 217e C7802C04 		movl	$1, 1068(%eax)
 4776      00000100 
 4776      0000
 4777              	L282:
2560:../../MMI/Resource/ABMLoader.c ****         }
2561:../../MMI/Resource/ABMLoader.c **** 
2562:../../MMI/Resource/ABMLoader.c ****         /* load input bitmap file */
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 113


2563:../../MMI/Resource/ABMLoader.c ****         file_buf = malloc(ABMENC_BMP_FILE_BUFFER_SIZE);
 4779              	LM542:
 4780 2188 C7042400 		movl	$16777216, (%esp)
 4780      000001
 4781 218f E8000000 		call	_malloc
 4781      00
 4782 2194 8945E8   		movl	%eax, -24(%ebp)
2564:../../MMI/Resource/ABMLoader.c ****         input_bmp_file_size = load_bmp_file(file_buf, in_bmp_filename, abm_context);
 4784              	LM543:
 4785 2197 8B45EC   		movl	-20(%ebp), %eax
 4786 219a 89442408 		movl	%eax, 8(%esp)
 4787 219e 8B4508   		movl	8(%ebp), %eax
 4788 21a1 89442404 		movl	%eax, 4(%esp)
 4789 21a5 8B45E8   		movl	-24(%ebp), %eax
 4790 21a8 890424   		movl	%eax, (%esp)
 4791 21ab E889E6FF 		call	_load_bmp_file
 4791      FF
 4792 21b0 8945F8   		movl	%eax, -8(%ebp)
2565:../../MMI/Resource/ABMLoader.c ****         if (input_bmp_file_size == 0)
 4794              	LM544:
 4795 21b3 837DF800 		cmpl	$0, -8(%ebp)
 4796 21b7 7522     		jne	L283
2566:../../MMI/Resource/ABMLoader.c ****         {
2567:../../MMI/Resource/ABMLoader.c ****             free(file_buf);
 4798              	LM545:
 4799 21b9 8B45E8   		movl	-24(%ebp), %eax
 4800 21bc 890424   		movl	%eax, (%esp)
 4801 21bf E8000000 		call	_free
 4801      00
2568:../../MMI/Resource/ABMLoader.c ****             free(abm_context);
 4803              	LM546:
 4804 21c4 8B45EC   		movl	-20(%ebp), %eax
 4805 21c7 890424   		movl	%eax, (%esp)
 4806 21ca E8000000 		call	_free
 4806      00
2569:../../MMI/Resource/ABMLoader.c ****             return ABM_ENC_RETURN_KEEP_ORIGINAL;
 4808              	LM547:
 4809 21cf C745D800 		movl	$0, -40(%ebp)
 4809      000000
 4810 21d6 E9960100 		jmp	L272
 4810      00
 4811              	L283:
2570:../../MMI/Resource/ABMLoader.c ****         }
2571:../../MMI/Resource/ABMLoader.c **** 
2572:../../MMI/Resource/ABMLoader.c ****         ret = abmenc_build_color_index_table(abm_context);        
 4813              	LM548:
 4814 21db 8B45EC   		movl	-20(%ebp), %eax
 4815 21de 890424   		movl	%eax, (%esp)
 4816 21e1 E824E9FF 		call	_abmenc_build_color_index_table
 4816      FF
 4817 21e6 8945F4   		movl	%eax, -12(%ebp)
 4818              	L278:
2573:../../MMI/Resource/ABMLoader.c ****     }
2574:../../MMI/Resource/ABMLoader.c ****     
2575:../../MMI/Resource/ABMLoader.c ****     /* Save color number for image information report */
2576:../../MMI/Resource/ABMLoader.c ****     if(processData!=NULL){
 4820              	LM549:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 114


 4821 21e9 837D2C00 		cmpl	$0, 44(%ebp)
 4822 21ed 7412     		je	L284
2577:../../MMI/Resource/ABMLoader.c ****         processData->color_num = abm_context->color_idx_tab.color_num;
 4824              	LM550:
 4825 21ef 8B452C   		movl	44(%ebp), %eax
 4826 21f2 8B55EC   		movl	-20(%ebp), %edx
 4827 21f5 8B923474 		movl	1537076(%edx), %edx
 4827      1700
 4828 21fb 89901802 		movl	%edx, 536(%eax)
 4828      0000
 4829              	L284:
2578:../../MMI/Resource/ABMLoader.c ****     }
2579:../../MMI/Resource/ABMLoader.c ****     
2580:../../MMI/Resource/ABMLoader.c ****     if (ret != ABM_ENC_OK)
 4831              	LM551:
 4832 2201 837DF403 		cmpl	$3, -12(%ebp)
 4833 2205 7445     		je	L285
2581:../../MMI/Resource/ABMLoader.c ****     {
2582:../../MMI/Resource/ABMLoader.c ****         free(file_buf);
 4835              	LM552:
 4836 2207 8B45E8   		movl	-24(%ebp), %eax
 4837 220a 890424   		movl	%eax, (%esp)
 4838 220d E8000000 		call	_free
 4838      00
2583:../../MMI/Resource/ABMLoader.c ****         free(abm_context);
 4840              	LM553:
 4841 2212 8B45EC   		movl	-20(%ebp), %eax
 4842 2215 890424   		movl	%eax, (%esp)
 4843 2218 E8000000 		call	_free
 4843      00
2584:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_E("[ABM enc] Unique color number exceed limitation(384000):%s", in_bmp_filename)
 4845              	LM554:
 4846 221d 8B4508   		movl	8(%ebp), %eax
 4847 2220 8944240C 		movl	%eax, 12(%esp)
 4848 2224 C7442408 		movl	$LC27, 8(%esp)
 4848      401F0000 
 4849 222c C7442404 		movl	$LC23, 4(%esp)
 4849      C8070000 
 4850 2234 C7042403 		movl	$3, (%esp)
 4850      000000
 4851 223b E8000000 		call	_reslog_adaptor_log
 4851      00
2585:../../MMI/Resource/ABMLoader.c ****         return  ABM_ENC_INPUT_BITMAP_ERROR;
 4853              	LM555:
 4854 2240 C745D8FE 		movl	$-2, -40(%ebp)
 4854      FFFFFF
 4855 2247 E9250100 		jmp	L272
 4855      00
 4856              	L285:
2586:../../MMI/Resource/ABMLoader.c ****     }
2587:../../MMI/Resource/ABMLoader.c ****     *width  = abm_context->abm_enc.bmp_width;
 4858              	LM556:
 4859 224c 8B5520   		movl	32(%ebp), %edx
 4860 224f 8B45EC   		movl	-20(%ebp), %eax
 4861 2252 8B00     		movl	(%eax), %eax
 4862 2254 8902     		movl	%eax, (%edx)
2588:../../MMI/Resource/ABMLoader.c ****     *height = abm_context->abm_enc.bmp_height;
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 115


 4864              	LM557:
 4865 2256 8B5524   		movl	36(%ebp), %edx
 4866 2259 8B45EC   		movl	-20(%ebp), %eax
 4867 225c 8B4004   		movl	4(%eax), %eax
 4868 225f 8902     		movl	%eax, (%edx)
2589:../../MMI/Resource/ABMLoader.c **** 
2590:../../MMI/Resource/ABMLoader.c **** 
2591:../../MMI/Resource/ABMLoader.c ****     do
2592:../../MMI/Resource/ABMLoader.c ****     {
2593:../../MMI/Resource/ABMLoader.c **** 
2594:../../MMI/Resource/ABMLoader.c ****     #if defined(__COSMOS_MMI__)
2595:../../MMI/Resource/ABMLoader.c ****     if (option & ABM_ENC_OPTION_FLAG_24BIT)
2596:../../MMI/Resource/ABMLoader.c ****     {  
2597:../../MMI/Resource/ABMLoader.c ****         ret_size = abmenc_encode(data, abm_context);
2598:../../MMI/Resource/ABMLoader.c ****         ret = ABM_ENC_RETURN_USE_ABM; 
2599:../../MMI/Resource/ABMLoader.c ****         break;
2600:../../MMI/Resource/ABMLoader.c ****     }  
2601:../../MMI/Resource/ABMLoader.c ****     #endif
2602:../../MMI/Resource/ABMLoader.c ****     
2603:../../MMI/Resource/ABMLoader.c **** //#if (MAIN_MEDIA_LAYER_BITS_PER_PIXEL != 24)
2604:../../MMI/Resource/ABMLoader.c ****     /* check if AB2 size is smaller */
2605:../../MMI/Resource/ABMLoader.c ****     if (option & ABM_ENC_OPTION_FLAG_AB2)
 4870              	LM558:
 4871 2261 8B4514   		movl	20(%ebp), %eax
 4872 2264 83E004   		andl	$4, %eax
 4873 2267 85C0     		testl	%eax, %eax
 4874 2269 742A     		je	L287
2606:../../MMI/Resource/ABMLoader.c ****     {
2607:../../MMI/Resource/ABMLoader.c ****         U32 ab2_size = ab2enc_encode(data, abm_context);
 4876              	LM559:
 4877              	LBB33:
 4878 226b 8B45EC   		movl	-20(%ebp), %eax
 4879 226e 89442404 		movl	%eax, 4(%esp)
 4880 2272 8B4518   		movl	24(%ebp), %eax
 4881 2275 890424   		movl	%eax, (%esp)
 4882 2278 E80AF6FF 		call	_ab2enc_encode
 4882      FF
 4883 227d 8945DC   		movl	%eax, -36(%ebp)
2608:../../MMI/Resource/ABMLoader.c ****         if (ab2_size < ret_size)
 4885              	LM560:
 4886 2280 8B45DC   		movl	-36(%ebp), %eax
 4887 2283 3B45F0   		cmpl	-16(%ebp), %eax
 4888 2286 730D     		jae	L287
2609:../../MMI/Resource/ABMLoader.c ****         {
2610:../../MMI/Resource/ABMLoader.c ****             ret_size = ab2_size;
 4890              	LM561:
 4891 2288 8B45DC   		movl	-36(%ebp), %eax
 4892 228b 8945F0   		movl	%eax, -16(%ebp)
2611:../../MMI/Resource/ABMLoader.c ****             ret = ABM_ENC_RETURN_USE_AB2; 
 4894              	LM562:
 4895 228e C745F402 		movl	$2, -12(%ebp)
 4895      000000
 4896              	L287:
2612:../../MMI/Resource/ABMLoader.c ****         }
2613:../../MMI/Resource/ABMLoader.c ****     }
2614:../../MMI/Resource/ABMLoader.c **** //#endif
2615:../../MMI/Resource/ABMLoader.c ****     
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 116


2616:../../MMI/Resource/ABMLoader.c ****     /* check if ABM size is smaller */
2617:../../MMI/Resource/ABMLoader.c ****     if (option & ABM_ENC_OPTION_FLAG_ABM)
 4898              	LM563:
 4899 2295 8B4514   		movl	20(%ebp), %eax
 4900              	LBE33:
 4901 2298 83E002   		andl	$2, %eax
 4902 229b 85C0     		testl	%eax, %eax
 4903 229d 7432     		je	L289
2618:../../MMI/Resource/ABMLoader.c ****     {
2619:../../MMI/Resource/ABMLoader.c ****         U32 abm_size = caculate_abm_size(abm_context);
 4905              	LM564:
 4906              	LBB34:
 4907 229f 8B45EC   		movl	-20(%ebp), %eax
 4908 22a2 890424   		movl	%eax, (%esp)
 4909 22a5 E8A5FBFF 		call	_caculate_abm_size
 4909      FF
 4910 22aa 8945DC   		movl	%eax, -36(%ebp)
2620:../../MMI/Resource/ABMLoader.c ****         if (abm_size < ret_size)
 4912              	LM565:
 4913 22ad 8B45DC   		movl	-36(%ebp), %eax
 4914 22b0 3B45F0   		cmpl	-16(%ebp), %eax
 4915 22b3 731C     		jae	L289
2621:../../MMI/Resource/ABMLoader.c ****         {
2622:../../MMI/Resource/ABMLoader.c ****             ret_size = abmenc_encode(data, abm_context);
 4917              	LM566:
 4918 22b5 8B45EC   		movl	-20(%ebp), %eax
 4919 22b8 89442404 		movl	%eax, 4(%esp)
 4920 22bc 8B4518   		movl	24(%ebp), %eax
 4921 22bf 890424   		movl	%eax, (%esp)
 4922 22c2 E892F6FF 		call	_abmenc_encode
 4922      FF
 4923 22c7 8945F0   		movl	%eax, -16(%ebp)
2623:../../MMI/Resource/ABMLoader.c ****             ret = ABM_ENC_RETURN_USE_ABM; 
 4925              	LM567:
 4926 22ca C745F401 		movl	$1, -12(%ebp)
 4926      000000
 4927              	L289:
2624:../../MMI/Resource/ABMLoader.c ****         }
2625:../../MMI/Resource/ABMLoader.c ****     }
2626:../../MMI/Resource/ABMLoader.c **** 
2627:../../MMI/Resource/ABMLoader.c ****     /* check if original size is smaller */
2628:../../MMI/Resource/ABMLoader.c ****     if (option & ABM_ENC_OPTION_FLAG_ORIGINAL)
 4929              	LM568:
 4930 22d1 8B4514   		movl	20(%ebp), %eax
 4931              	LBE34:
 4932 22d4 83E001   		andl	$1, %eax
 4933 22d7 85C0     		testl	%eax, %eax
 4934 22d9 7432     		je	L286
2629:../../MMI/Resource/ABMLoader.c ****     {
2630:../../MMI/Resource/ABMLoader.c ****         switch (image_type)
 4936              	LM569:
 4937 22db 0FB645FF 		movzbl	-1(%ebp), %eax
 4938 22df 8945D4   		movl	%eax, -44(%ebp)
 4939 22e2 837DD404 		cmpl	$4, -44(%ebp)
 4940 22e6 7425     		je	L286
 4941 22e8 837DD404 		cmpl	$4, -44(%ebp)
 4942 22ec 7F08     		jg	L299
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 117


 4943 22ee 837DD401 		cmpl	$1, -44(%ebp)
 4944 22f2 7404     		je	L294
 4945 22f4 EB17     		jmp	L286
 4946              	L299:
 4947 22f6 EB15     		jmp	L286
 4948              	L294:
2631:../../MMI/Resource/ABMLoader.c ****         {
2632:../../MMI/Resource/ABMLoader.c ****             case IMAGE_TYPE_PNG:
2633:../../MMI/Resource/ABMLoader.c ****             {
2634:../../MMI/Resource/ABMLoader.c ****                 /* no information, do nothing */ 
2635:../../MMI/Resource/ABMLoader.c ****                 break;
2636:../../MMI/Resource/ABMLoader.c ****             }
2637:../../MMI/Resource/ABMLoader.c **** 
2638:../../MMI/Resource/ABMLoader.c ****             case IMAGE_TYPE_BMP:
2639:../../MMI/Resource/ABMLoader.c ****             {
2640:../../MMI/Resource/ABMLoader.c ****                 if (input_bmp_file_size < ret_size)
 4950              	LM570:
 4951 22f8 8B45F8   		movl	-8(%ebp), %eax
 4952 22fb 3B45F0   		cmpl	-16(%ebp), %eax
 4953 22fe 730D     		jae	L286
2641:../../MMI/Resource/ABMLoader.c ****                 {
2642:../../MMI/Resource/ABMLoader.c ****                     ret_size = input_bmp_file_size;
 4955              	LM571:
 4956 2300 8B45F8   		movl	-8(%ebp), %eax
 4957 2303 8945F0   		movl	%eax, -16(%ebp)
2643:../../MMI/Resource/ABMLoader.c ****                     ret = ABM_ENC_RETURN_KEEP_ORIGINAL; 
 4959              	LM572:
 4960 2306 C745F400 		movl	$0, -12(%ebp)
 4960      000000
 4961              	L286:
2644:../../MMI/Resource/ABMLoader.c ****                 }        
2645:../../MMI/Resource/ABMLoader.c ****                 break;
2646:../../MMI/Resource/ABMLoader.c ****             }
2647:../../MMI/Resource/ABMLoader.c ****                 
2648:../../MMI/Resource/ABMLoader.c ****             case IMAGE_TYPE_DEVICE_BITMAP:
2649:../../MMI/Resource/ABMLoader.c ****             {   
2650:../../MMI/Resource/ABMLoader.c ****                 /*
2651:../../MMI/Resource/ABMLoader.c ****                 U32 pbm_size = caculate_pbm_size(*width, *height, dev_bmp_bpp);
2652:../../MMI/Resource/ABMLoader.c ****                 if (pbm_size < ret_size)
2653:../../MMI/Resource/ABMLoader.c ****                 {
2654:../../MMI/Resource/ABMLoader.c ****                     ret_size = pbm_size;
2655:../../MMI/Resource/ABMLoader.c ****                     ret = ABM_ENC_RETURN_KEEP_ORIGINAL; 
2656:../../MMI/Resource/ABMLoader.c ****                 }
2657:../../MMI/Resource/ABMLoader.c ****                 */
2658:../../MMI/Resource/ABMLoader.c ****                 break;           
2659:../../MMI/Resource/ABMLoader.c ****             }
2660:../../MMI/Resource/ABMLoader.c ****                 
2661:../../MMI/Resource/ABMLoader.c ****             default:
2662:../../MMI/Resource/ABMLoader.c ****                 /* not supported, do nothing */
2663:../../MMI/Resource/ABMLoader.c ****                 break;
2664:../../MMI/Resource/ABMLoader.c ****         }
2665:../../MMI/Resource/ABMLoader.c ****     } /* if (option & ABM_ENC_OPTION_FLAG_ORIGINAL) */
2666:../../MMI/Resource/ABMLoader.c **** 
2667:../../MMI/Resource/ABMLoader.c ****     }while(0);
2668:../../MMI/Resource/ABMLoader.c **** 
2669:../../MMI/Resource/ABMLoader.c ****     #if defined(__RESOURCE_GEN_) && defined(__COSMOS_MMI__)
2670:../../MMI/Resource/ABMLoader.c **** 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 118


2671:../../MMI/Resource/ABMLoader.c ****     if (is9slice)
2672:../../MMI/Resource/ABMLoader.c ****     {
2673:../../MMI/Resource/ABMLoader.c ****         abm_context->abm_palette_bpp = ABM_PALETTE_BPP;
2674:../../MMI/Resource/ABMLoader.c **** 
2675:../../MMI/Resource/ABMLoader.c ****     }
2676:../../MMI/Resource/ABMLoader.c ****     #endif
2677:../../MMI/Resource/ABMLoader.c **** 
2678:../../MMI/Resource/ABMLoader.c ****     /* Error handling */
2679:../../MMI/Resource/ABMLoader.c ****     if (ret_size == ABM_ENC_MAX_FILE_SIZE)
 4963              	LM573:
 4964 230d 837DF0FF 		cmpl	$-1, -16(%ebp)
 4965 2311 753A     		jne	L300
2680:../../MMI/Resource/ABMLoader.c ****     {
2681:../../MMI/Resource/ABMLoader.c ****         *width = 0;
 4967              	LM574:
 4968 2313 8B4520   		movl	32(%ebp), %eax
 4969 2316 C7000000 		movl	$0, (%eax)
 4969      0000
2682:../../MMI/Resource/ABMLoader.c ****         *height = 0;
 4971              	LM575:
 4972 231c 8B4524   		movl	36(%ebp), %eax
 4973 231f C7000000 		movl	$0, (%eax)
 4973      0000
2683:../../MMI/Resource/ABMLoader.c ****         *size = 0;
 4975              	LM576:
 4976 2325 8B451C   		movl	28(%ebp), %eax
 4977 2328 C7000000 		movl	$0, (%eax)
 4977      0000
2684:../../MMI/Resource/ABMLoader.c ****         free(file_buf);
 4979              	LM577:
 4980 232e 8B45E8   		movl	-24(%ebp), %eax
 4981 2331 890424   		movl	%eax, (%esp)
 4982 2334 E8000000 		call	_free
 4982      00
2685:../../MMI/Resource/ABMLoader.c ****         free(abm_context);
 4984              	LM578:
 4985 2339 8B45EC   		movl	-20(%ebp), %eax
 4986 233c 890424   		movl	%eax, (%esp)
 4987 233f E8000000 		call	_free
 4987      00
2686:../../MMI/Resource/ABMLoader.c ****         return ABM_ENC_RETURN_KEEP_ORIGINAL;
 4989              	LM579:
 4990 2344 C745D800 		movl	$0, -40(%ebp)
 4990      000000
 4991 234b EB24     		jmp	L272
 4992              	L300:
2687:../../MMI/Resource/ABMLoader.c ****     }
2688:../../MMI/Resource/ABMLoader.c **** 
2689:../../MMI/Resource/ABMLoader.c ****     *size = (S32)ret_size;
 4994              	LM580:
 4995 234d 8B551C   		movl	28(%ebp), %edx
 4996 2350 8B45F0   		movl	-16(%ebp), %eax
 4997 2353 8902     		movl	%eax, (%edx)
2690:../../MMI/Resource/ABMLoader.c **** 
2691:../../MMI/Resource/ABMLoader.c ****     free(file_buf);
 4999              	LM581:
 5000 2355 8B45E8   		movl	-24(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 119


 5001 2358 890424   		movl	%eax, (%esp)
 5002 235b E8000000 		call	_free
 5002      00
2692:../../MMI/Resource/ABMLoader.c ****     free(abm_context);
 5004              	LM582:
 5005 2360 8B45EC   		movl	-20(%ebp), %eax
 5006 2363 890424   		movl	%eax, (%esp)
 5007 2366 E8000000 		call	_free
 5007      00
2693:../../MMI/Resource/ABMLoader.c ****     return ret;
 5009              	LM583:
 5010 236b 8B45F4   		movl	-12(%ebp), %eax
 5011 236e 8945D8   		movl	%eax, -40(%ebp)
2694:../../MMI/Resource/ABMLoader.c **** }
 5013              	LM584:
 5014              	L272:
 5015              	LBE32:
 5016 2371 8B45D8   		movl	-40(%ebp), %eax
 5017 2374 C9       		leave
 5018 2375 C3       		ret
 5035              	Lscope26:
 5037              	LC28:
 5038 2376 41424D4C 		.ascii "ABMLoader: trying to load %s\0"
 5038      6F616465 
 5038      723A2074 
 5038      7279696E 
 5038      6720746F 
 5039              	LC29:
 5040 2393 5B41424D 		.ascii "[ABMLoader][%s] quality = %d\12\0"
 5040      4C6F6164 
 5040      65725D5B 
 5040      25735D20 
 5040      7175616C 
 5041              	LC30:
 5042 23b1 696D6167 		.ascii "image is too big:%s\12\0"
 5042      65206973 
 5042      20746F6F 
 5042      20626967 
 5042      3A25730A 
 5043              	LC31:
 5044 23c6 77622B00 		.ascii "wb+\0"
 5045              	LC32:
 5046 23ca 0A457272 		.ascii "\12Error creating %s\0"
 5046      6F722063 
 5046      72656174 
 5046      696E6720 
 5046      257300
 5047              	LC33:
 5048 23dd 256300   		.ascii "%c\0"
 5049              	LC34:
 5050 23e0 25632563 		.ascii "%c%c%c\0"
 5050      256300
 5051              	LC35:
 5052 23e7 7B0A0900 		.ascii "{\12\11\0"
 5053              	LC36:
 5054 23eb 30782530 		.ascii "0x%02X, \0"
 5054      32582C20 
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 120


 5054      00
 5055 23f4 8DB60000 		.align 32
 5055      00008DBF 
 5055      00000000 
 5056              	LC37:
 5057 2400 30782530 		.ascii "0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X,\0"
 5057      32582C20 
 5057      30782530 
 5057      32582C20 
 5057      30782530 
 5058              	LC38:
 5059 2430 0A0900   		.ascii "\12\11\0"
 5060              	LC39:
 5061 2433 0A7D3B00 		.ascii "\12};\0"
 5069              	.globl _ABMLoader
 5071              	_ABMLoader:
2695:../../MMI/Resource/ABMLoader.c **** 
2696:../../MMI/Resource/ABMLoader.c **** 
2697:../../MMI/Resource/ABMLoader.c **** /* 
2698:../../MMI/Resource/ABMLoader.c ****  * RESOURCE GENERATOR ONLY FUNCTIONS
2699:../../MMI/Resource/ABMLoader.c ****  */
2700:../../MMI/Resource/ABMLoader.c **** #if defined(__RESOURCE_GEN_)
2701:../../MMI/Resource/ABMLoader.c **** 
2702:../../MMI/Resource/ABMLoader.c **** #ifdef ABM_ENC_UNIT_TEST
2703:../../MMI/Resource/ABMLoader.c **** #include <time.h>
2704:../../MMI/Resource/ABMLoader.c **** /* 
2705:../../MMI/Resource/ABMLoader.c ****  * unit test for abm encoder
2706:../../MMI/Resource/ABMLoader.c ****  *
2707:../../MMI/Resource/ABMLoader.c ****  * return 0: successful, otherwise: failed
2708:../../MMI/Resource/ABMLoader.c ****  */
2709:../../MMI/Resource/ABMLoader.c **** S32 abmenc_unit_test(void)
2710:../../MMI/Resource/ABMLoader.c **** {
2711:../../MMI/Resource/ABMLoader.c ****     S32 si, i;
2712:../../MMI/Resource/ABMLoader.c **** 
2713:../../MMI/Resource/ABMLoader.c ****     abm_context->color_idx_tab.color_num = 0;
2714:../../MMI/Resource/ABMLoader.c ****     srand((unsigned)time(NULL));
2715:../../MMI/Resource/ABMLoader.c **** 
2716:../../MMI/Resource/ABMLoader.c ****     si = search_color(ARGB(255, 255, 255, 255));
2717:../../MMI/Resource/ABMLoader.c ****     add_color_if_new(ARGB(255, 255, 255, 255));
2718:../../MMI/Resource/ABMLoader.c ****     si = search_color(ARGB(255, 255, 255, 255));
2719:../../MMI/Resource/ABMLoader.c ****     add_color_if_new(ARGB(255, 255, 255, 254));
2720:../../MMI/Resource/ABMLoader.c ****     si = search_color(ARGB(255, 255, 255, 0));
2721:../../MMI/Resource/ABMLoader.c ****     add_color_if_new(ARGB(0, 255, 255, 254));
2722:../../MMI/Resource/ABMLoader.c ****     si = search_color(ARGB(255, 255, 255, 254));
2723:../../MMI/Resource/ABMLoader.c **** 
2724:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < 1000; i++)
2725:../../MMI/Resource/ABMLoader.c ****     {
2726:../../MMI/Resource/ABMLoader.c ****         add_color_if_new(rand());
2727:../../MMI/Resource/ABMLoader.c ****     }
2728:../../MMI/Resource/ABMLoader.c **** 
2729:../../MMI/Resource/ABMLoader.c ****     /* make sure the color table is descending */        
2730:../../MMI/Resource/ABMLoader.c ****     for (i = 0; i < abm_context->color_idx_tab.color_num - 1; i++)
2731:../../MMI/Resource/ABMLoader.c ****     {        
2732:../../MMI/Resource/ABMLoader.c ****         if (abm_context->color_idx_tab.color_table[i + 1] > abm_context->color_idx_tab.color_table[
2733:../../MMI/Resource/ABMLoader.c ****         {
2734:../../MMI/Resource/ABMLoader.c ****             return ABMENC_UNIT_TEST_FAILED;
2735:../../MMI/Resource/ABMLoader.c ****         }
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 121


2736:../../MMI/Resource/ABMLoader.c ****     }
2737:../../MMI/Resource/ABMLoader.c **** 
2738:../../MMI/Resource/ABMLoader.c ****     return ABMENC_UNIT_TEST_SUCCESSFUL;
2739:../../MMI/Resource/ABMLoader.c **** }
2740:../../MMI/Resource/ABMLoader.c **** #endif /* ABM_ENC_UNIT_TEST */
2741:../../MMI/Resource/ABMLoader.c **** 
2742:../../MMI/Resource/ABMLoader.c **** #if defined(__MMI_RESOURCE_IMAGE_COMPRESS__)
2743:../../MMI/Resource/ABMLoader.c **** extern U8* mmi_rg_compress_image(U8 *buffer, S32 org_size, S32 *dest_size, S32 image_type, U32 widt
2744:../../MMI/Resource/ABMLoader.c **** extern U8* mmi_rg_output_compressed_image(U8 *dest_buf, S32 dest_size,  FILE *outfile);
2745:../../MMI/Resource/ABMLoader.c **** #endif /* __MMI_RESOURCE_IMAGE_COMPRESS__ */
2746:../../MMI/Resource/ABMLoader.c **** 
2747:../../MMI/Resource/ABMLoader.c **** /*****************************************************************************
2748:../../MMI/Resource/ABMLoader.c ****  * FUNCTION
2749:../../MMI/Resource/ABMLoader.c ****  *  ABMLoader
2750:../../MMI/Resource/ABMLoader.c ****  * DESCRIPTION
2751:../../MMI/Resource/ABMLoader.c ****  *  ABM loader
2752:../../MMI/Resource/ABMLoader.c ****  * PARAMETERS
2753:../../MMI/Resource/ABMLoader.c ****  *  in_filename     [IN] input filename
2754:../../MMI/Resource/ABMLoader.c ****  *  out_filename    [IN] output filename
2755:../../MMI/Resource/ABMLoader.c ****  *  encode_option   [IN] encode options
2756:../../MMI/Resource/ABMLoader.c ****  * RETURNS
2757:../../MMI/Resource/ABMLoader.c ****  *  return value
2758:../../MMI/Resource/ABMLoader.c ****  *****************************************************************************/
2759:../../MMI/Resource/ABMLoader.c **** S32 ABMLoader(U8 *in_filename, U8 *out_filename, S32 encode_option, MMI_BOOL is9slice, U8* _9slice_
2760:../../MMI/Resource/ABMLoader.c **** {
 5073              	LM585:
 5074 2437 55       		pushl	%ebp
 5075 2438 89E5     		movl	%esp, %ebp
 5076 243a 83EC78   		subl	$120, %esp
2761:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2762:../../MMI/Resource/ABMLoader.c ****     /* Local Variables                                                */
2763:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2764:../../MMI/Resource/ABMLoader.c ****     U8 *buffer = NULL/*[ABMENC_BMP_FILE_BUFFER_SIZE]*/;
 5078              	LM586:
 5079              	LBB35:
 5080 243d C745FC00 		movl	$0, -4(%ebp)
 5080      000000
2765:../../MMI/Resource/ABMLoader.c ****     S32 width, height, size, ret, i;
2766:../../MMI/Resource/ABMLoader.c ****     U32 width_height;
2767:../../MMI/Resource/ABMLoader.c ****     FILE *outfile;
2768:../../MMI/Resource/ABMLoader.c ****     U8 image_type = 0;
 5082              	LM587:
 5083 2444 C645DF00 		movb	$0, -33(%ebp)
2769:../../MMI/Resource/ABMLoader.c **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
2770:../../MMI/Resource/ABMLoader.c ****     U32 enfb_width, enfb_height;
2771:../../MMI/Resource/ABMLoader.c ****     S32 enfb_ret;
2772:../../MMI/Resource/ABMLoader.c **** #endif
2773:../../MMI/Resource/ABMLoader.c ****     S32 data_size;
2774:../../MMI/Resource/ABMLoader.c ****     // The quality may be OFFLINE_IMAGE_PARAM_QUALITY_HIGH, OFFLINE_IMAGE_PARAM_QUALITY_MEDIUM or O
2775:../../MMI/Resource/ABMLoader.c ****     S32 quality = OFFLINE_IMAGE_PARAM_QUALITY_MEDIUM;
 5085              	LM588:
 5086 2448 C745D401 		movl	$1, -44(%ebp)
 5086      000000
2776:../../MMI/Resource/ABMLoader.c **** 
2777:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
2778:../../MMI/Resource/ABMLoader.c ****     /* Code Body                                                      */
2779:../../MMI/Resource/ABMLoader.c ****     /*----------------------------------------------------------------*/
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 122


2780:../../MMI/Resource/ABMLoader.c ****     if(in_filename != NULL)
 5088              	LM589:
 5089 244f 837D0800 		cmpl	$0, 8(%ebp)
 5090 2453 7423     		je	L302
2781:../../MMI/Resource/ABMLoader.c ****     {
2782:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_V("ABMLoader: trying to load %s", in_filename);
 5092              	LM590:
 5093 2455 8B4508   		movl	8(%ebp), %eax
 5094 2458 8944240C 		movl	%eax, 12(%esp)
 5095 245c C7442408 		movl	$LC28, 8(%esp)
 5095      76230000 
 5096 2464 C7442404 		movl	$LC23, 4(%esp)
 5096      C8070000 
 5097 246c C7042401 		movl	$1, (%esp)
 5097      000000
 5098 2473 E8000000 		call	_reslog_adaptor_log
 5098      00
 5099              	L302:
2783:../../MMI/Resource/ABMLoader.c ****     }
2784:../../MMI/Resource/ABMLoader.c ****     
2785:../../MMI/Resource/ABMLoader.c ****     /* reduce call stack size and avoid the risk of ABMENC_BMP_FILE_BUFFER_SIZE increase */
2786:../../MMI/Resource/ABMLoader.c ****     buffer = malloc(ABMENC_BMP_FILE_BUFFER_SIZE);
 5101              	LM591:
 5102 2478 C7042400 		movl	$16777216, (%esp)
 5102      000001
 5103 247f E8000000 		call	_malloc
 5103      00
 5104 2484 8945FC   		movl	%eax, -4(%ebp)
2787:../../MMI/Resource/ABMLoader.c ****     memset(buffer, 0, ABMENC_BMP_FILE_BUFFER_SIZE);
 5106              	LM592:
 5107 2487 C7442408 		movl	$16777216, 8(%esp)
 5107      00000001 
 5108 248f C7442404 		movl	$0, 4(%esp)
 5108      00000000 
 5109 2497 8B45FC   		movl	-4(%ebp), %eax
 5110 249a 890424   		movl	%eax, (%esp)
 5111 249d E8000000 		call	_memset
 5111      00
2788:../../MMI/Resource/ABMLoader.c **** 
2789:../../MMI/Resource/ABMLoader.c ****     /* Retrive quality passed from Resgen*/
2790:../../MMI/Resource/ABMLoader.c ****     quality = processData->quality;
 5113              	LM593:
 5114 24a2 8B451C   		movl	28(%ebp), %eax
 5115 24a5 8B801402 		movl	532(%eax), %eax
 5115      0000
 5116 24ab 8945D4   		movl	%eax, -44(%ebp)
2791:../../MMI/Resource/ABMLoader.c ****     ABMLDR_LOG_D("[ABMLoader][%s] quality = %d\n",in_filename, quality);
 5118              	LM594:
 5119 24ae 8B45D4   		movl	-44(%ebp), %eax
 5120 24b1 89442410 		movl	%eax, 16(%esp)
 5121 24b5 8B4508   		movl	8(%ebp), %eax
 5122 24b8 8944240C 		movl	%eax, 12(%esp)
 5123 24bc C7442408 		movl	$LC29, 8(%esp)
 5123      93230000 
 5124 24c4 C7442404 		movl	$LC23, 4(%esp)
 5124      C8070000 
 5125 24cc C7042400 		movl	$0, (%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 123


 5125      000000
 5126 24d3 E8000000 		call	_reslog_adaptor_log
 5126      00
2792:../../MMI/Resource/ABMLoader.c **** 
2793:../../MMI/Resource/ABMLoader.c ****     /* temp solution:
2794:../../MMI/Resource/ABMLoader.c ****      * check whether the input file is PBM */
2795:../../MMI/Resource/ABMLoader.c ****     {
2796:../../MMI/Resource/ABMLoader.c ****         int l;
2797:../../MMI/Resource/ABMLoader.c ****         
2798:../../MMI/Resource/ABMLoader.c ****         l = strlen(in_filename);
 5128              	LM595:
 5129              	LBB36:
 5130 24d8 8B4508   		movl	8(%ebp), %eax
 5131 24db 890424   		movl	%eax, (%esp)
 5132 24de E8000000 		call	_strlen
 5132      00
 5133 24e3 8945D0   		movl	%eax, -48(%ebp)
2799:../../MMI/Resource/ABMLoader.c ****         if ((in_filename[l - 1] == 'M') &&
 5135              	LM596:
 5136 24e6 8B45D0   		movl	-48(%ebp), %eax
 5137 24e9 034508   		addl	8(%ebp), %eax
 5138 24ec 48       		decl	%eax
 5139 24ed 80384D   		cmpb	$77, (%eax)
 5140 24f0 7522     		jne	L303
 5141 24f2 8B45D0   		movl	-48(%ebp), %eax
 5142 24f5 034508   		addl	8(%ebp), %eax
 5143 24f8 83E802   		subl	$2, %eax
 5144 24fb 803842   		cmpb	$66, (%eax)
 5145 24fe 7514     		jne	L303
 5146 2500 8B45D0   		movl	-48(%ebp), %eax
 5147 2503 034508   		addl	8(%ebp), %eax
 5148 2506 83E803   		subl	$3, %eax
 5149 2509 803850   		cmpb	$80, (%eax)
 5150 250c 7506     		jne	L303
2800:../../MMI/Resource/ABMLoader.c ****             (in_filename[l - 2] == 'B') &&
2801:../../MMI/Resource/ABMLoader.c ****             (in_filename[l - 3] == 'P'))
2802:../../MMI/Resource/ABMLoader.c ****         { 
2803:../../MMI/Resource/ABMLoader.c ****             image_type = IMAGE_TYPE_DEVICE_BITMAP;
 5152              	LM597:
 5153 250e C645DF04 		movb	$4, -33(%ebp)
 5154 2512 EB68     		jmp	L304
 5155              	L303:
2804:../../MMI/Resource/ABMLoader.c ****         }
2805:../../MMI/Resource/ABMLoader.c ****         else if ((in_filename[l - 1] == 'P') &&
 5157              	LM598:
 5158 2514 8B45D0   		movl	-48(%ebp), %eax
 5159 2517 034508   		addl	8(%ebp), %eax
 5160 251a 48       		decl	%eax
 5161 251b 803850   		cmpb	$80, (%eax)
 5162 251e 7522     		jne	L305
 5163 2520 8B45D0   		movl	-48(%ebp), %eax
 5164 2523 034508   		addl	8(%ebp), %eax
 5165 2526 83E802   		subl	$2, %eax
 5166 2529 80384D   		cmpb	$77, (%eax)
 5167 252c 7514     		jne	L305
 5168 252e 8B45D0   		movl	-48(%ebp), %eax
 5169 2531 034508   		addl	8(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 124


 5170 2534 83E803   		subl	$3, %eax
 5171 2537 803842   		cmpb	$66, (%eax)
 5172 253a 7506     		jne	L305
2806:../../MMI/Resource/ABMLoader.c ****                  (in_filename[l - 2] == 'M') &&
2807:../../MMI/Resource/ABMLoader.c ****                  (in_filename[l - 3] == 'B'))
2808:../../MMI/Resource/ABMLoader.c ****         {
2809:../../MMI/Resource/ABMLoader.c ****             image_type = IMAGE_TYPE_BMP;
 5174              	LM599:
 5175 253c C645DF01 		movb	$1, -33(%ebp)
 5176 2540 EB3A     		jmp	L304
 5177              	L305:
2810:../../MMI/Resource/ABMLoader.c ****         }
2811:../../MMI/Resource/ABMLoader.c ****         else if ((in_filename[l - 1] == 'A') &&
 5179              	LM600:
 5180 2542 8B45D0   		movl	-48(%ebp), %eax
 5181 2545 034508   		addl	8(%ebp), %eax
 5182 2548 48       		decl	%eax
 5183 2549 803841   		cmpb	$65, (%eax)
 5184 254c 752E     		jne	L304
 5185 254e 8B45D0   		movl	-48(%ebp), %eax
 5186 2551 034508   		addl	8(%ebp), %eax
 5187 2554 83E802   		subl	$2, %eax
 5188 2557 803850   		cmpb	$80, (%eax)
 5189 255a 7520     		jne	L304
 5190 255c 8B45D0   		movl	-48(%ebp), %eax
 5191 255f 034508   		addl	8(%ebp), %eax
 5192 2562 83E803   		subl	$3, %eax
 5193 2565 80384D   		cmpb	$77, (%eax)
 5194 2568 7512     		jne	L304
 5195 256a 8B45D0   		movl	-48(%ebp), %eax
 5196 256d 034508   		addl	8(%ebp), %eax
 5197 2570 83E804   		subl	$4, %eax
 5198 2573 803842   		cmpb	$66, (%eax)
 5199 2576 7504     		jne	L304
2812:../../MMI/Resource/ABMLoader.c ****                  (in_filename[l - 2] == 'P') &&
2813:../../MMI/Resource/ABMLoader.c ****                  (in_filename[l - 3] == 'M') &&
2814:../../MMI/Resource/ABMLoader.c ****                  (in_filename[l - 4] == 'B'))
2815:../../MMI/Resource/ABMLoader.c ****         {
2816:../../MMI/Resource/ABMLoader.c ****             image_type = IMAGE_TYPE_PNG;
 5201              	LM601:
 5202 2578 C645DF13 		movb	$19, -33(%ebp)
 5203              	L304:
2817:../../MMI/Resource/ABMLoader.c ****         }
2818:../../MMI/Resource/ABMLoader.c ****     }
2819:../../MMI/Resource/ABMLoader.c **** 
2820:../../MMI/Resource/ABMLoader.c ****     /* 
2821:../../MMI/Resource/ABMLoader.c ****      * After we tested on the porject with hardware PNG, the PNG is larger
2822:../../MMI/Resource/ABMLoader.c ****      * and slower than ABM/ABMv2. So we disable this checking.
2823:../../MMI/Resource/ABMLoader.c ****      */
2824:../../MMI/Resource/ABMLoader.c **** #if 0
2825:../../MMI/Resource/ABMLoader.c **** #ifdef GDI_USING_HW_PNG
2826:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2827:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2828:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2829:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2830:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2831:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 125


2832:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2833:../../MMI/Resource/ABMLoader.c **** /* under construction !*/
2834:../../MMI/Resource/ABMLoader.c **** #endif /* GDI_USING_HW_PNG */
2835:../../MMI/Resource/ABMLoader.c **** #endif
2836:../../MMI/Resource/ABMLoader.c **** 
2837:../../MMI/Resource/ABMLoader.c ****     ret = ABM_load(
 5205              	LM602:
 5206              	LBE36:
 5207 257c 8B451C   		movl	28(%ebp), %eax
 5208 257f 89442424 		movl	%eax, 36(%esp)
 5209 2583 8B4514   		movl	20(%ebp), %eax
 5210 2586 89442420 		movl	%eax, 32(%esp)
 5211 258a 8D45F4   		leal	-12(%ebp), %eax
 5212 258d 8944241C 		movl	%eax, 28(%esp)
 5213 2591 8D45F8   		leal	-8(%ebp), %eax
 5214 2594 89442418 		movl	%eax, 24(%esp)
 5215 2598 8D45F0   		leal	-16(%ebp), %eax
 5216 259b 89442414 		movl	%eax, 20(%esp)
 5217 259f 8B45FC   		movl	-4(%ebp), %eax
 5218 25a2 89442410 		movl	%eax, 16(%esp)
 5219 25a6 8B4510   		movl	16(%ebp), %eax
 5220 25a9 8944240C 		movl	%eax, 12(%esp)
 5221 25ad 0FB645DF 		movzbl	-33(%ebp), %eax
 5222 25b1 89442408 		movl	%eax, 8(%esp)
 5223 25b5 C7442404 		movl	$16, 4(%esp)
 5223      10000000 
 5224 25bd 8B4508   		movl	8(%ebp), %eax
 5225 25c0 890424   		movl	%eax, (%esp)
 5226 25c3 E8B3F9FF 		call	_ABM_load
 5226      FF
 5227 25c8 8945EC   		movl	%eax, -20(%ebp)
2838:../../MMI/Resource/ABMLoader.c ****             in_filename,
2839:../../MMI/Resource/ABMLoader.c ****             __MMI_DEVICE_BMP_FORMAT__,
2840:../../MMI/Resource/ABMLoader.c ****             image_type,
2841:../../MMI/Resource/ABMLoader.c ****             encode_option,
2842:../../MMI/Resource/ABMLoader.c ****             buffer,
2843:../../MMI/Resource/ABMLoader.c ****             &size,
2844:../../MMI/Resource/ABMLoader.c ****             &width,
2845:../../MMI/Resource/ABMLoader.c ****             &height,
2846:../../MMI/Resource/ABMLoader.c ****             is9slice,
2847:../../MMI/Resource/ABMLoader.c ****             processData);
2848:../../MMI/Resource/ABMLoader.c ****     switch(ret)
 5229              	LM603:
 5230 25cb 8B45EC   		movl	-20(%ebp), %eax
 5231 25ce 8945BC   		movl	%eax, -68(%ebp)
 5232 25d1 837DBC01 		cmpl	$1, -68(%ebp)
 5233 25d5 7408     		je	L309
 5234 25d7 837DBC02 		cmpl	$2, -68(%ebp)
 5235 25db 7408     		je	L310
 5236 25dd EB0C     		jmp	L311
 5237              	L309:
2849:../../MMI/Resource/ABMLoader.c ****     {
2850:../../MMI/Resource/ABMLoader.c ****         case ABM_ENC_RETURN_USE_ABM:
2851:../../MMI/Resource/ABMLoader.c ****             image_type = IMAGE_TYPE_ABM;
 5239              	LM604:
 5240 25df C645DF28 		movb	$40, -33(%ebp)
2852:../../MMI/Resource/ABMLoader.c ****             break;
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 126


 5242              	LM605:
 5243 25e3 EB1C     		jmp	L308
 5244              	L310:
2853:../../MMI/Resource/ABMLoader.c **** 
2854:../../MMI/Resource/ABMLoader.c ****         case ABM_ENC_RETURN_USE_AB2:
2855:../../MMI/Resource/ABMLoader.c ****             image_type = IMAGE_TYPE_AB2;
 5246              	LM606:
 5247 25e5 C645DF34 		movb	$52, -33(%ebp)
2856:../../MMI/Resource/ABMLoader.c ****             break;
 5249              	LM607:
 5250 25e9 EB16     		jmp	L308
 5251              	L311:
2857:../../MMI/Resource/ABMLoader.c **** 
2858:../../MMI/Resource/ABMLoader.c ****         default:
2859:../../MMI/Resource/ABMLoader.c ****             free(buffer);
 5253              	LM608:
 5254 25eb 8B45FC   		movl	-4(%ebp), %eax
 5255 25ee 890424   		movl	%eax, (%esp)
 5256 25f1 E8000000 		call	_free
 5256      00
2860:../../MMI/Resource/ABMLoader.c ****             return ret;
 5258              	LM609:
 5259 25f6 8B45EC   		movl	-20(%ebp), %eax
 5260 25f9 8945C0   		movl	%eax, -64(%ebp)
 5261 25fc E9E80300 		jmp	L301
 5261      00
 5262              	L308:
2861:../../MMI/Resource/ABMLoader.c ****     }
2862:../../MMI/Resource/ABMLoader.c **** 
2863:../../MMI/Resource/ABMLoader.c ****     if ((size >> 24) > 0)
 5264              	LM610:
 5265 2601 8B45F0   		movl	-16(%ebp), %eax
 5266 2604 C1F818   		sarl	$24, %eax
 5267 2607 85C0     		testl	%eax, %eax
 5268 2609 7E23     		jle	L313
2864:../../MMI/Resource/ABMLoader.c ****     {
2865:../../MMI/Resource/ABMLoader.c ****         ABMLDR_LOG_E("image is too big:%s\n", in_filename);
 5270              	LM611:
 5271 260b 8B4508   		movl	8(%ebp), %eax
 5272 260e 8944240C 		movl	%eax, 12(%esp)
 5273 2612 C7442408 		movl	$LC30, 8(%esp)
 5273      B1230000 
 5274 261a C7442404 		movl	$LC23, 4(%esp)
 5274      C8070000 
 5275 2622 C7042403 		movl	$3, (%esp)
 5275      000000
 5276 2629 E8000000 		call	_reslog_adaptor_log
 5276      00
 5277              	L313:
2866:../../MMI/Resource/ABMLoader.c ****     }
2867:../../MMI/Resource/ABMLoader.c ****     processData->res_size = size + 8;
 5279              	LM612:
 5280 262e 8B551C   		movl	28(%ebp), %edx
 5281 2631 8B45F0   		movl	-16(%ebp), %eax
 5282 2634 83C008   		addl	$8, %eax
 5283 2637 89820002 		movl	%eax, 512(%edx)
 5283      0000
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 127


2868:../../MMI/Resource/ABMLoader.c ****     width_height = (((U32)width & 0XFFF) << 12) | ((U32)height & 0XFFF);
 5285              	LM613:
 5286 263d 8B45F8   		movl	-8(%ebp), %eax
 5287 2640 25FF0F00 		andl	$4095, %eax
 5287      00
 5288 2645 89C2     		movl	%eax, %edx
 5289 2647 C1E20C   		sall	$12, %edx
 5290 264a 8B45F4   		movl	-12(%ebp), %eax
 5291 264d 25FF0F00 		andl	$4095, %eax
 5291      00
 5292 2652 09D0     		orl	%edx, %eax
 5293 2654 8945E4   		movl	%eax, -28(%ebp)
2869:../../MMI/Resource/ABMLoader.c **** 
2870:../../MMI/Resource/ABMLoader.c **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
2871:../../MMI/Resource/ABMLoader.c ****     enfb_ret = Image_Test(in_filename, &enfb_width, &enfb_height, processData->disable_enfb);
2872:../../MMI/Resource/ABMLoader.c ****     if (enfb_ret != ENFB_IMAGE_NONE)
2873:../../MMI/Resource/ABMLoader.c ****     {
2874:../../MMI/Resource/ABMLoader.c ****         processData->enfb_flag = 1;
2875:../../MMI/Resource/ABMLoader.c ****         if (enfb_ret == ENFB_IMAGE_ASSOCIATE)
2876:../../MMI/Resource/ABMLoader.c ****         {
2877:../../MMI/Resource/ABMLoader.c ****             ENFBAssociatedIDAdded = MMI_TRUE;
2878:../../MMI/Resource/ABMLoader.c ****         }
2879:../../MMI/Resource/ABMLoader.c ****     }
2880:../../MMI/Resource/ABMLoader.c **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
2881:../../MMI/Resource/ABMLoader.c **** 
2882:../../MMI/Resource/ABMLoader.c ****     if (toolFlag != 1)
 5295              	LM614:
 5296 2657 833D0000 		cmpl	$1, _toolFlag
 5296      000001
 5297 265e 7456     		je	L314
2883:../../MMI/Resource/ABMLoader.c ****     {
2884:../../MMI/Resource/ABMLoader.c ****         /* open output file */
2885:../../MMI/Resource/ABMLoader.c ****         outfile = fopen(out_filename, "wb+");
 5299              	LM615:
 5300 2660 C7442404 		movl	$LC31, 4(%esp)
 5300      C6230000 
 5301 2668 8B450C   		movl	12(%ebp), %eax
 5302 266b 890424   		movl	%eax, (%esp)
 5303 266e E8000000 		call	_fopen
 5303      00
 5304 2673 8945E0   		movl	%eax, -32(%ebp)
2886:../../MMI/Resource/ABMLoader.c ****         if (outfile == NULL)
 5306              	LM616:
 5307 2676 837DE000 		cmpl	$0, -32(%ebp)
 5308 267a 753A     		jne	L314
2887:../../MMI/Resource/ABMLoader.c ****         {
2888:../../MMI/Resource/ABMLoader.c ****             ABMLDR_LOG_E("\nError creating %s", out_filename);
 5310              	LM617:
 5311 267c 8B450C   		movl	12(%ebp), %eax
 5312 267f 8944240C 		movl	%eax, 12(%esp)
 5313 2683 C7442408 		movl	$LC32, 8(%esp)
 5313      CA230000 
 5314 268b C7442404 		movl	$LC23, 4(%esp)
 5314      C8070000 
 5315 2693 C7042403 		movl	$3, (%esp)
 5315      000000
 5316 269a E8000000 		call	_reslog_adaptor_log
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 128


 5316      00
2889:../../MMI/Resource/ABMLoader.c ****             free(buffer);
 5318              	LM618:
 5319 269f 8B45FC   		movl	-4(%ebp), %eax
 5320 26a2 890424   		movl	%eax, (%esp)
 5321 26a5 E8000000 		call	_free
 5321      00
2890:../../MMI/Resource/ABMLoader.c ****             return 0;
 5323              	LM619:
 5324 26aa C745C000 		movl	$0, -64(%ebp)
 5324      000000
 5325 26b1 E9330300 		jmp	L301
 5325      00
 5326              	L314:
2891:../../MMI/Resource/ABMLoader.c ****         }
2892:../../MMI/Resource/ABMLoader.c ****     }
2893:../../MMI/Resource/ABMLoader.c **** 
2894:../../MMI/Resource/ABMLoader.c ****     data_size = size;
 5328              	LM620:
 5329 26b6 8B45F0   		movl	-16(%ebp), %eax
 5330 26b9 8945D8   		movl	%eax, -40(%ebp)
2895:../../MMI/Resource/ABMLoader.c ****     if (is9slice)
 5332              	LM621:
 5333 26bc 837D1400 		cmpl	$0, 20(%ebp)
 5334 26c0 7406     		je	L316
2896:../../MMI/Resource/ABMLoader.c ****     {
2897:../../MMI/Resource/ABMLoader.c ****         data_size += 20;
 5336              	LM622:
 5337 26c2 8D45D8   		leal	-40(%ebp), %eax
 5338 26c5 830014   		addl	$20, (%eax)
 5339              	L316:
2898:../../MMI/Resource/ABMLoader.c ****     }
2899:../../MMI/Resource/ABMLoader.c **** 
2900:../../MMI/Resource/ABMLoader.c ****     /* write to CustPack */
2901:../../MMI/Resource/ABMLoader.c ****     if (toolFlag == 1)
 5341              	LM623:
 5342 26c8 833D0000 		cmpl	$1, _toolFlag
 5342      000001
 5343 26cf 0F856401 		jne	L317
 5343      0000
2902:../../MMI/Resource/ABMLoader.c ****     {
2903:../../MMI/Resource/ABMLoader.c ****         /* resource header */
2904:../../MMI/Resource/ABMLoader.c ****         if (is9slice)
 5345              	LM624:
 5346 26d5 837D1400 		cmpl	$0, 20(%ebp)
 5347 26d9 741F     		je	L318
2905:../../MMI/Resource/ABMLoader.c ****             fprintf(dest_file, "%c", IMAGE_TYPE_9SLICE);
 5349              	LM625:
 5350 26db C7442408 		movl	$62, 8(%esp)
 5350      3E000000 
 5351 26e3 C7442404 		movl	$LC33, 4(%esp)
 5351      DD230000 
 5352 26eb A1000000 		movl	_dest_file, %eax
 5352      00
 5353 26f0 890424   		movl	%eax, (%esp)
 5354 26f3 E8000000 		call	_fprintf
 5354      00
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 129


 5355 26f8 EB1D     		jmp	L319
 5356              	L318:
2906:../../MMI/Resource/ABMLoader.c ****         else
2907:../../MMI/Resource/ABMLoader.c ****             fprintf(dest_file, "%c", image_type);
 5358              	LM626:
 5359 26fa 0FB645DF 		movzbl	-33(%ebp), %eax
 5360 26fe 89442408 		movl	%eax, 8(%esp)
 5361 2702 C7442404 		movl	$LC33, 4(%esp)
 5361      DD230000 
 5362 270a A1000000 		movl	_dest_file, %eax
 5362      00
 5363 270f 890424   		movl	%eax, (%esp)
 5364 2712 E8000000 		call	_fprintf
 5364      00
 5365              	L319:
2908:../../MMI/Resource/ABMLoader.c ****         fprintf(dest_file, "%c", 0x01);
 5367              	LM627:
 5368 2717 C7442408 		movl	$1, 8(%esp)
 5368      01000000 
 5369 271f C7442404 		movl	$LC33, 4(%esp)
 5369      DD230000 
 5370 2727 A1000000 		movl	_dest_file, %eax
 5370      00
 5371 272c 890424   		movl	%eax, (%esp)
 5372 272f E8000000 		call	_fprintf
 5372      00
2909:../../MMI/Resource/ABMLoader.c ****         fprintf(dest_file, "%c%c%c",
 5374              	LM628:
 5375 2734 8B45D8   		movl	-40(%ebp), %eax
 5376 2737 250000FF 		andl	$16711680, %eax
 5376      00
 5377 273c C1F810   		sarl	$16, %eax
 5378 273f 89442410 		movl	%eax, 16(%esp)
 5379 2743 8B45D8   		movl	-40(%ebp), %eax
 5380 2746 2500FF00 		andl	$65280, %eax
 5380      00
 5381 274b C1F808   		sarl	$8, %eax
 5382 274e 8944240C 		movl	%eax, 12(%esp)
 5383 2752 0FB645D8 		movzbl	-40(%ebp),%eax
 5384 2756 89442408 		movl	%eax, 8(%esp)
 5385 275a C7442404 		movl	$LC34, 4(%esp)
 5385      E0230000 
 5386 2762 A1000000 		movl	_dest_file, %eax
 5386      00
 5387 2767 890424   		movl	%eax, (%esp)
 5388 276a E8000000 		call	_fprintf
 5388      00
2910:../../MMI/Resource/ABMLoader.c ****                 (data_size & 0x000000ff),
2911:../../MMI/Resource/ABMLoader.c ****                 (data_size & 0x0000ff00) >> 8,
2912:../../MMI/Resource/ABMLoader.c ****                 (data_size & 0x00ff0000) >> 16);
2913:../../MMI/Resource/ABMLoader.c ****         fprintf(dest_file, "%c%c%c",
 5390              	LM629:
 5391 276f 8B45E4   		movl	-28(%ebp), %eax
 5392 2772 250000FF 		andl	$16711680, %eax
 5392      00
 5393 2777 C1E810   		shrl	$16, %eax
 5394 277a 89442410 		movl	%eax, 16(%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 130


 5395 277e 8B45E4   		movl	-28(%ebp), %eax
 5396 2781 2500FF00 		andl	$65280, %eax
 5396      00
 5397 2786 C1E808   		shrl	$8, %eax
 5398 2789 8944240C 		movl	%eax, 12(%esp)
 5399 278d 0FB645E4 		movzbl	-28(%ebp),%eax
 5400 2791 89442408 		movl	%eax, 8(%esp)
 5401 2795 C7442404 		movl	$LC34, 4(%esp)
 5401      E0230000 
 5402 279d A1000000 		movl	_dest_file, %eax
 5402      00
 5403 27a2 890424   		movl	%eax, (%esp)
 5404 27a5 E8000000 		call	_fprintf
 5404      00
2914:../../MMI/Resource/ABMLoader.c ****                 (width_height & 0x000000ff),
2915:../../MMI/Resource/ABMLoader.c ****                 (width_height & 0x0000ff00) >> 8,
2916:../../MMI/Resource/ABMLoader.c ****                 (width_height & 0x00ff0000) >> 16);
2917:../../MMI/Resource/ABMLoader.c **** 
2918:../../MMI/Resource/ABMLoader.c ****         if (is9slice)
 5406              	LM630:
 5407 27aa 837D1400 		cmpl	$0, 20(%ebp)
 5408 27ae 744C     		je	L320
2919:../../MMI/Resource/ABMLoader.c ****         {
2920:../../MMI/Resource/ABMLoader.c ****             /* Write 9slice file header */
2921:../../MMI/Resource/ABMLoader.c ****             ResgenImageOutStream * outstream;
2922:../../MMI/Resource/ABMLoader.c ****             ImageOutStreamInit(&outstream);
 5410              	LM631:
 5411              	LBB37:
 5412 27b0 8D45D0   		leal	-48(%ebp), %eax
 5413 27b3 890424   		movl	%eax, (%esp)
 5414 27b6 E8000000 		call	_ImageOutStreamInit
 5414      00
2923:../../MMI/Resource/ABMLoader.c ****             mmi_rg_write_9slice_header(image_type, _9slice_filename, outstream, MMI_TRUE);
 5416              	LM632:
 5417 27bb C744240C 		movl	$1, 12(%esp)
 5417      01000000 
 5418 27c3 8B45D0   		movl	-48(%ebp), %eax
 5419 27c6 89442408 		movl	%eax, 8(%esp)
 5420 27ca 8B4518   		movl	24(%ebp), %eax
 5421 27cd 89442404 		movl	%eax, 4(%esp)
 5422 27d1 0FB645DF 		movzbl	-33(%ebp), %eax
 5423 27d5 890424   		movl	%eax, (%esp)
 5424 27d8 E8000000 		call	_mmi_rg_write_9slice_header
 5424      00
2924:../../MMI/Resource/ABMLoader.c ****             ImageOutStreamOutputFile(outstream, dest_file);
 5426              	LM633:
 5427 27dd A1000000 		movl	_dest_file, %eax
 5427      00
 5428 27e2 89442404 		movl	%eax, 4(%esp)
 5429 27e6 8B45D0   		movl	-48(%ebp), %eax
 5430 27e9 890424   		movl	%eax, (%esp)
 5431 27ec E8000000 		call	_ImageOutStreamOutputFile
 5431      00
2925:../../MMI/Resource/ABMLoader.c ****             ImageOutStreamDeinit(&outstream);
 5433              	LM634:
 5434 27f1 8D45D0   		leal	-48(%ebp), %eax
 5435 27f4 890424   		movl	%eax, (%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 131


 5436 27f7 E8000000 		call	_ImageOutStreamDeinit
 5436      00
 5437              	L320:
2926:../../MMI/Resource/ABMLoader.c ****         }
2927:../../MMI/Resource/ABMLoader.c ****         
2928:../../MMI/Resource/ABMLoader.c ****         /* ABM raw data */
2929:../../MMI/Resource/ABMLoader.c ****         for (i = 0; i < size; i++)
 5439              	LM635:
 5440              	LBE37:
 5441 27fc C745E800 		movl	$0, -24(%ebp)
 5441      000000
 5442              	L321:
 5443 2803 8B45E8   		movl	-24(%ebp), %eax
 5444 2806 3B45F0   		cmpl	-16(%ebp), %eax
 5445 2809 7C05     		jl	L324
 5446 280b E9B30100 		jmp	L325
 5446      00
 5447              	L324:
2930:../../MMI/Resource/ABMLoader.c ****         {
2931:../../MMI/Resource/ABMLoader.c ****             fprintf(dest_file, "%c", buffer[i]);
 5449              	LM636:
 5450 2810 8B45E8   		movl	-24(%ebp), %eax
 5451 2813 0345FC   		addl	-4(%ebp), %eax
 5452 2816 0FB600   		movzbl	(%eax), %eax
 5453 2819 89442408 		movl	%eax, 8(%esp)
 5454 281d C7442404 		movl	$LC33, 4(%esp)
 5454      DD230000 
 5455 2825 A1000000 		movl	_dest_file, %eax
 5455      00
 5456 282a 890424   		movl	%eax, (%esp)
 5457 282d E8000000 		call	_fprintf
 5457      00
 5459              	LM637:
 5460 2832 8D45E8   		leal	-24(%ebp), %eax
 5461 2835 FF00     		incl	(%eax)
 5462 2837 EBCA     		jmp	L321
 5463              	L317:
2932:../../MMI/Resource/ABMLoader.c ****         }
2933:../../MMI/Resource/ABMLoader.c ****     }
2934:../../MMI/Resource/ABMLoader.c ****     
2935:../../MMI/Resource/ABMLoader.c **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
2936:../../MMI/Resource/ABMLoader.c ****     /* write ENFB header to CustImgDataxxx.h and
2937:../../MMI/Resource/ABMLoader.c ****      * image header/data to ENFB image data file */
2938:../../MMI/Resource/ABMLoader.c ****     else if (processData->enfb_flag == 1) 
2939:../../MMI/Resource/ABMLoader.c ****     {
2940:../../MMI/Resource/ABMLoader.c ****         enfb_size = 8 + data_size;
2941:../../MMI/Resource/ABMLoader.c ****         
2942:../../MMI/Resource/ABMLoader.c ****         /* write ENFB header to CustImgDataxxx.h */
2943:../../MMI/Resource/ABMLoader.c ****         fprintf(outfile,
2944:../../MMI/Resource/ABMLoader.c ****                 "\n{\t0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02
2945:../../MMI/Resource/ABMLoader.c ****                 (U8) 255,                       //type
2946:../../MMI/Resource/ABMLoader.c ****                 (U8) ENFBAssociatedIDAdded,     //associated id
2947:../../MMI/Resource/ABMLoader.c ****                 (U8) 0,                         //reserved
2948:../../MMI/Resource/ABMLoader.c ****                 (U8) 0,                         //reserved
2949:../../MMI/Resource/ABMLoader.c ****                 (U8) (enfb_offset & 0xff),
2950:../../MMI/Resource/ABMLoader.c ****                 (U8) ((enfb_offset >> 8) & 0xff),
2951:../../MMI/Resource/ABMLoader.c ****                 (U8) ((enfb_offset >> 16) & 0xff),
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 132


2952:../../MMI/Resource/ABMLoader.c ****                 (U8) ((enfb_offset >> 24) & 0xff),
2953:../../MMI/Resource/ABMLoader.c ****                 (U8) (enfb_size & 0xff),
2954:../../MMI/Resource/ABMLoader.c ****                 (U8) ((enfb_size >> 8) & 0xff),
2955:../../MMI/Resource/ABMLoader.c ****                 (U8) ((enfb_size >> 16) & 0xff),
2956:../../MMI/Resource/ABMLoader.c ****                 (U8) ((enfb_size >> 24) & 0xff));
2957:../../MMI/Resource/ABMLoader.c ****         
2958:../../MMI/Resource/ABMLoader.c ****         /* image header/data to ENFB image data file */
2959:../../MMI/Resource/ABMLoader.c ****         /* resource header */
2960:../../MMI/Resource/ABMLoader.c ****         if (is9slice)
2961:../../MMI/Resource/ABMLoader.c ****             fprintf(enfb_img_data_file, "%c", IMAGE_TYPE_9SLICE);
2962:../../MMI/Resource/ABMLoader.c ****         else
2963:../../MMI/Resource/ABMLoader.c ****             fprintf(enfb_img_data_file, "%c", image_type);
2964:../../MMI/Resource/ABMLoader.c ****         fprintf(enfb_img_data_file, "%c", 0x01);
2965:../../MMI/Resource/ABMLoader.c ****         fprintf(enfb_img_data_file,
2966:../../MMI/Resource/ABMLoader.c ****                 "%c%c%c",
2967:../../MMI/Resource/ABMLoader.c ****                 (data_size & 0x000000ff),
2968:../../MMI/Resource/ABMLoader.c ****                 (data_size & 0x0000ff00) >> 8,
2969:../../MMI/Resource/ABMLoader.c ****                 (data_size & 0x00ff0000) >> 16);
2970:../../MMI/Resource/ABMLoader.c ****         fprintf(enfb_img_data_file,
2971:../../MMI/Resource/ABMLoader.c ****                 "%c%c%c",
2972:../../MMI/Resource/ABMLoader.c ****                 (width_height & 0x000000ff),
2973:../../MMI/Resource/ABMLoader.c ****                 (width_height & 0x0000ff00) >> 8,
2974:../../MMI/Resource/ABMLoader.c ****                 (width_height & 0x00ff0000) >> 16);
2975:../../MMI/Resource/ABMLoader.c **** 
2976:../../MMI/Resource/ABMLoader.c ****         if (is9slice)
2977:../../MMI/Resource/ABMLoader.c ****         {
2978:../../MMI/Resource/ABMLoader.c ****             /* Write 9slice file header */
2979:../../MMI/Resource/ABMLoader.c ****             mmi_rg_write_9slice_header(image_type, _9slice_filename, enfb_img_data_file, MMI_TRUE);
2980:../../MMI/Resource/ABMLoader.c ****         }
2981:../../MMI/Resource/ABMLoader.c ****         
2982:../../MMI/Resource/ABMLoader.c ****         for (i = 0; i < size; i++)
2983:../../MMI/Resource/ABMLoader.c ****         {
2984:../../MMI/Resource/ABMLoader.c ****             fprintf(enfb_img_data_file, "%c", buffer[i]);
2985:../../MMI/Resource/ABMLoader.c ****         }
2986:../../MMI/Resource/ABMLoader.c **** 
2987:../../MMI/Resource/ABMLoader.c ****         enfb_offset += enfb_size;
2988:../../MMI/Resource/ABMLoader.c ****         processData->enfb_flag = 0;
2989:../../MMI/Resource/ABMLoader.c ****     }
2990:../../MMI/Resource/ABMLoader.c **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
2991:../../MMI/Resource/ABMLoader.c **** 
2992:../../MMI/Resource/ABMLoader.c ****     else
2993:../../MMI/Resource/ABMLoader.c ****     {
2994:../../MMI/Resource/ABMLoader.c ****         U8 *dest_buf;
2995:../../MMI/Resource/ABMLoader.c ****         S32 dest_size = 0;
 5465              	LM638:
 5466              	LBB38:
 5467 2839 C745C800 		movl	$0, -56(%ebp)
 5467      000000
2996:../../MMI/Resource/ABMLoader.c ****         
2997:../../MMI/Resource/ABMLoader.c ****         fprintf(outfile, "{\n\t");
 5469              	LM639:
 5470 2840 C7442404 		movl	$LC35, 4(%esp)
 5470      E7230000 
 5471 2848 8B45E0   		movl	-32(%ebp), %eax
 5472 284b 890424   		movl	%eax, (%esp)
 5473 284e E8000000 		call	_fprintf
 5473      00
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 133


2998:../../MMI/Resource/ABMLoader.c **** 
2999:../../MMI/Resource/ABMLoader.c **** #if defined(__MMI_RESOURCE_IMAGE_COMPRESS__)
3000:../../MMI/Resource/ABMLoader.c ****         dest_buf = mmi_rg_compress_image(buffer, size, &dest_size, image_type, width_height, in_fil
3001:../../MMI/Resource/ABMLoader.c ****         if (dest_buf != NULL)
3002:../../MMI/Resource/ABMLoader.c ****         {
3003:../../MMI/Resource/ABMLoader.c ****             mmi_rg_output_compressed_image(dest_buf, dest_size, outfile);
3004:../../MMI/Resource/ABMLoader.c ****         }
3005:../../MMI/Resource/ABMLoader.c ****         else
3006:../../MMI/Resource/ABMLoader.c **** #endif /* __MMI_RESOURCE_IMAGE_COMPRESS__ */
3007:../../MMI/Resource/ABMLoader.c ****         {
3008:../../MMI/Resource/ABMLoader.c ****             /* resource header */
3009:../../MMI/Resource/ABMLoader.c ****             if (is9slice)
 5475              	LM640:
 5476 2853 837D1400 		cmpl	$0, 20(%ebp)
 5477 2857 741D     		je	L326
3010:../../MMI/Resource/ABMLoader.c ****                 fprintf(outfile, "0x%02X, ", IMAGE_TYPE_9SLICE);
 5479              	LM641:
 5480 2859 C7442408 		movl	$62, 8(%esp)
 5480      3E000000 
 5481 2861 C7442404 		movl	$LC36, 4(%esp)
 5481      EB230000 
 5482 2869 8B45E0   		movl	-32(%ebp), %eax
 5483 286c 890424   		movl	%eax, (%esp)
 5484 286f E8000000 		call	_fprintf
 5484      00
 5485 2874 EB1B     		jmp	L327
 5486              	L326:
3011:../../MMI/Resource/ABMLoader.c ****             else
3012:../../MMI/Resource/ABMLoader.c ****                 fprintf(outfile, "0x%02X, ", image_type);
 5488              	LM642:
 5489 2876 0FB645DF 		movzbl	-33(%ebp), %eax
 5490 287a 89442408 		movl	%eax, 8(%esp)
 5491 287e C7442404 		movl	$LC36, 4(%esp)
 5491      EB230000 
 5492 2886 8B45E0   		movl	-32(%ebp), %eax
 5493 2889 890424   		movl	%eax, (%esp)
 5494 288c E8000000 		call	_fprintf
 5494      00
 5495              	L327:
3013:../../MMI/Resource/ABMLoader.c ****             fprintf(outfile, "0x%02X, ", 0x01);
 5497              	LM643:
 5498 2891 C7442408 		movl	$1, 8(%esp)
 5498      01000000 
 5499 2899 C7442404 		movl	$LC36, 4(%esp)
 5499      EB230000 
 5500 28a1 8B45E0   		movl	-32(%ebp), %eax
 5501 28a4 890424   		movl	%eax, (%esp)
 5502 28a7 E8000000 		call	_fprintf
 5502      00
3014:../../MMI/Resource/ABMLoader.c ****             fprintf(outfile,
 5504              	LM644:
 5505 28ac 8B45E4   		movl	-28(%ebp), %eax
 5506 28af 250000FF 		andl	$16711680, %eax
 5506      00
 5507 28b4 C1E810   		shrl	$16, %eax
 5508 28b7 8944241C 		movl	%eax, 28(%esp)
 5509 28bb 8B45E4   		movl	-28(%ebp), %eax
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 134


 5510 28be 2500FF00 		andl	$65280, %eax
 5510      00
 5511 28c3 C1E808   		shrl	$8, %eax
 5512 28c6 89442418 		movl	%eax, 24(%esp)
 5513 28ca 0FB645E4 		movzbl	-28(%ebp),%eax
 5514 28ce 89442414 		movl	%eax, 20(%esp)
 5515 28d2 8B45D8   		movl	-40(%ebp), %eax
 5516 28d5 250000FF 		andl	$16711680, %eax
 5516      00
 5517 28da C1F810   		sarl	$16, %eax
 5518 28dd 89442410 		movl	%eax, 16(%esp)
 5519 28e1 8B45D8   		movl	-40(%ebp), %eax
 5520 28e4 2500FF00 		andl	$65280, %eax
 5520      00
 5521 28e9 C1F808   		sarl	$8, %eax
 5522 28ec 8944240C 		movl	%eax, 12(%esp)
 5523 28f0 0FB645D8 		movzbl	-40(%ebp),%eax
 5524 28f4 89442408 		movl	%eax, 8(%esp)
 5525 28f8 C7442404 		movl	$LC37, 4(%esp)
 5525      00240000 
 5526 2900 8B45E0   		movl	-32(%ebp), %eax
 5527 2903 890424   		movl	%eax, (%esp)
 5528 2906 E8000000 		call	_fprintf
 5528      00
3015:../../MMI/Resource/ABMLoader.c ****                     "0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X,",
3016:../../MMI/Resource/ABMLoader.c ****                     (data_size & 0x000000ff),
3017:../../MMI/Resource/ABMLoader.c ****                     (data_size & 0x0000ff00) >> 8,
3018:../../MMI/Resource/ABMLoader.c ****                     (data_size & 0x00ff0000) >> 16,
3019:../../MMI/Resource/ABMLoader.c ****                     (width_height & 0x000000ff),
3020:../../MMI/Resource/ABMLoader.c ****                     (width_height & 0x0000ff00) >> 8,
3021:../../MMI/Resource/ABMLoader.c ****                     (width_height & 0x00ff0000) >> 16);
3022:../../MMI/Resource/ABMLoader.c **** 
3023:../../MMI/Resource/ABMLoader.c ****             if (is9slice)
 5530              	LM645:
 5531 290b 837D1400 		cmpl	$0, 20(%ebp)
 5532 290f 744A     		je	L328
3024:../../MMI/Resource/ABMLoader.c ****             {
3025:../../MMI/Resource/ABMLoader.c ****                 /* Write 9slice file header */
3026:../../MMI/Resource/ABMLoader.c ****                 ResgenImageOutStream * outstream;
3027:../../MMI/Resource/ABMLoader.c ****                 ImageOutStreamInit(&outstream);
 5534              	LM646:
 5535              	LBB39:
 5536 2911 8D45C4   		leal	-60(%ebp), %eax
 5537 2914 890424   		movl	%eax, (%esp)
 5538 2917 E8000000 		call	_ImageOutStreamInit
 5538      00
3028:../../MMI/Resource/ABMLoader.c ****                 mmi_rg_write_9slice_header(image_type, _9slice_filename, outstream, MMI_FALSE);
 5540              	LM647:
 5541 291c C744240C 		movl	$0, 12(%esp)
 5541      00000000 
 5542 2924 8B45C4   		movl	-60(%ebp), %eax
 5543 2927 89442408 		movl	%eax, 8(%esp)
 5544 292b 8B4518   		movl	24(%ebp), %eax
 5545 292e 89442404 		movl	%eax, 4(%esp)
 5546 2932 0FB645DF 		movzbl	-33(%ebp), %eax
 5547 2936 890424   		movl	%eax, (%esp)
 5548 2939 E8000000 		call	_mmi_rg_write_9slice_header
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 135


 5548      00
3029:../../MMI/Resource/ABMLoader.c ****                 ImageOutStreamOutputFile(outstream, outfile);
 5550              	LM648:
 5551 293e 8B45E0   		movl	-32(%ebp), %eax
 5552 2941 89442404 		movl	%eax, 4(%esp)
 5553 2945 8B45C4   		movl	-60(%ebp), %eax
 5554 2948 890424   		movl	%eax, (%esp)
 5555 294b E8000000 		call	_ImageOutStreamOutputFile
 5555      00
3030:../../MMI/Resource/ABMLoader.c ****                 ImageOutStreamDeinit(&outstream);
 5557              	LM649:
 5558 2950 8D45C4   		leal	-60(%ebp), %eax
 5559 2953 890424   		movl	%eax, (%esp)
 5560 2956 E8000000 		call	_ImageOutStreamDeinit
 5560      00
 5561              	L328:
3031:../../MMI/Resource/ABMLoader.c ****             }
3032:../../MMI/Resource/ABMLoader.c **** 
3033:../../MMI/Resource/ABMLoader.c ****             for (i = 0; i < size; i++)
 5563              	LM650:
 5564              	LBE39:
 5565 295b C745E800 		movl	$0, -24(%ebp)
 5565      000000
 5566              	L329:
 5567 2962 8B45E8   		movl	-24(%ebp), %eax
 5568 2965 3B45F0   		cmpl	-16(%ebp), %eax
 5569 2968 7C02     		jl	L332
 5570 296a EB44     		jmp	L330
 5571              	L332:
3034:../../MMI/Resource/ABMLoader.c ****             {
3035:../../MMI/Resource/ABMLoader.c ****                 if ((i % 16) == 0)
 5573              	LM651:
 5574 296c 8B45E8   		movl	-24(%ebp), %eax
 5575 296f 83E00F   		andl	$15, %eax
 5576 2972 85C0     		testl	%eax, %eax
 5577 2974 7513     		jne	L333
3036:../../MMI/Resource/ABMLoader.c ****                 {
3037:../../MMI/Resource/ABMLoader.c ****                     fprintf(outfile, "\n\t");
 5579              	LM652:
 5580 2976 C7442404 		movl	$LC38, 4(%esp)
 5580      30240000 
 5581 297e 8B45E0   		movl	-32(%ebp), %eax
 5582 2981 890424   		movl	%eax, (%esp)
 5583 2984 E8000000 		call	_fprintf
 5583      00
 5584              	L333:
3038:../../MMI/Resource/ABMLoader.c ****                 }
3039:../../MMI/Resource/ABMLoader.c ****                 fprintf(outfile, "0x%02X, ", buffer[i]);
 5586              	LM653:
 5587 2989 8B45E8   		movl	-24(%ebp), %eax
 5588 298c 0345FC   		addl	-4(%ebp), %eax
 5589 298f 0FB600   		movzbl	(%eax), %eax
 5590 2992 89442408 		movl	%eax, 8(%esp)
 5591 2996 C7442404 		movl	$LC36, 4(%esp)
 5591      EB230000 
 5592 299e 8B45E0   		movl	-32(%ebp), %eax
 5593 29a1 890424   		movl	%eax, (%esp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 136


 5594 29a4 E8000000 		call	_fprintf
 5594      00
 5596              	LM654:
 5597 29a9 8D45E8   		leal	-24(%ebp), %eax
 5598 29ac FF00     		incl	(%eax)
 5599 29ae EBB2     		jmp	L329
 5600              	L330:
3040:../../MMI/Resource/ABMLoader.c ****             }
3041:../../MMI/Resource/ABMLoader.c ****         }
3042:../../MMI/Resource/ABMLoader.c **** 
3043:../../MMI/Resource/ABMLoader.c ****         fprintf(outfile, "\n};");
 5602              	LM655:
 5603 29b0 C7442404 		movl	$LC39, 4(%esp)
 5603      33240000 
 5604 29b8 8B45E0   		movl	-32(%ebp), %eax
 5605 29bb 890424   		movl	%eax, (%esp)
 5606 29be E8000000 		call	_fprintf
 5606      00
 5607              	L325:
3044:../../MMI/Resource/ABMLoader.c ****     }
3045:../../MMI/Resource/ABMLoader.c **** 
3046:../../MMI/Resource/ABMLoader.c ****     if (toolFlag != 1)
 5609              	LM656:
 5610              	LBE38:
 5611 29c3 833D0000 		cmpl	$1, _toolFlag
 5611      000001
 5612 29ca 740B     		je	L334
3047:../../MMI/Resource/ABMLoader.c ****     {
3048:../../MMI/Resource/ABMLoader.c ****         fclose(outfile);
 5614              	LM657:
 5615 29cc 8B45E0   		movl	-32(%ebp), %eax
 5616 29cf 890424   		movl	%eax, (%esp)
 5617 29d2 E8000000 		call	_fclose
 5617      00
 5618              	L334:
3049:../../MMI/Resource/ABMLoader.c ****     }
3050:../../MMI/Resource/ABMLoader.c **** 
3051:../../MMI/Resource/ABMLoader.c ****     // TODO: Fix the return code
3052:../../MMI/Resource/ABMLoader.c ****     free(buffer);
 5620              	LM658:
 5621 29d7 8B45FC   		movl	-4(%ebp), %eax
 5622 29da 890424   		movl	%eax, (%esp)
 5623 29dd E8000000 		call	_free
 5623      00
3053:../../MMI/Resource/ABMLoader.c ****     return ABM_ENC_RETURN_USE_ABM;
 5625              	LM659:
 5626 29e2 C745C001 		movl	$1, -64(%ebp)
 5626      000000
3054:../../MMI/Resource/ABMLoader.c **** }
 5628              	LM660:
 5629              	L301:
 5630              	LBE35:
 5631 29e9 8B45C0   		movl	-64(%ebp), %eax
 5632 29ec C9       		leave
 5633 29ed C3       		ret
 5660              	Lscope27:
 5666              	_ab2_bs_init:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 137


 5668              	LM661:
 5669 29ee 55       		pushl	%ebp
 5670 29ef 89E5     		movl	%esp, %ebp
 5672              	LM662:
 5673 29f1 8B5508   		movl	8(%ebp), %edx
 5674 29f4 8B450C   		movl	12(%ebp), %eax
 5675 29f7 8902     		movl	%eax, (%edx)
 5677              	LM663:
 5678 29f9 8B4508   		movl	8(%ebp), %eax
 5679 29fc C7400400 		movl	$0, 4(%eax)
 5679      000000
 5681              	LM664:
 5682 2a03 8B4508   		movl	8(%ebp), %eax
 5683 2a06 C7400800 		movl	$0, 8(%eax)
 5683      000000
 5685              	LM665:
 5686 2a0d 5D       		popl	%ebp
 5687 2a0e C3       		ret
 5688              	Lscope28:
 5695              	_ab2_bs_write:
 5697              	LM666:
 5698 2a0f 55       		pushl	%ebp
 5699 2a10 89E5     		movl	%esp, %ebp
 5700 2a12 53       		pushl	%ebx
 5702              	LM667:
 5703 2a13 8B5D08   		movl	8(%ebp), %ebx
 5704 2a16 8B5508   		movl	8(%ebp), %edx
 5705 2a19 8B4508   		movl	8(%ebp), %eax
 5706 2a1c 0FB64808 		movzbl	8(%eax), %ecx
 5707 2a20 8B450C   		movl	12(%ebp), %eax
 5708 2a23 D3E0     		sall	%cl, %eax
 5709 2a25 0B4204   		orl	4(%edx), %eax
 5710 2a28 894304   		movl	%eax, 4(%ebx)
 5712              	LM668:
 5713 2a2b 8B4D08   		movl	8(%ebp), %ecx
 5714 2a2e 8B5508   		movl	8(%ebp), %edx
 5715 2a31 8B4510   		movl	16(%ebp), %eax
 5716 2a34 034208   		addl	8(%edx), %eax
 5717 2a37 894108   		movl	%eax, 8(%ecx)
 5719              	LM669:
 5720 2a3a 8B4508   		movl	8(%ebp), %eax
 5721 2a3d 8378080F 		cmpl	$15, 8(%eax)
 5722 2a41 763A     		jbe	L135
 5724              	LM670:
 5725 2a43 8B4508   		movl	8(%ebp), %eax
 5726 2a46 8B10     		movl	(%eax), %edx
 5727 2a48 8B4508   		movl	8(%ebp), %eax
 5728 2a4b 0FB74004 		movzwl	4(%eax), %eax
 5729 2a4f 668902   		movw	%ax, (%edx)
 5731              	LM671:
 5732 2a52 8B5508   		movl	8(%ebp), %edx
 5733 2a55 8B4508   		movl	8(%ebp), %eax
 5734 2a58 8B4004   		movl	4(%eax), %eax
 5735 2a5b C1E810   		shrl	$16, %eax
 5736 2a5e 894204   		movl	%eax, 4(%edx)
 5738              	LM672:
 5739 2a61 8B5508   		movl	8(%ebp), %edx
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 138


 5740 2a64 8B4508   		movl	8(%ebp), %eax
 5741 2a67 8B4008   		movl	8(%eax), %eax
 5742 2a6a 83E810   		subl	$16, %eax
 5743 2a6d 894208   		movl	%eax, 8(%edx)
 5745              	LM673:
 5746 2a70 8B5508   		movl	8(%ebp), %edx
 5747 2a73 8B4508   		movl	8(%ebp), %eax
 5748 2a76 8B00     		movl	(%eax), %eax
 5749 2a78 83C002   		addl	$2, %eax
 5750 2a7b 8902     		movl	%eax, (%edx)
 5752              	LM674:
 5753              	L135:
 5754 2a7d 5B       		popl	%ebx
 5755 2a7e 5D       		popl	%ebp
 5756 2a7f C3       		ret
 5757              	Lscope29:
 5763              	_ab2_bs_offset:
 5765              	LM675:
 5766 2a80 55       		pushl	%ebp
 5767 2a81 89E5     		movl	%esp, %ebp
 5769              	LM676:
 5770 2a83 8B4508   		movl	8(%ebp), %eax
 5771 2a86 8B550C   		movl	12(%ebp), %edx
 5772 2a89 8B00     		movl	(%eax), %eax
 5773 2a8b 29D0     		subl	%edx, %eax
 5775              	LM677:
 5776 2a8d 5D       		popl	%ebp
 5777 2a8e C3       		ret
 5778              	Lscope30:
 5785              	_ab2enc_get_img_color_idx:
 5787              	LM678:
 5788 2a8f 55       		pushl	%ebp
 5789 2a90 89E5     		movl	%esp, %ebp
 5790 2a92 83EC38   		subl	$56, %esp
 5792              	LM679:
 5793              	LBB40:
 5794 2a95 8B4510   		movl	16(%ebp), %eax
 5795 2a98 8B4008   		movl	8(%eax), %eax
 5796 2a9b 8945E0   		movl	%eax, -32(%ebp)
 5797 2a9e 837DE000 		cmpl	$0, -32(%ebp)
 5798 2aa2 7904     		jns	L155
 5799 2aa4 8345E007 		addl	$7, -32(%ebp)
 5800              	L155:
 5801 2aa8 8B45E0   		movl	-32(%ebp), %eax
 5802 2aab C1F803   		sarl	$3, %eax
 5803 2aae 8945FC   		movl	%eax, -4(%ebp)
 5805              	LM680:
 5806 2ab1 8B5510   		movl	16(%ebp), %edx
 5807 2ab4 8B45FC   		movl	-4(%ebp), %eax
 5808 2ab7 0FAF02   		imull	(%edx), %eax
 5809 2aba 89C2     		movl	%eax, %edx
 5810 2abc 8B4510   		movl	16(%ebp), %eax
 5811 2abf 8B881404 		movl	1044(%eax), %ecx
 5811      0000
 5812 2ac5 8D0411   		leal	(%ecx,%edx), %eax
 5813 2ac8 8945F8   		movl	%eax, -8(%ebp)
 5815              	LM681:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 139


 5816 2acb 8B4510   		movl	16(%ebp), %eax
 5817 2ace 83780804 		cmpl	$4, 8(%eax)
 5818 2ad2 755D     		jne	L156
 5820              	LM682:
 5821 2ad4 8B4510   		movl	16(%ebp), %eax
 5822 2ad7 8B00     		movl	(%eax), %eax
 5823 2ad9 83C007   		addl	$7, %eax
 5824 2adc 8945DC   		movl	%eax, -36(%ebp)
 5825 2adf 837DDC00 		cmpl	$0, -36(%ebp)
 5826 2ae3 7904     		jns	L157
 5827 2ae5 8345DC07 		addl	$7, -36(%ebp)
 5828              	L157:
 5829 2ae9 8B45DC   		movl	-36(%ebp), %eax
 5830 2aec C1F803   		sarl	$3, %eax
 5831 2aef C1E002   		sall	$2, %eax
 5832 2af2 8945EC   		movl	%eax, -20(%ebp)
 5834              	LM683:
 5835 2af5 8B4D10   		movl	16(%ebp), %ecx
 5836 2af8 8B4510   		movl	16(%ebp), %eax
 5837 2afb 8B550C   		movl	12(%ebp), %edx
 5838 2afe 8B4004   		movl	4(%eax), %eax
 5839 2b01 29D0     		subl	%edx, %eax
 5840 2b03 48       		decl	%eax
 5841 2b04 0FAF45EC 		imull	-20(%ebp), %eax
 5842 2b08 8B911004 		movl	1040(%ecx), %edx
 5842      0000
 5843 2b0e 8D0C02   		leal	(%edx,%eax), %ecx
 5844 2b11 8B4508   		movl	8(%ebp), %eax
 5845 2b14 89C2     		movl	%eax, %edx
 5846 2b16 83E201   		andl	$1, %edx
 5847 2b19 8B4508   		movl	8(%ebp), %eax
 5848 2b1c 29D0     		subl	%edx, %eax
 5849 2b1e D1E8     		shrl	%eax
 5850 2b20 8D0408   		leal	(%eax,%ecx), %eax
 5851 2b23 8945F4   		movl	%eax, -12(%ebp)
 5853              	LM684:
 5854 2b26 8B4508   		movl	8(%ebp), %eax
 5855 2b29 83E001   		andl	$1, %eax
 5856 2b2c 8845F2   		movb	%al, -14(%ebp)
 5857 2b2f EB2A     		jmp	L158
 5858              	L156:
 5860              	LM685:
 5861 2b31 8B4510   		movl	16(%ebp), %eax
 5862 2b34 8B550C   		movl	12(%ebp), %edx
 5863 2b37 8B4004   		movl	4(%eax), %eax
 5864 2b3a 29D0     		subl	%edx, %eax
 5865 2b3c 48       		decl	%eax
 5866 2b3d 89C2     		movl	%eax, %edx
 5867 2b3f 0FAF55F8 		imull	-8(%ebp), %edx
 5868 2b43 8B45FC   		movl	-4(%ebp), %eax
 5869 2b46 0FAF4508 		imull	8(%ebp), %eax
 5870 2b4a 01C2     		addl	%eax, %edx
 5871 2b4c 8B4510   		movl	16(%ebp), %eax
 5872 2b4f 8B881004 		movl	1040(%eax), %ecx
 5872      0000
 5873 2b55 8D0411   		leal	(%ecx,%edx), %eax
 5874 2b58 8945F4   		movl	%eax, -12(%ebp)
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 140


 5875              	L158:
 5877              	LM686:
 5878 2b5b 8B4510   		movl	16(%ebp), %eax
 5879 2b5e 83780820 		cmpl	$32, 8(%eax)
 5880 2b62 756F     		jne	L159
 5882              	LM687:
 5883 2b64 8B45F4   		movl	-12(%ebp), %eax
 5884 2b67 0FB610   		movzbl	(%eax), %edx
 5885 2b6a 8B45F4   		movl	-12(%ebp), %eax
 5886 2b6d 40       		incl	%eax
 5887 2b6e 0FB600   		movzbl	(%eax), %eax
 5888 2b71 C1E008   		sall	$8, %eax
 5889 2b74 09C2     		orl	%eax, %edx
 5890 2b76 8B45F4   		movl	-12(%ebp), %eax
 5891 2b79 83C002   		addl	$2, %eax
 5892 2b7c 0FB600   		movzbl	(%eax), %eax
 5893 2b7f C1E010   		sall	$16, %eax
 5894 2b82 09C2     		orl	%eax, %edx
 5895 2b84 8B45F4   		movl	-12(%ebp), %eax
 5896 2b87 83C003   		addl	$3, %eax
 5897 2b8a 0FB600   		movzbl	(%eax), %eax
 5898 2b8d C1E018   		sall	$24, %eax
 5899 2b90 09D0     		orl	%edx, %eax
 5900 2b92 8945E8   		movl	%eax, -24(%ebp)
 5902              	LM688:
 5903 2b95 8B4510   		movl	16(%ebp), %eax
 5904 2b98 83B82C04 		cmpl	$0, 1068(%eax)
 5904      000000
 5905 2b9f 7409     		je	L160
 5907              	LM689:
 5908 2ba1 8D45E8   		leal	-24(%ebp), %eax
 5909 2ba4 81080000 		orl	$-16777216, (%eax)
 5909      00FF
 5910              	L160:
 5912              	LM690:
 5913 2baa 8B4510   		movl	16(%ebp), %eax
 5914 2bad 83B82804 		cmpl	$0, 1064(%eax)
 5914      000000
 5915 2bb4 0F84CA00 		je	L162
 5915      0000
 5916 2bba 817DE80C 		cmpl	$-16119028, -24(%ebp)
 5916      0B0AFF
 5917 2bc1 0F85BD00 		jne	L162
 5917      0000
 5919              	LM691:
 5920 2bc7 C745E800 		movl	$0, -24(%ebp)
 5920      000000
 5921 2bce E9B10000 		jmp	L162
 5921      00
 5922              	L159:
 5924              	LM692:
 5925 2bd3 8B4510   		movl	16(%ebp), %eax
 5926 2bd6 83780818 		cmpl	$24, 8(%eax)
 5927 2bda 754C     		jne	L163
 5929              	LM693:
 5930 2bdc 8B45F4   		movl	-12(%ebp), %eax
 5931 2bdf 0FB610   		movzbl	(%eax), %edx
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 141


 5932 2be2 8B45F4   		movl	-12(%ebp), %eax
 5933 2be5 40       		incl	%eax
 5934 2be6 0FB600   		movzbl	(%eax), %eax
 5935 2be9 C1E008   		sall	$8, %eax
 5936 2bec 09C2     		orl	%eax, %edx
 5937 2bee 8B45F4   		movl	-12(%ebp), %eax
 5938 2bf1 83C002   		addl	$2, %eax
 5939 2bf4 0FB600   		movzbl	(%eax), %eax
 5940 2bf7 C1E010   		sall	$16, %eax
 5941 2bfa 09D0     		orl	%edx, %eax
 5942 2bfc 8945E8   		movl	%eax, -24(%ebp)
 5944              	LM694:
 5945 2bff 8B4510   		movl	16(%ebp), %eax
 5946 2c02 83B82804 		cmpl	$0, 1064(%eax)
 5946      000000
 5947 2c09 7412     		je	L164
 5948 2c0b 817DE80C 		cmpl	$658188, -24(%ebp)
 5948      0B0A00
 5949 2c12 7509     		jne	L164
 5951              	LM695:
 5952 2c14 C745E800 		movl	$0, -24(%ebp)
 5952      000000
 5953 2c1b EB67     		jmp	L162
 5954              	L164:
 5956              	LM696:
 5957 2c1d 8D45E8   		leal	-24(%ebp), %eax
 5958 2c20 81080000 		orl	$-16777216, (%eax)
 5958      00FF
 5959 2c26 EB5C     		jmp	L162
 5960              	L163:
 5962              	LM697:
 5963 2c28 8B4510   		movl	16(%ebp), %eax
 5964 2c2b 83780808 		cmpl	$8, 8(%eax)
 5965 2c2f 7512     		jne	L167
 5967              	LM698:
 5968 2c31 8B5510   		movl	16(%ebp), %edx
 5969 2c34 8B45F4   		movl	-12(%ebp), %eax
 5970 2c37 0FB600   		movzbl	(%eax), %eax
 5971 2c3a 8B448210 		movl	16(%edx,%eax,4), %eax
 5972 2c3e 8945E8   		movl	%eax, -24(%ebp)
 5973 2c41 EB41     		jmp	L162
 5974              	L167:
 5976              	LM699:
 5977 2c43 8B4510   		movl	16(%ebp), %eax
 5978 2c46 83780804 		cmpl	$4, 8(%eax)
 5979 2c4a 752F     		jne	L169
 5981              	LM700:
 5982 2c4c 807DF200 		cmpb	$0, -14(%ebp)
 5983 2c50 750E     		jne	L170
 5985              	LM701:
 5986 2c52 8B45F4   		movl	-12(%ebp), %eax
 5987 2c55 0FB600   		movzbl	(%eax), %eax
 5988 2c58 C0E804   		shrb	$4, %al
 5989 2c5b 8845F3   		movb	%al, -13(%ebp)
 5990 2c5e EB0B     		jmp	L171
 5991              	L170:
 5993              	LM702:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 142


 5994 2c60 8B45F4   		movl	-12(%ebp), %eax
 5995 2c63 0FB600   		movzbl	(%eax), %eax
 5996 2c66 240F     		andb	$15, %al
 5997 2c68 8845F3   		movb	%al, -13(%ebp)
 5998              	L171:
 6000              	LM703:
 6001 2c6b 8B4510   		movl	16(%ebp), %eax
 6002 2c6e 0FB655F3 		movzbl	-13(%ebp), %edx
 6003 2c72 8B449010 		movl	16(%eax,%edx,4), %eax
 6004 2c76 8945E8   		movl	%eax, -24(%ebp)
 6005 2c79 EB09     		jmp	L162
 6006              	L169:
 6008              	LM704:
 6009 2c7b C745E4FF 		movl	$65535, -28(%ebp)
 6009      FF0000
 6010 2c82 EB3A     		jmp	L154
 6011              	L162:
 6013              	LM705:
 6014 2c84 8B45E8   		movl	-24(%ebp), %eax
 6015 2c87 C1E818   		shrl	$24, %eax
 6016 2c8a 85C0     		testl	%eax, %eax
 6017 2c8c 7509     		jne	L173
 6019              	LM706:
 6020 2c8e C745E400 		movl	$0, -28(%ebp)
 6020      000000
 6021 2c95 EB27     		jmp	L154
 6022              	L173:
 6024              	LM707:
 6025 2c97 8B4510   		movl	16(%ebp), %eax
 6026 2c9a 89442404 		movl	%eax, 4(%esp)
 6027 2c9e 8B45E8   		movl	-24(%ebp), %eax
 6028 2ca1 890424   		movl	%eax, (%esp)
 6029 2ca4 E8C8D4FF 		call	_COLOR_REDUCE
 6029      FF
 6030 2ca9 89C2     		movl	%eax, %edx
 6031 2cab 8B4510   		movl	16(%ebp), %eax
 6032 2cae 89442404 		movl	%eax, 4(%esp)
 6033 2cb2 891424   		movl	%edx, (%esp)
 6034 2cb5 E8E4D4FF 		call	_search_color
 6034      FF
 6035 2cba 40       		incl	%eax
 6036 2cbb 8945E4   		movl	%eax, -28(%ebp)
 6038              	LM708:
 6039              	L154:
 6040              	LBE40:
 6041 2cbe 8B45E4   		movl	-28(%ebp), %eax
 6042 2cc1 C9       		leave
 6043 2cc2 C3       		ret
 6053              	Lscope31:
 6057              		.text
 6059              	Letext:
GAS LISTING d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s 			page 143


DEFINED SYMBOLS
                            *ABS*:00000000 ABMLoader.c
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:482    .text:00000060 _image_resource_info
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:674    .text:00000108 _log2_table
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:694    .text:00000126 _COLOR_REDUCE_24_TO_16
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:734    .text:00000164 _COLOR_REDUCE_24_TO_18
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:753    .text:00000171 _COLOR_REDUCE
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:784    .text:0000019e _search_color
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:883    .text:0000022c _insert_color_at
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:952    .text:00000295 _add_color_if_new
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1020   .text:0000030a _get_normal_color_num
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1071   .text:0000034c _get_file_size
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1124   .text:000003a8 _parse_bitmap
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1595   .text:00000839 _load_bmp_file
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1746   .text:000009b1 _update_image_bounding_box
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1849   .text:00000a51 _limit_image_bounding_box
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:1950   .text:00000b0a _abmenc_build_color_index_table
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2315   .text:00000dee _log2_ceiling
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2363   .text:00000e22 _ab2_bs_flush
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2406   .text:00000e60 _ab2enc_color_preprocess
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2547   .text:00000f62 _ab2enc_get_pixel_format
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2642   .text:00001002 _ab2_encode_rle_repeat_code
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2726   .text:00001093 _ab2_encode_rle_discount_code
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:2916   .text:000011e2 _ab2enc_encode_header
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:3072   .text:0000135a _ab2enc_rle_encode_header
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:3354   .text:000015ec _ab2enc_rle_encode_body
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:3696   .text:00001887 _ab2enc_encode
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:3817   .text:00001959 _abmenc_encode
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:4433   .text:00001e4f _caculate_abm_size
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:4536   .text:00001f06 _caculate_pbm_size
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:4577   .text:00001f7b _ABM_load
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:5071   .text:00002437 _ABMLoader
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:5666   .text:000029ee _ab2_bs_init
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:5695   .text:00002a0f _ab2_bs_write
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:5763   .text:00002a80 _ab2_bs_offset
d:/software/ovi_2503a_s3trc/ovi_2503a_s3trc/plutommi/Customer/ResGenerator/gcctmp/ccyWcaaa.s:5785   .text:00002a8f _ab2enc_get_img_color_idx

UNDEFINED SYMBOLS
_toolFlag
_dest_file
_ImageOutStreamDeinit
_ImageOutStreamOutputFile
_mmi_rg_write_9slice_header
_ImageOutStreamInit
_fprintf
_strlen
_free
_memset
_malloc
_fread
_fclose
_reslog_adaptor_log
_fopen
_fseek
_ftell
