/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*****************************************************************************
 *
 * Filename:
 * ---------
 *    guobiengine.c
 *
 * Project:
 * --------
 *   Maui_Software
 *
 * Description:
 * ------------
 *
 * Author:
 * -------
 * -------
 *
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 *
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/

#include "MMI_features.h"
#include "GlobalConstants.h"
#include "ImeGprot.h"
#include "PixtelDataTypes.h"
#include "Fat_fs.h"
#include "DebugInitDef.h"
#include "Imc_symbol.h"
#include "Imc_config.h"
#include "gui_themes.h"


#if defined (__MMI_IME_MEMORY_CARD_SUPPORT__)
#include "FileMgrSrvGProt.h"
#include "ime_lib_config.h"
#endif

#include "gb_res.h"

#if defined(__MMI_GUOBI__)

#define MMI_IME_GUOBI_MAX_LIMIT_KEY_STROKE 12
	

/*****************************************************************************
 * Local Functions
 *****************************************************************************/
	
#define MMI_IME_USER_DATABASE_FILE           L"ime_ud.dat"
static void mmi_ime_guobi_get_candidates_zhuyin( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static void mmi_ime_goubi_word_get_candidates_alphabetic( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static void mmi_ime_guobi_get_spellings_stroke( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static void mmi_ime_guobi_get_associates( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static void mmi_ime_guobi_get_candidates_stroke( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static void mmi_ime_guobi_get_spellings_pinyin( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static void mmi_ime_guobi_get_candidates_pinyin( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr );
static U16 mmi_ime_word_get_corresponding_stroke(UI_character_type code);
static MMI_BOOL mmi_ime_guobi_have_next_cand_page(PGBEngine g_ime_engine);
static void mmi_ime_guobi_GetNextPageAssociates(PGBEngine g_ime_engine);
static void mmi_ime_guobi_GetPrevPageAssociates(PGBEngine g_ime_engine);
static S32 mmi_ime_guobi_have_prev_cand_page(PGBEngine g_ime_engine);
static GBRETURN mmi_ime_guobi_send_key_event(PGBEngine g_ime_engine, GBINT evt, GBU32 param);
static UI_character_type mmi_ime_guobi_word_symbol_to_GBcode(U16 symbol);
static GBRETURN mmi_ime_guobi_setpageoption( GBBOOL isftepage);
static S32 mmi_ime_guobi_GetStrWidth(void * pParam, GBLPCWCHAR str);
static void mmi_ime_guobi_get_candidates_pinyin_smart(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr);
static MMI_BOOL mmi_ime_guobi_is_ChnUAWStatus(PGBEngine g_ime_engine);
static MMI_BOOL mmi_ime_guobi_HaveNextSyllPage(PGBEngine g_ime_engine);
static UI_character_type mmi_ime_guobi_word_symbol_to_code_stroke(U16 symbol);
#if defined(__MMI_IME_USER_DATABASE__)
static void mmi_GB_engine_unload_UDB(void);
static void mmi_GB_engine_load_UDB(void);
static FS_HANDLE mmi_ime_gb_open_file(PU16 path_name_ptr, PU16 file_name_ptr, MMI_BOOL is_create_always);
static U32 mmi_ime_gb_write_file(FS_HANDLE file_handle, PU16 data_ptr, U32 size_in_byte);
static void mmi_ime_gb_close_file(FS_HANDLE file_handle);
static U32 mmi_ime_gb_read_file(FS_HANDLE file_handle, PU16 data_ptr, U32 size_in_byte);
#endif
static GBRETURN mmi_ime_guobi_setpageoption_for_candidate(GBBOOL isftepage,U8 count,U8 first_index);
static GBRETURN mmi_ime_guobi_setpageoption_for_alphabetic_candidate( GBBOOL isftepage, U8 count, U8 first_index);
#if defined __MMI_GUOBI_MULTITAP__
static UI_string_type mmi_ime_multitap_vendor_get_string(S32 index);
static MMI_BOOL mmi_ime_multitap_vendor_valid_key_check( mmi_imc_symbol_key_enum sym);
#endif
#ifdef __MMI_IME_MEMORY_CARD_SUPPORT__
static MMI_BOOL mmi_ime_load_database_from_memory_card(U8 *filename);
static MMI_BOOL mmi_ime_memory_card_check_database(U8 *filename, GBLANG nlang);
#endif

/*****************************************************************************
 * External variables
 *****************************************************************************/
 #if defined(__MMI_IME_FUZZY_PINYIN__)
extern U8 g_fuzzy_pinyin_state[MAX_FUZZY_PINYIN-1] ;
#endif
/*****************************************************************************
 * Local variables
 *****************************************************************************/
#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
#define MAX_LDB_HEADER_FILE_SIZE 256
static GBLDB g_ldb_data;
static MMI_BOOL loadldbflag = FALSE;
static U16 ldb_index;
static GBLPCVOID g_memory_card_ldb_buffer[MAX_LDB_DATA_BUFFER_SIZE];
static const sIMEModeDetails *g_current_mode_details_ptr;
#endif

#if defined(__MMI_IME_USER_DATABASE__)
    GBI32  UDBID; 
    static GBRETURN isUDBattach= GBE_API_GBIS_IS_NULL;

#endif
static U32 prev_lang = 0;
UI_character_type    mt_page_buff[MULTITAP_MAX_KEY_CHAR];
MMI_BOOL is_inited=MMI_FALSE;
#if defined(__MMI_IME_USER_DATABASE__)

static U16 mmi_ime_gb_user_data[GB_ENGINE_PRIVATE_BUFFER_SIZE];

#endif /* defined(__MMI_IME_USER_DATABASE__) */
#if defined(__MMI_GB_SM_CHINESE__) || defined(__MMI_GB_TR_CHINESE__)
static const mmi_imc_symb_stroke_enum g_guobi_keys_stroke[MMI_IMC_SYMB_KEY_MAX - MMI_IMC_SYMB_KEY_BASE] =
{
    MMI_IMC_SYMB_STROKE_ZEROTH,                                /* MMI_IMC_SYMB_KEY_0 */
    MMI_IMC_SYMB_STROKE_OVER,         /* MMI_IMC_SYMB_KEY_1 */
    MMI_IMC_SYMB_STROKE_DOWN,         /* MMI_IMC_SYMB_KEY_2 */
    MMI_IMC_SYMB_STROKE_LEFT,         /* MMI_IMC_SYMB_KEY_3 */
    MMI_IMC_SYMB_STROKE_DOT,          /* MMI_IMC_SYMB_KEY_4 */
    MMI_IMC_SYMB_STROKE_OVER_DOWN,    /* MMI_IMC_SYMB_KEY_5 */
    MMI_IMC_SYMB_STROKE_WILDCARD,     /* MMI_IMC_SYMB_KEY_6 */
    MMI_IMC_SYMB_STROKE_ZEROTH,                                /* MMI_IMC_SYMB_KEY_7 */
    MMI_IMC_SYMB_STROKE_ZEROTH,                                /* MMI_IMC_SYMB_KEY_8 */
    MMI_IMC_SYMB_STROKE_ZEROTH,                                /* MMI_IMC_SYMB_KEY_9 */
    MMI_IMC_SYMB_STROKE_ZEROTH,                                /* MMI_IMC_SYMB_KEY_STAR */
    MMI_IMC_SYMB_STROKE_ZEROTH                                 /* MMI_IMC_SYMB_KEY_POUND */
};
#endif
 #if defined(__MMI_IME_FUZZY_PINYIN__)
UI_character_type g_fuzzy_array[IME_FUZZY_PINYIN_MAX] = 
{
		GBCFG_PINYIN_FUZZY_H_F,		
		GBCFG_PINYIN_FUZZY_N_L,
		GBCFG_PINYIN_FUZZY_NG_N,
		GBCFG_PINYIN_FUZZY_XH_X,
		GBCFG_PINYIN_FUZZY_K_G,
		GBCFG_PINYIN_FUZZY_R_L,
};
#endif
static const GBU8 MapKey[] =
{
    9, 0, 1, 2, 3, 4, 5, 6, 7, 8
};

UI_character_type g_key_map_alphabetic[MMI_IMC_SYMB_KEY_MAX - MMI_IMC_SYMB_KEY_BASE] = 
{
		GBKEY_0,		
		GBKEY_1,
		GBKEY_2,
		GBKEY_3,
		GBKEY_4,
		GBKEY_5,
		GBKEY_6,
		GBKEY_7,
		GBKEY_8,
		GBKEY_9,
		GBKEY_A,
		GBKEY_B,
		GBKEY_C,
		GBKEY_D,
		GBKEY_E,
		GBKEY_F,
		GBKEY_G,
		GBKEY_H,
		GBKEY_I,
		GBKEY_J,
		GBKEY_K,
		GBKEY_L,
		GBKEY_M,
		GBKEY_N,
		GBKEY_O,
		GBKEY_P,
		GBKEY_Q,
		GBKEY_R,
		GBKEY_S,
		GBKEY_T,
		GBKEY_U,
		GBKEY_V,
		GBKEY_W,
		GBKEY_X,
		GBKEY_Y,
		GBKEY_Z
};
	
#ifdef __MMI_IME_MEMORY_CARD_SUPPORT__
mmi_ime_ldb_infor g_ime_ldb_status[MAX_LDB_NUMBER]={{NULL,MMI_FALSE}};
	
const mmi_ime_memory_card_language_info_struct g_ime_ldb_storage_infor_tbl[]=
	{
#ifdef __MMI_IME_ARABIC__
		{
			IME_WRITING_LANG_AR,
			GBL_Arabic,
			"ar-SA",
			"gb_ar.ebd",
	#if defined(__MMI_IME_ARABIC_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_ARABIC_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_ARABIC_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_ARABIC_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_BENGALI__
		{
			IME_WRITING_LANG_BE,
			GBL_Bengali,
			"be-IN",
			"gb_bn.ebd",
	#if defined(__MMI_IME_BENGALI_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_BENGALI_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_BENGALI_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_BENGALI_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_CZECH__
		{
			IME_WRITING_LANG_CS,
			GBL_Czech,
			"cs-CZ",
			"gb_cs.ebd",
	#if defined(__MMI_IME_CZECH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_CZECH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_CZECH_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_CZECH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_DUTCH__
		{
			IME_WRITING_LANG_NL,
			GBL_Dutch,
			"nl-NL",
			"gb_nl.ebd",
	#if defined(__MMI_IME_DUTCH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_DUTCH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_DUTCH_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_DUTCH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_ENGLISH__
		{
			IME_WRITING_LANG_ABC,
			GBL_English,
			"en-US",
			"gb_en.ebd",
	#if defined(__MMI_IME_ENGLISH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_ENGLISH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_ENGLISH_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_ENGLISH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_FRENCH__
		{
			IME_WRITING_LANG_FR,
			GBL_French,
			"fr-CA",
			"gb_fr.ebd",
	#if defined(__MMI_IME_FRENCH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_FRENCH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_FRENCH_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_FRENCH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_GERMAN__
		{
			IME_WRITING_LANG_DE,
			GBL_German,
			"de-DE",
			"gb_de.ebd",
	#if defined(__MMI_IME_GERMAN_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_GERMAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_GERMAN_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_GERMAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_GREEK__
		{
			IME_WRITING_LANG_EL,
			GBL_Greek,
			"el-GR",
			"gb_grc.ebd",
	#if defined(__MMI_IME_GREEK_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_GREEK_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_GREEK_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_GREEK_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_HINDI__
		{
			IME_WRITING_LANG_HI,
			GBL_Hindi,
			"hi-IN",
			"gb_hi.ebd",
	#if defined(__MMI_IME_HINDI_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_HINDI_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_HINDI_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_HINDI_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_HUNGARIAN__
		{
			IME_WRITING_LANG_HU,
			GBL_Hungarian,
			"hu-HU",
			"gb_hu.ebd",
	#if defined(__MMI_IME_HUNGARIAN_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_HUNGARIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_HUNGARIAN_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_HUNGARIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_INDONESIAN__
		{
			IME_WRITING_LANG_ID,
			GBL_Indonesian,
			"id-ID",
			"gb_id.ebd",
	#if defined(__MMI_IME_INDONESIAN_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_INDONESIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_INDONESIAN_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_INDONESIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_MALAY__
		{
			IME_WRITING_LANG_MS,
			GBL_Malaysian,
			"ms-MY",
			"gb_ms.ebd",
	#if defined(__MMI_IME_MALAY_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_MALAY_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_MALAY_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_MALAY_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_PORTUGUESE__
		{
			IME_WRITING_LANG_PT,
			GBL_Portuguese,
			"pt-PT",
			"gb_pt.ebd",
	#if defined(__MMI_IME_PORTUGUESE_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_SA_PORTUGUESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_PORTUGUESE_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_PORTUGUESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},

		
	{
		IME_WRITING_LANG_PTBZ,
		GBL_Portuguese_SA,
		"pt-BZ",
		"gb_pt-sa.ebd",
	#if defined(__MMI_IME_SA_PORTUGUESE_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_SA_PORTUGUESE_DATABASE_STORAGE_IN_MEMORYCARD__)
		MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_SA_PORTUGUESE_DATABASE_STORAGE_IN_ROM__)
		MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_SA_PORTUGUESE_DATABASE_STORAGE_IN_MEMORYCARD__)
		MMI_IME_LDB_STORAGE_IN_CARD,
	#else
		MMI_IME_LDB_STORAGE_NONE,
	#endif
			},
#endif

	
#ifdef __MMI_IME_PERSIAN__
		{
			IME_WRITING_LANG_PS,
			GBL_Farsi,
			"ps-IR",
			"gb_fa.ebd",
	#if defined(__MMI_IME_PERSIAN_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_PERSIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_PERSIAN_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_PERSIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_ROMANIAN__
		{
			IME_WRITING_LANG_RO,
			GBL_Romanian,
			"ro-RO",
			"gb_ro.ebd",
	#if defined(__MMI_IME_ROMANIAN_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_ROMANIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_ROMANIAN_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_ROMANIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_RUSSIAN__
		{
			IME_WRITING_LANG_RU,
			GBL_Russian,
			"ru-RU",
			"gb_ru.ebd",
	#if defined(__MMI_IME_RUSSIAN_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_RUSSIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_RUSSIAN_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_RUSSIAN_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_SM_CHINESE__
		{
			IME_WRITING_LANG_ZHCN,
			GBL_Chinese,
			"zh-CN",
			"gb_sc.ebd",
	#if defined(__MMI_IME_SM_CHINESE_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_SM_CHINESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_SM_CHINESE_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_SM_CHINESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
	
#ifdef __MMI_IME_SPANISH__
		{
			IME_WRITING_LANG_ES,
			GBL_Spanish,
			"es-ES",
			"gb_sp.ebd",
	#if defined(__MMI_IME_SPANISH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_SPANISH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_SPANISH_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_SPANISH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
		
	{
		IME_WRITING_LANG_ESSA,
		GBL_Spanish_SA,
		"es-SA",
		"gb_sp-sa.ebd",
	#if defined(__MMI_IME_SA_SPANISH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_SA_SPANISH_DATABASE_STORAGE_IN_MEMORYCARD__)
		MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_SA_SPANISH_DATABASE_STORAGE_IN_ROM__)
		MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_SA_SPANISH_DATABASE_STORAGE_IN_MEMORYCARD__)
		MMI_IME_LDB_STORAGE_IN_CARD,
	#else
		MMI_IME_LDB_STORAGE_NONE,
	#endif
			},

#endif
	
#ifdef __MMI_IME_TR_CHINESE__
		{
			IME_WRITING_LANG_ZHTW,
			GBL_Traditional_Chinese,
			"zh-TW",
			"gb_tc.ebd",
	#if defined(__MMI_IME_TR_CHINESE_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_TR_CHINESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_TR_CHINESE_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_TR_CHINESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_TURKISH__
		{
			IME_WRITING_LANG_TR,
			GBL_Turkish,
			"tr-TR",
			"gb_tr.ebd",
	#if defined(__MMI_IME_TURKISH_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_TURKISH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_TURKISH_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_TURKISH_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif
	
#ifdef __MMI_IME_VIETNAMESE__
		{
			IME_WRITING_LANG_VI,
			GBL_Vietnamese,
			"vi-VN",
			"gb_vi.ebd",
	#if defined(__MMI_IME_VIETNAMESE_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_VIETNAMESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_VIETNAMESE_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_VIETNAMESE_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif

#ifdef __MMI_IME_MALAYALAM__
		{
			IME_WRITING_LANG_ML,
			GBL_Malayalam,
			"ml-IN",
			"gb_ml.ebd",
	#if defined(__MMI_IME_MALAYALAM_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_MALAYALAM_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_MALAYALAM_DATABASE_STORAGE_IN_ROM__)
			MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_MALAYALAM_DATABASE_STORAGE_IN_MEMORYCARD__)
			MMI_IME_LDB_STORAGE_IN_CARD,
	#else
			MMI_IME_LDB_STORAGE_NONE,
	#endif
		},
#endif	
/*
#ifdef __MMI_IME_MYANMAR__
				{
					IME_WRITING_LANG_MY,
					GBL_Myanmar,
					"my-IN",
					"gb_my.ebd",
	#if defined(__MMI_IME_MYANMAR_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_MYANMAR_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_MYANMAR_DATABASE_STORAGE_IN_ROM__)
					MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_MYANMAR_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_CARD,
	#else
					MMI_IME_LDB_STORAGE_NONE,
	#endif
				},
#endif

#ifdef __MMI_IME_PUNJABI__
				{
					IME_WRITING_LANG_PA,
					GBL_Punjabi,
					"pa-IN",
					"gb_pa.ebd",
	#if defined(__MMI_IME_PUNJABI_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_PUNJABI_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_PUNJABI_DATABASE_STORAGE_IN_ROM__)
					MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_PUNJABI_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_CARD,
	#else
					MMI_IME_LDB_STORAGE_NONE,
	#endif
				},
#endif
*/
#ifdef __MMI_IME_TAMIL__
						{
							IME_WRITING_LANG_TA,
							GBL_Tamil,
							"ta-IN",
							"gb_ta.ebd",
	#if defined(__MMI_IME_TAMIL_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_TAMIL_DATABASE_STORAGE_IN_MEMORYCARD__)
							MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_TAMIL_DATABASE_STORAGE_IN_ROM__)
							MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_TAMIL_DATABASE_STORAGE_IN_MEMORYCARD__)
							MMI_IME_LDB_STORAGE_IN_CARD,
	#else
							MMI_IME_LDB_STORAGE_NONE,
	#endif
						},
#endif

#ifdef __MMI_IME_TELUGU__
				{
					IME_WRITING_LANG_TE,
					GBL_Telugu,
					"te-IN",
					"gb_te.ebd",
	#if defined(__MMI_IME_TELUGU_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_TELUGU_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_TELUGU_DATABASE_STORAGE_IN_ROM__)
					MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_TELUGU_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_CARD,
	#else
					MMI_IME_LDB_STORAGE_NONE,
	#endif
				},
#endif

#ifdef __MMI_IME_THAI__
				{
					IME_WRITING_LANG_TH,
					GBL_Thai,
					"th-TH",
					"gb_th.ebd",
	#if defined(__MMI_IME_THAI_DATABASE_STORAGE_IN_ROM__) && defined(__MMI_IME_THAI_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_ROM | MMI_IME_LDB_STORAGE_IN_CARD,
	#elif defined(__MMI_IME_THAI_DATABASE_STORAGE_IN_ROM__)
					MMI_IME_LDB_STORAGE_IN_ROM,
	#elif defined(__MMI_IME_THAI_DATABASE_STORAGE_IN_MEMORYCARD__)
					MMI_IME_LDB_STORAGE_IN_CARD,
	#else
					MMI_IME_LDB_STORAGE_NONE,
	#endif
				},
#endif

		{
			IME_WRITING_LANG_NONE,
			NULL,
			NULL,
			MMI_IME_LDB_STORAGE_NONE,
		}
	};

#endif

static const mmi_ime_mode_info_struct g_mode_infos[] = 
{
	#ifdef __MMI_GB_ENGLISH__
	{	
			IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ABC,
			MapKey,
			GBL_English,
			MMI_IME_REQUIRED_ALL_KEYS,
			MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
			NULL,
			NULL,
			mmi_ime_goubi_word_get_candidates_alphabetic
		},
		{
			IMM_INPUT_MODE_SMART_UPPERCASE_ABC,
			MapKey,
			GBL_English,
			MMI_IME_REQUIRED_ALL_KEYS,
			MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
			NULL,
			NULL,
			mmi_ime_goubi_word_get_candidates_alphabetic
	},
	{	
			IMM_INPUT_MODE_SMART_LOWERCASE_ABC,
			MapKey,
			GBL_English,
			MMI_IME_REQUIRED_ALL_KEYS,
			MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
			NULL,
			NULL,
			mmi_ime_goubi_word_get_candidates_alphabetic
	},
	
   
	{	
			IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_ABC,
			MapKey,
			GBL_English,
			MMI_IME_REQUIRED_ALL_KEYS,
			MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
			NULL,
			NULL,
			mmi_ime_goubi_word_get_candidates_alphabetic
		},
		{
			IMM_INPUT_MODE_MULTITAP_UPPERCASE_ABC,
			MapKey,
			GBL_English,
			MMI_IME_REQUIRED_ALL_KEYS,
			MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
			NULL,
			NULL,
			mmi_ime_goubi_word_get_candidates_alphabetic
	},
	{	
			IMM_INPUT_MODE_MULTITAP_LOWERCASE_ABC,
			MapKey,
			GBL_English,
			MMI_IME_REQUIRED_ALL_KEYS,
			MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
			NULL,
			NULL,
			mmi_ime_goubi_word_get_candidates_alphabetic
	},
	
	#endif /* #if defined(__MMI_GB_ENGLISH__) */

	#ifdef __MMI_GB_AFRIKAANS__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_AFRIKAANS,
        MapKey,
        GBL_Afrikaans,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_AFRIKAANS,
        MapKey,
        GBL_Afrikaans,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_AFRIKAANS,
        MapKey,
        GBL_Afrikaans,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_AFRIKAANS,
        MapKey,
        GBL_Afrikaans,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_AFRIKAANS,
        MapKey,
        GBL_Afrikaans,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_AFRIKAANS,
        MapKey,
        GBL_Afrikaans,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_AFRIKAANS__) */
#ifdef __MMI_GB_ALBANIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_ALBANIAN,
        MapKey,
        GBL_Albanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_ALBANIAN,
        MapKey,
        GBL_Albanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ALBANIAN,
        MapKey,
        GBL_Albanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_ALBANIAN,
        MapKey,
        GBL_Albanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_ALBANIAN,
        MapKey,
        GBL_Albanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_ALBANIAN,
        MapKey,
        GBL_Albanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_ALBANIAN__) */	

	#ifdef __MMI_GB_ARABIC__
    {   
        IMM_INPUT_MODE_SMART_ARABIC,
        MapKey,
        GBL_Arabic,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_ARABIC,
        MapKey,
        GBL_Arabic,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_ARABIC__) */
	#ifdef __MMI_GB_BASQUE__
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_BASQUE,
        MapKey,
        GBL_Basque,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_BASQUE,
        MapKey,
        GBL_Basque,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_BASQUE,
        MapKey,
        GBL_Basque,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_BASQUE,
        MapKey,
        GBL_Basque,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_BASQUE,
        MapKey,
        GBL_Basque,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_BASQUE,
        MapKey,
        GBL_Basque,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_BASQUE__) */
	#ifdef __MMI_GB_BENGALI__
    {   
        IMM_INPUT_MODE_SMART_BENGALI,
        MapKey,
        GBL_Bengali,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_BENGALI,
        MapKey,
        GBL_Bengali,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_BENGALI__) */
	
	#ifdef __MMI_GB_BULGARIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_BULGARIAN,
        MapKey,
        GBL_Bulgarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_BULGARIAN,
        MapKey,
        GBL_Bulgarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_BULGARIAN,
        MapKey,
        GBL_Bulgarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_BULGARIAN,
        MapKey,
        GBL_Bulgarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_BULGARIAN,
        MapKey,
        GBL_Bulgarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_BULGARIAN,
        MapKey,
        GBL_Bulgarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_BULGARIAN__) */
	
	#ifdef __MMI_GB_CROATIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_CROATIAN,
        MapKey,
        GBL_Croatian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_CROATIAN,
        MapKey,
        GBL_Croatian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_CROATIAN,
        MapKey,
        GBL_Croatian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },  
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_CROATIAN,
        MapKey,
        GBL_Croatian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_CROATIAN,
        MapKey,
        GBL_Croatian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_CROATIAN,
        MapKey,
        GBL_Croatian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_CROATIAN__) */
	
#ifdef __MMI_GB_CZECH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_CZECH,
        MapKey,
        GBL_Czech,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_CZECH,
        MapKey,
        GBL_Czech,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_CZECH,
        MapKey,
        GBL_Czech,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },  
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_CZECH,
        MapKey,
        GBL_Czech,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_CZECH,
        MapKey,
        GBL_Czech,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_CZECH,
        MapKey,
        GBL_Czech,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_CZECH__) */
	#ifdef __MMI_GB_DANISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_DANISH,
        MapKey,
        GBL_Danish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_DANISH,
        MapKey,
        GBL_Danish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_DANISH,
        MapKey,
        GBL_Danish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_DANISH,
        MapKey,
        GBL_Danish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_DANISH,
        MapKey,
        GBL_Danish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_DANISH,
        MapKey,
        GBL_Danish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_DANISH__) */

#ifdef __MMI_GB_DUTCH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_DUTCH,
        MapKey,
        GBL_Dutch,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_DUTCH,
        MapKey,
        GBL_Dutch,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_DUTCH,
        MapKey,
        GBL_Dutch,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_DUTCH,
        MapKey,
        GBL_Dutch,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_DUTCH,
        MapKey,
        GBL_Dutch,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_DUTCH,
        MapKey,
        GBL_Dutch,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_DUTCH__) */

	#ifdef __MMI_GB_ESTONIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_ESTONIAN,
        MapKey,
        GBL_Estonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_ESTONIAN,
        MapKey,
        GBL_Estonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ESTONIAN,
        MapKey,
        GBL_Estonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_ESTONIAN,
        MapKey,
        GBL_Estonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_ESTONIAN,
        MapKey,
        GBL_Estonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_ESTONIAN,
        MapKey,
        GBL_Estonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_ESTONIAN__) */
	
	#ifdef __MMI_GB_FINNISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_FINNISH,
        MapKey,
        GBL_Finnish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_FINNISH,
        MapKey,
        GBL_Finnish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_FINNISH,
        MapKey,
        GBL_Finnish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_FINNISH,
        MapKey,
        GBL_Finnish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_FINNISH,
        MapKey,
        GBL_Finnish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_FINNISH,
        MapKey,
        GBL_Finnish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_FINNISH__) */
   #ifdef __MMI_GB_FILIPINO__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_FILIPINO,
        MapKey,
        GBL_Tagalog,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_FILIPINO,
        MapKey,
        GBL_Tagalog,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_FILIPINO,
        MapKey,
        GBL_Tagalog,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_FILIPINO,
        MapKey,
        GBL_Tagalog,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_FILIPINO,
        MapKey,
        GBL_Tagalog,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_FILIPINO,
        MapKey,
        GBL_Tagalog,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_FILIPINO__) */
	
	#ifdef __MMI_GB_FRENCH__
    {   
		 IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_FRENCH,
        MapKey,
		 GBL_French,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
		 IMM_INPUT_MODE_SMART_UPPERCASE_FRENCH,
        MapKey,
		 GBL_French,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
		 IMM_INPUT_MODE_SMART_LOWERCASE_FRENCH,
        MapKey,
		 GBL_French,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
	
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
		 IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_FRENCH,
        MapKey,
		 GBL_French,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
		 IMM_INPUT_MODE_MULTITAP_UPPERCASE_FRENCH,
        MapKey,
		 GBL_French,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
		 IMM_INPUT_MODE_MULTITAP_LOWERCASE_FRENCH,
        MapKey,
		 GBL_French,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
    #endif /* #if defined(__MMI_GB_FRENCH__) */
	#ifdef __MMI_GB_GEORGIAN__
    {   
        IMM_INPUT_MODE_SMART_GEORGIAN,
        MapKey,
        GBL_Georgian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_GEORGIAN,
        MapKey,
        GBL_Georgian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0) ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    
   // #endif
	#endif /* #if defined(__MMI_GB_GEORGIAN__) */
#ifdef __MMI_GB_GERMAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_GERMAN,
        MapKey,
        GBL_German,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_GERMAN,
        MapKey,
        GBL_German,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_GERMAN,
        MapKey,
        GBL_German,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_GERMAN,
        MapKey,
        GBL_German,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_GERMAN,
        MapKey,
        GBL_German,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_GERMAN,
        MapKey,
        GBL_German,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_GERMAN__) */
		
#ifdef __MMI_GB_GREEK__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_GREEK,
        MapKey,
        GBL_Greek,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_GREEK,
        MapKey,
        GBL_Greek,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_GREEK,
        MapKey,
        GBL_Greek,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_GREEK,
        MapKey,
        GBL_Greek,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_GREEK,
        MapKey,
        GBL_Greek,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_GREEK,
        MapKey,
        GBL_Greek,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_GREEK__) */
		#if defined(__MMI_GB_GUJARATI__)
	{	 
		IMM_INPUT_MODE_SMART_GUJARATI,
		 MapKey,
		GBL_Gujarati,
		 MMI_IME_REQUIRED_ALL_KEYS,
		 MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		 NULL,
		 NULL,
		 mmi_ime_goubi_word_get_candidates_alphabetic
	 },
//    #if defined(__MMI_GUOBI_MULTITAP__)
        {	 
		IMM_INPUT_MODE_MULTITAP_GUJARATI,
		 MapKey,
		GBL_Gujarati,
		 MMI_IME_REQUIRED_ALL_KEYS,
		 MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		 NULL,
		 NULL,
		 mmi_ime_goubi_word_get_candidates_alphabetic
	 },
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_GUJARATI__) */
	#ifdef __MMI_GB_HEBREW__
	 {	 
        IMM_INPUT_MODE_SMART_HEBREW,
		 MapKey,
        GBL_Hebrew,
		 MMI_IME_REQUIRED_ALL_KEYS,
		 MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		 NULL,
		 NULL,
		 mmi_ime_goubi_word_get_candidates_alphabetic
	 },
	
	 //#if defined (__MMI_GUOBI_MULTITAP__)
     {	 
        IMM_INPUT_MODE_MULTITAP_HEBREW,
		 MapKey,
        GBL_Hebrew,
		 MMI_IME_REQUIRED_ALL_KEYS,
		 MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		 NULL,
		 NULL,
		 mmi_ime_goubi_word_get_candidates_alphabetic
	 },
   // #endif
	#endif /* #if defined(__MMI_GB_HEBREW__) */
	#if defined(__MMI_GB_HINDI__)
        {	 
		IMM_INPUT_MODE_SMART_HINDI,
		 MapKey,
		GBL_Hindi,
		 MMI_IME_REQUIRED_ALL_KEYS,
		 MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		 NULL,
		 NULL,
		 mmi_ime_goubi_word_get_candidates_alphabetic
	 },
//    #if defined(__MMI_GUOBI_MULTITAP__)
	 {	 
		IMM_INPUT_MODE_MULTITAP_HINDI,
		 MapKey,
		GBL_Hindi,
		 MMI_IME_REQUIRED_ALL_KEYS,
		 MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		 NULL,
		 NULL,
		 mmi_ime_goubi_word_get_candidates_alphabetic
	 },
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_HINDI__) */
		
	#ifdef __MMI_GB_HINGLISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_HINGLISH,
        MapKey,
        GBL_Hinglish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_HINGLISH,
        MapKey,
        GBL_Hinglish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    
   
	#endif /* #if defined(__MMI_GB_HINGLISH__) */	
		
	
#ifdef __MMI_GB_HUNGARIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_HUNGARIAN,
        MapKey,
        GBL_Hungarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_HUNGARIAN,
        MapKey,
        GBL_Hungarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_HUNGARIAN,
        MapKey,
        GBL_Hungarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_HUNGARIAN,
        MapKey,
        GBL_Hungarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_HUNGARIAN,
        MapKey,
        GBL_Hungarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_HUNGARIAN,
        MapKey,
        GBL_Hungarian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_HUNGARIAN__) */
	#if defined(__MMI_GB_INDONESIAN__)
	{	
		IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_INDONESIAN,
		MapKey,
		GBL_Indonesian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    {	
		IMM_INPUT_MODE_SMART_UPPERCASE_INDONESIAN,
		MapKey,
		GBL_Indonesian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
	{	
		IMM_INPUT_MODE_SMART_LOWERCASE_INDONESIAN,
		MapKey,
		GBL_Indonesian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    //	#if defined (__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_INDONESIAN,
		MapKey,
		GBL_Indonesian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    {	
		IMM_INPUT_MODE_MULTITAP_UPPERCASE_INDONESIAN,
		MapKey,
		GBL_Indonesian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
	{	
		IMM_INPUT_MODE_MULTITAP_LOWERCASE_INDONESIAN,
		MapKey,
		GBL_Indonesian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
	//#endif /* #if defined (__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_Indonesian__) */
	
	#ifdef __MMI_GB_ITALIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_ITALIAN,
        MapKey,
        GBL_Italian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_ITALIAN,
        MapKey,
        GBL_Italian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ITALIAN,
        MapKey,
        GBL_Italian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_ITALIAN,
        MapKey,
        GBL_Italian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_ITALIAN,
        MapKey,
        GBL_Italian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_ITALIAN,
        MapKey,
        GBL_Italian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_ITALIAN__) */
	
	#ifdef __MMI_GB_KAZAKH__
	{	
        IMM_INPUT_MODE_SMART_LOWERCASE_KAZAKH,
		MapKey,
        GBL_Kazakh,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_KAZAKH,
        MapKey,
        GBL_Kazakh,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_KAZAKH,
        MapKey,
        GBL_Kazakh,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_KAZAKH,
		MapKey,
        GBL_Kazakh,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_KAZAKH,
        MapKey,
        GBL_Kazakh,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_KAZAKH,
        MapKey,
        GBL_Kazakh,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_KAZAKH__) */
	
   	#ifdef __MMI_GB_KHMER__
    {   
        IMM_INPUT_MODE_SMART_KHMER,
        MapKey,
        GBL_Khmer,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_KHMER,
        MapKey,
        GBL_Khmer,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_KHMER__) */
#ifdef __MMI_GB_LAO__
    {   
        IMM_INPUT_MODE_SMART_LAO,
        MapKey,
        GBL_Lao,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_LAO,
        MapKey,
        GBL_Lao,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_LAO__) */
	#ifdef __MMI_GB_LATVIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_LATVIAN,
        MapKey,
        GBL_Latvian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_LATVIAN,
        MapKey,
        GBL_Latvian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_LATVIAN,
        MapKey,
        GBL_Latvian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_LATVIAN,
        MapKey,
        GBL_Latvian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_LATVIAN,
        MapKey,
        GBL_Latvian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_LATVIAN,
        MapKey,
        GBL_Latvian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_LATVIAN__) */
		
	#ifdef __MMI_GB_LITHUANIAN__
	{	
        IMM_INPUT_MODE_SMART_LOWERCASE_LITHUANIAN,
		MapKey,
        GBL_Lithuanian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    {	
        IMM_INPUT_MODE_SMART_UPPERCASE_LITHUANIAN,
		MapKey,
        GBL_Lithuanian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
	{	
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_LITHUANIAN,
		MapKey,
        GBL_Lithuanian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    //	#if defined (__MMI_GUOBI_MULTITAP__)
	{	
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_LITHUANIAN,
		MapKey,
        GBL_Lithuanian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
    {	
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_LITHUANIAN,
		MapKey,
        GBL_Lithuanian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
	{	
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_LITHUANIAN,
		MapKey,
        GBL_Lithuanian,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
   // #endif
	#endif /* #if defined(__MMI_GB_LITHUANIAN__) */
		#ifdef __MMI_GB_MACEDONIAN__
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_MACEDONIAN,
        MapKey,
        GBL_Macedonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_MACEDONIAN,
        MapKey,
        GBL_Macedonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_MACEDONIAN,
        MapKey,
        GBL_Macedonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_MACEDONIAN,
        MapKey,
        GBL_Macedonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_MACEDONIAN,
        MapKey,
        GBL_Macedonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_MACEDONIAN,
        MapKey,
        GBL_Macedonian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_MACEDONIAN__) */
#ifdef __MMI_GB_MALAY__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_MALAY,
        MapKey,
        GBL_Malaysian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_MALAY,
        MapKey,
        GBL_Malaysian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_MALAY,
        MapKey,
        GBL_Malaysian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_MALAY,
        MapKey,
        GBL_Malaysian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_MALAY,
        MapKey,
        GBL_Malaysian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_MALAY,
        MapKey,
        GBL_Malaysian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_MALAY__) */
		#if defined(__MMI_GB_MALAYALAM__)
	{	
		IMM_INPUT_MODE_SMART_MALAYALAM,
		MapKey,
		GBL_Malayalam,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_MALAYALAM,
		MapKey,
		GBL_Malayalam,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_MALAYALAM__) */
		
	#if defined(__MMI_GB_MARATHI__)
	{	
		IMM_INPUT_MODE_SMART_MARATHI,
		MapKey,
		GBL_Marathi,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_MARATHI,
		MapKey,
		GBL_Marathi,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_MARATHI__) */
			#if defined(__MMI_GB_PUNJABI__)
	{	
		IMM_INPUT_MODE_SMART_PUNJABI,
		MapKey,
		GBL_Punjabi,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_PUNJABI,
		MapKey,
		GBL_Punjabi,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_PUNJABI__) */
		
	
	#ifdef __MMI_GB_PERSIAN__
    {   
        IMM_INPUT_MODE_SMART_PERSIAN,
        MapKey,
        GBL_Farsi,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_PERSIAN,
        MapKey,
        GBL_Farsi,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif /*(__MMI_GUOBI_MULTITAP__)*/
	#endif /* #if defined(__MMI_GB_ARABIC__) */
		#ifdef __MMI_GB_NORWEGIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_NORWEGIAN,
        MapKey,
        GBL_Norwegian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_NORWEGIAN,
        MapKey,
        GBL_Norwegian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_NORWEGIAN,
        MapKey,
        GBL_Norwegian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_NORWEGIAN,
        MapKey,
        GBL_Norwegian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_NORWEGIAN,
        MapKey,
        GBL_Norwegian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_NORWEGIAN,
        MapKey,
        GBL_Norwegian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_NORWEGIAN__) */	
	
#ifdef __MMI_GB_POLISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_POLISH,
        MapKey,
        GBL_Polish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_POLISH,
        MapKey,
        GBL_Polish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_POLISH,
        MapKey,
        GBL_Polish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_POLISH,
        MapKey,
        GBL_Polish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_POLISH,
        MapKey,
        GBL_Polish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_POLISH,
        MapKey,
        GBL_Polish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_POLISH__) */
		
		#ifdef __MMI_GB_PORTUGUESE__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_PORTUGUESE__) */
	
	
#ifdef __MMI_GB_ROMANIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_ROMANIAN,
        MapKey,
        GBL_Romanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_ROMANIAN,
        MapKey,
        GBL_Romanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ROMANIAN,
        MapKey,
        GBL_Romanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_ROMANIAN,
        MapKey,
        GBL_Romanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_ROMANIAN,
        MapKey,
        GBL_Romanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_ROMANIAN,
        MapKey,
        GBL_Romanian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_ROMANIAN__) */
	
#ifdef __MMI_GB_RUSSIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_RUSSIAN,
        MapKey,
        GBL_Russian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_RUSSIAN,
        MapKey,
        GBL_Russian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_RUSSIAN,
        MapKey,
        GBL_Russian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_RUSSIAN,
        MapKey,
        GBL_Russian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_RUSSIAN,
        MapKey,
        GBL_Russian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_RUSSIAN,
        MapKey,
        GBL_Russian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_RUSSIAN__) */
			#ifdef __MMI_GB_SA_PORTUGUESE__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_SA_PORTUGUESE,
        MapKey,
        GBL_Portuguese_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_SA_PORTUGUESE,
        MapKey,
        GBL_Portuguese_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_SA_PORTUGUESE,
        MapKey,
        GBL_Portuguese_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_PORTUGUESE,
        MapKey,
        GBL_Portuguese_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_SA_PORTUGUESE__) */
	
	#ifdef __MMI_GB_SA_SPANISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_SA_SPANISH,
        MapKey,
        GBL_Spanish_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_SA_SPANISH,
        MapKey,
        GBL_Spanish_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_SA_SPANISH,
        MapKey,
        GBL_Spanish_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_SPANISH,
        MapKey,
        GBL_Spanish_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_SPANISH,
        MapKey,
        GBL_Spanish_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_SPANISH,
        MapKey,
        GBL_Spanish_SA,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_SA_SPANISH__) */
   
   #ifdef __MMI_GB_SERBIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_SERBIAN,
        MapKey,
        GBL_Serbian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_SERBIAN,
        MapKey,
        GBL_Serbian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_SERBIAN,
        MapKey,
        GBL_Serbian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_SERBIAN,
        MapKey,
        GBL_Serbian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_SERBIAN,
        MapKey,
        GBL_Serbian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_SERBIAN,
        MapKey,
        GBL_Serbian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_SERBIAN__) */
	

    #if defined(__MMI_GB_SM_CHINESE__)
	 {
		IMM_INPUT_MODE_SM_MULTITAP_PINYIN,
        MapKey,
		GBL_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_pinyin
	},
    {
		IMM_INPUT_MODE_SM_STROKE,
        MapKey,
		GBL_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_stroke,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_stroke
	},
	{
		IMM_INPUT_MODE_SM_PINYIN,
        MapKey,
		GBL_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_pinyin,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_pinyin_smart
	},
	 {
		IMM_INPUT_MODE_QUICK_SEARCH_PINYIN,
        MapKey,
		GBL_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_pinyin
	},
	{
		IMM_INPUT_MODE_QUICK_SEARCH_SM_STROKE,
        MapKey,
		GBL_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_stroke,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_stroke
	},
    #endif /*#if defined(__MMI_GUOBI_SM_CHINESE__) */
    
    
#ifdef __MMI_GB_SPANISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_SPANISH,
        MapKey,
        GBL_Spanish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_SPANISH,
        MapKey,
        GBL_Spanish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_SPANISH,
        MapKey,
        GBL_Spanish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_SPANISH,
        MapKey,
        GBL_Spanish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_SPANISH,
        MapKey,
        GBL_Spanish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_SPANISH,
        MapKey,
        GBL_Spanish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_SPANISH__) */
		
   #ifdef __MMI_GB_SWAHILI__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_SWAHILI,
        MapKey,
        GBL_Swahili,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_SWAHILI,
        MapKey,
        GBL_Swahili,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_SWAHILI,
        MapKey,
        GBL_Swahili,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_SWAHILI,
        MapKey,
        GBL_Swahili,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_SWAHILI,
        MapKey,
        GBL_Swahili,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_SWAHILI,
        MapKey,
        GBL_Swahili,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_SWAHILI__) */
	

	#ifdef __MMI_GB_SWEDISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_SWEDISH,
        MapKey,
        GBL_Swedish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_SWEDISH,
        MapKey,
        GBL_Swedish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_SWEDISH,
        MapKey,
        GBL_Swedish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_SWEDISH,
        MapKey,
        GBL_Swedish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_SWEDISH,
        MapKey,
        GBL_Swedish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_SWEDISH,
        MapKey,
        GBL_Swedish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_SWEDISH__) */
		#if defined(__MMI_GB_TAMIL__)
	{	
		IMM_INPUT_MODE_SMART_TAMIL,
		MapKey,
		GBL_Tamil,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_TAMIL,
		MapKey,
		GBL_Tamil,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_TAMIL__) */
			#if defined(__MMI_GB_TELUGU__)
	{	
		IMM_INPUT_MODE_SMART_TELUGU,
		MapKey,
		GBL_Telugu,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_TELUGU,
		MapKey,
		GBL_Telugu,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_TELUGU__) */
		
	#if defined(__MMI_GB_THAI__)
	{	
		IMM_INPUT_MODE_SMART_THAI,
		MapKey,
		GBL_Thai,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//    #if defined(__MMI_GUOBI_MULTITAP__)
	{	
		IMM_INPUT_MODE_MULTITAP_THAI,
		MapKey,
		GBL_Thai,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		NULL,
		NULL,
		mmi_ime_goubi_word_get_candidates_alphabetic
	},
//	#endif /* #if defined(__MMI_GUOBI_MULTITAP__) */
	#endif /* #if defined(__MMI_GB_THAI__) */
	#if defined(__MMI_GB_TR_CHINESE__)
	 {
		IMM_INPUT_MODE_TR_MULTITAP_BOPOMO,
    MapKey,
		GBL_Traditional_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_stroke,
    mmi_ime_guobi_get_associates,
    mmi_ime_guobi_get_candidates_zhuyin
	},
    {
		IMM_INPUT_MODE_TR_STROKE,
        MapKey,
		GBL_Traditional_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_stroke,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_stroke
	},
	{
		IMM_INPUT_MODE_QUICK_SEARCH_BOPOMO,
    MapKey,
		GBL_Traditional_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_stroke,
    mmi_ime_guobi_get_associates,
    mmi_ime_guobi_get_candidates_zhuyin
	},
	{
		IMM_INPUT_MODE_QUICK_SEARCH_TR_STROKE,
        MapKey,
		GBL_Traditional_Chinese,
		MMI_IME_REQUIRED_ALL_KEYS,
		MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
		mmi_ime_guobi_get_spellings_stroke,
        mmi_ime_guobi_get_associates,
        mmi_ime_guobi_get_candidates_stroke
	},
    #endif /*#if defined(__MMI_GB_TR_CHINESE__) */
#ifdef __MMI_GB_TURKISH__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_TURKISH,
        MapKey,
        GBL_Turkish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_TURKISH,
        MapKey,
        GBL_Turkish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_TURKISH,
        MapKey,
        GBL_Turkish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_TURKISH,
        MapKey,
        GBL_Turkish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_TURKISH,
        MapKey,
        GBL_Turkish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_TURKISH,
        MapKey,
        GBL_Turkish,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_TURKISH__) */

    #ifdef __MMI_GB_UKRAINIAN__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_UKRAINIAN,
        MapKey,
        GBL_Ukrainian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_UKRAINIAN,
        MapKey,
        GBL_Ukrainian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_UKRAINIAN,
        MapKey,
        GBL_Ukrainian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_UKRAINIAN,
        MapKey,
        GBL_Ukrainian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_UKRAINIAN,
        MapKey,
        GBL_Ukrainian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_UKRAINIAN,
        MapKey,
        GBL_Ukrainian,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS ,
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_UKRAINIAN__) */
	


			#ifdef __MMI_GB_URDU__
    {   
        IMM_INPUT_MODE_SMART_URDU,
        MapKey,
        GBL_Urdu,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },  
    //#if defined (__MMI_GUOBI_MULTITAP__)
    {   
        IMM_INPUT_MODE_MULTITAP_URDU,
        MapKey,
        GBL_Urdu,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_URDU__) */
#ifdef __MMI_GB_VIETNAMESE__
    {   
        IMM_INPUT_MODE_SMART_LOWERCASE_VIETNAMESE,
        MapKey,
        GBL_Vietnamese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_UPPERCASE_VIETNAMESE,
        MapKey,
        GBL_Vietnamese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_VIETNAMESE,
        MapKey,
        GBL_Vietnamese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    // #if defined (__MMI_GUOBI_MULTITAP__)
     {   
        IMM_INPUT_MODE_MULTITAP_UPPERCASE_VIETNAMESE,
        MapKey,
        GBL_Vietnamese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_FIRST_UPPERCASE_VIETNAMESE,
        MapKey,
        GBL_Vietnamese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
    {   
        IMM_INPUT_MODE_MULTITAP_LOWERCASE_VIETNAMESE,
        MapKey,
        GBL_Vietnamese,
        MMI_IME_REQUIRED_ALL_KEYS,
        MMI_IME_REQUIRED_ALL_NUM_KEYS & (~MMI_IME_REQUIRED_KEY_0),
        NULL,
        NULL,
        mmi_ime_goubi_word_get_candidates_alphabetic
    },
   // #endif
	#endif /* #if defined(__MMI_GB_VIETNAMESE__) */
	{
       	IMM_INPUT_MODE_MAX_NUM,
       	NULL,
       	GBL_NULL,
       	0,
       	0,
       	NULL,
       	NULL,
       	NULL
    }

};




mmi_ime_mode_info_struct_p	g_ime_info_mode_p;
GBAuxInfo					g_aux_info;	 
GBEngine 					g_ime_engine;
GBInputStruct				g_ime_init_mode;

#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_set_ldb_index
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
void mmi_ime_set_ldb_index(U16 index)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	ldb_index = index;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_get_ldb_index
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
U16 mmi_ime_get_ldb_index(void)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	return ldb_index;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_memory_card_config_loadldb_flag
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_memory_card_config_loadldb_flag(MMI_BOOL is_on)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	loadldbflag = is_on;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_memory_card_get_loadldb_flag
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_memory_card_get_loadldb_flag()
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	return loadldbflag;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_is_database_in_memory_card
 * DESCRIPTION
 *  To check if the database on the memory card is ok or not
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
static MMI_BOOL mmi_ime_memory_card_check_database(U8 *filename, GBLANG nlang)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                                                         */
    /*----------------------------------------------------------------*/
    char header_data[MAX_LDB_HEADER_FILE_SIZE];
	FS_HANDLE handle;
	WCHAR path[MAX_LDB_PATH_LENGTH];
	U32 read_size;
	GBLANG sublang;
	GBLANG lang;
	GBUINT32 filesize;
    /*----------------------------------------------------------------*/
    /* Code Body                                                                                               */
    /*----------------------------------------------------------------*/
	ASSERT(filename != NULL);
	
	kal_wsprintf((WCHAR *)path, "%c:\\%s%s",SRV_FMGR_CARD_DRV,MMI_IME_LDB_MEMORY_CARD_PATH,filename);
    handle = FS_Open(path, FS_READ_ONLY);
	if(handle < FS_NO_ERROR)
	{
		FS_Close(handle);
		return MMI_FALSE;
	}

	if(FS_Read(handle, header_data, sizeof(header_data), &read_size) >= FS_NO_ERROR)
	{
		if(GBGetDataLanguage(header_data, &lang, &sublang, &filesize) == GBOK && lang == nlang)
		{
			FS_Close(handle);
		    return MMI_TRUE;
		}

	}
	FS_Close(handle);
	return MMI_FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_load_database_from_memory_card
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
static MMI_BOOL mmi_ime_load_database_from_memory_card(U8 *filename)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                                                         */
    /*----------------------------------------------------------------*/
    char header_data[MAX_LDB_HEADER_FILE_SIZE];
	FS_HANDLE handle;
	WCHAR path[MAX_LDB_PATH_LENGTH];
	U32 read_size;
	GBLANG sublang;
	GBLANG lang;
	GBUINT32 filesize;
    /*----------------------------------------------------------------*/
    /* Code Body                                                                                               */
    /*----------------------------------------------------------------*/
	ASSERT(filename != NULL);
	

	kal_wsprintf((WCHAR *)path, "%c:\\%s%s",SRV_FMGR_CARD_DRV,MMI_IME_LDB_MEMORY_CARD_PATH,filename);
    handle = FS_Open(path, FS_READ_ONLY);
	if(handle < FS_NO_ERROR)
	{
		goto RET_FALSE;
	}

	if(FS_Read(handle, header_data, sizeof(header_data), &read_size) >= FS_NO_ERROR)
	{
		if(GBGetDataLanguage(header_data, &lang, &sublang, &filesize) == GBOK)
		{
			g_ldb_data.nLang = lang;
			g_ldb_data.nSubLang = sublang;
			g_ldb_data.pData = g_memory_card_ldb_buffer;
			prev_lang = lang;
			FS_Seek(handle, 0, SEEK_SET);
			if((FS_Read(handle, (GBU8*)g_ldb_data.pData, filesize, &read_size) < FS_NO_ERROR) || read_size < filesize)
			{
				goto RET_FALSE;
			}
			ASSERT(read_size <= MAX_LDB_DATA_BUFFER_SIZE);
			FS_Close(handle);
		    return MMI_TRUE;
		}

	}
RET_FALSE:
	MMI_TRACE(MMI_FW_TRC_G5_IME,TRC_MMI_IME_LOAD_MEMORY_CARD_LDB_FAIL);
	FS_Close(handle);
	return MMI_FALSE;
}

#endif
static UI_character_type mmi_ime_guobi_word_symbol_to_code(U16 symbol);




static UI_character_type mmi_ime_guobi_word_symbol_to_code(U16 symbol)
{
#if defined(__MMI_GB_SM_CHINESE__) 
	if (MMI_IMC_IS_SYMB_PY(symbol))
	{
            return g_key_map_alphabetic[(symbol - MMI_IMC_SYMB_PY_BASE) ];
	}
	else if(MMI_IMC_IS_SYMB_STROKE(symbol))
	{
		return g_key_map_alphabetic[(symbol - MMI_IMC_SYMB_STROKE_BASE)];
	}
	else
	#endif
	{
        if(symbol>=MMI_IMC_SYMB_KEY_A&&symbol<=MMI_IMC_SYMB_KEY_Z)
        {
        return g_key_map_alphabetic[(symbol - MMI_IMC_SYMB_KEY_BASE)-2 ];
        }
        else
	   return g_key_map_alphabetic[(symbol - MMI_IMC_SYMB_KEY_BASE) ];
	}
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_get_spellings
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_get_spellings(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
	mmi_ime_memory_card_reinitialize_word_engine(g_current_mode_details_ptr);
#endif
	result_ptr->result_cnt = 0;

    if (g_ime_engine.ime_mode_info_p)
    {
        if ( NULL != g_ime_engine.ime_mode_info_p->get_spell_funcptr )
        {
            g_ime_engine.ime_mode_info_p->get_spell_funcptr( param_ptr, result_ptr );
        }
    }
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_goubi_word_get_candidates_alphabetic
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_goubi_word_get_candidates_alphabetic(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{

	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	S32  i = 0, j = 0,k=0 ;
	S32  max_no_of_cand = 32;
	S32 max_no_of_assc = 3;
	U16 TempString[32] = {0};
	UI_string_type str;
	GBINT result_cnt = 0;
	GBRETURN ret;
    U16 first_index;
	sIMEModeDetails * mode_details_ptr;
	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    first_index = param_ptr->first_index;
	memset((result_ptr->result_buffer), 0, sizeof(result_ptr->result_buffer));
	result_ptr->result_cnt = 0;
	mode_details_ptr = (sIMEModeDetails *)mmi_imm_get_input_mode_array_item(mmi_imm_get_curr_input_mode());
	MMI_ASSERT(mode_details_ptr != NULL);
      #if defined(__MMI_IME_V3__)
	mmi_ime_word_change_mode(mode_details_ptr,0);
    /*
	     ret = GBSetCurLanguage(&g_ime_init_mode, g_ime_engine.ime_mode_info_p->nLdbNum, 0);
		 if(ret != GBOK)
		 {
			 mmi_ime_word_deinit();
			 is_inited = MMI_FALSE;
			  mmi_ime_word_init();
               mmi_ime_word_change_mode(mode_details_ptr,0);
			 //return;
          }*/
          if( param_ptr->elembuf_cnt>=31)
          {
           #if defined(__MMI_IME_USER_DATABASE__)
              
                    result_ptr->result_cnt = 0;
                    result_ptr->next_page = MMI_FALSE;

                 
                #endif
		return;
          }
          if(param_ptr->elembuf_ptr[i]>=MMI_IMC_SYMB_KEY_1&&param_ptr->elembuf_ptr[i]<=MMI_IMC_SYMB_KEY_9)
          {
              ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
          for(i = 0; i< param_ptr->elembuf_cnt; i++)
		{
					TempString[i] = mmi_ime_guobi_word_symbol_to_code(param_ptr->elembuf_ptr[i]);
		}
          }
      else if(param_ptr->elembuf_ptr[i]>=MMI_IMC_SYMB_KEY_A&&param_ptr->elembuf_ptr[i]<=MMI_IMC_SYMB_KEY_Z)
          {
              ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Qwerty_Alphabetic);
          for(i = 0; i< param_ptr->elembuf_cnt; i++)
		{
					TempString[i] = mmi_ime_guobi_word_symbol_to_code(param_ptr->elembuf_ptr[i]);
		}
          }
          else
          {
              ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Explicit_Alphabetic);
          for(i = 0; i< param_ptr->elembuf_cnt; i++)
		{
		    TempString[i] = param_ptr->elembuf_ptr[i];
                    TempString[i] = mmi_towlower(TempString[i]);
		}
          }
    #else
        ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
		for(i = 0; i< param_ptr->elembuf_cnt; i++)
		{
					TempString[i] = mmi_ime_guobi_word_symbol_to_code(param_ptr->elembuf_ptr[i]);
		}
    #endif
		ret = GBMMIReset(g_ime_engine.ime_init_mode_p);
		ret = GBMMISetDefaultCandListType(g_ime_engine.ime_init_mode_p, GBCL_ROW_KEYBD);
		ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, max_no_of_cand);
 		ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, max_no_of_assc);
	    GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_B, GBL_English, GBL_Sub_Not_Spec, GBIM_Predictive);
        ret= GBSetCandType(g_ime_engine.ime_init_mode_p, GBCT_Normal); 
		if ((mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE))
	   {
			ret  = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 0);
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 1); 
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 0, 0);
		
	   }
    
       else if (mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_UPPERCASE)
	   {
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 1);
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 0); 
	   }
        else if (mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_TITLECASE)
	   {
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 0);
            if(param_ptr->elembuf_cnt==1)
            {
                ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 0); 
            }
			
	   }
		//GBSetEngineOption(g_ime_engine.ime_init_mode_p,GB_ENGINE_FUNCTION, GBFO_Alp_UAW, 0);//close alphabic new word database
        //GBSetEngineOption(g_ime_engine.ime_init_mode_p,GB_ENGINE_FUNCTION, GBFO_Alp_No_Response_When_Key_No_Cand, 1); 
		 for(i = 0; i< param_ptr->elembuf_cnt; i++)
         {
	 		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
         if( (ret != GBOK)||(!(mmi_ucs2cmp((S8*) g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[0], (S8*) L"Spell?"))))
	       {
		//no more candidates
       #if defined(__MMI_IME_USER_DATABASE__)
              
                    result_ptr->result_cnt = 0;
                    result_ptr->next_page = MMI_FALSE;

                 
                #endif
		return;
	}
         }
	
	/*
    else if(first_index > g_ime_engine.ime_init_mode_p->outputInfo.nFirstCandIndex)
	{
		//next page candidate
	     ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
	     if(ret == GBOK)
	{
		   int t;
		   t =0;
	}
	}
	else if(first_index <= g_ime_engine.ime_init_mode_p->outputInfo.nFirstCandIndex)
	{
		//previous page candidate
          ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_PREV_PAGE_CANDIATE, 0);
	     if(ret == GBOK)
	     {
		   int t;
		   t =0;
	     }
	}
    */
              
	result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
	
	if (param_ptr->first_index >= result_cnt)
    {
        return;
    }
	str = result_ptr->result_buffer;
	j = first_index;
	k=0;
	while(j < (param_ptr->desired_cnt+first_index) && j < result_cnt)
	{
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
		*str= 0;
		str++;
		j++;
		k++;
	}
	result_ptr->result_cnt = k;
	
	 if (param_ptr->desired_cnt < result_cnt - first_index)
    {
        result_ptr->next_page = MMI_TRUE;
    }
    else
    {
        result_ptr->next_page = MMI_FALSE;
    }
	
}
#if defined(__MMI_GB_SM_CHINESE__) || defined(__MMI_GB_TR_CHINESE__)
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_word_symbol_to_code_stroke
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
UI_character_type mmi_ime_guobi_word_symbol_to_code_stroke(U16 symbol)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	    switch(symbol)
		{
		
			case MMI_IMC_SYMB_STROKE_OVER:
		             return '1' ;
					
		        case MMI_IMC_SYMB_STROKE_DOWN:
		             return '2';
					
		        case MMI_IMC_SYMB_STROKE_LEFT:
		             return '3';
					
		        case MMI_IMC_SYMB_STROKE_DOT:
		             return '4';
					
		        case MMI_IMC_SYMB_STROKE_OVER_DOWN:     
			
				     return '5';

			    case MMI_IMC_SYMB_STROKE_WILDCARD:
				     return '6';
				
			default:
				return 0;
		}
		
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_spellings_stroke
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_get_spellings_stroke(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{

	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	switch(*param_ptr->elembuf_ptr)
		{
		case MMI_IMC_SYMB_KEY_1:
	            *result_ptr->result_buffer  =  0x4E00  ;
		          result_ptr->result_cnt  =  1;
	            break;
	    case MMI_IMC_SYMB_KEY_2:
	            *result_ptr->result_buffer  =  0x4E28 ;	
			    result_ptr->result_cnt  =  1;
	            break;
	    case MMI_IMC_SYMB_KEY_3:
	            *result_ptr->result_buffer  =  0x4E3F ;
		        result_ptr->result_cnt  =  1;
				break;
	    case MMI_IMC_SYMB_KEY_4:
	            *result_ptr->result_buffer  =  0x4E36;
		        result_ptr->result_cnt  =  1;
	            break;
	     case MMI_IMC_SYMB_KEY_5:     
			     *result_ptr->result_buffer  =  0xF005;
		         result_ptr->result_cnt  =  1;
			    break;

		case MMI_IMC_SYMB_KEY_6:
		       *result_ptr->result_buffer  =  0xF000;
		       result_ptr->result_cnt  =  1;
	            break;

		default:
			*result_ptr->result_buffer  =  0;
			result_ptr->result_cnt  =  0;
			break;
	}
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_associates
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_get_associates(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{

	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32  j = 0, CanNum = 0;
	UI_string_type str = NULL;
	U16 first_index,need_to_fetch;
    U8 total_fetched=0;
	GBRETURN ret;
	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
   first_index = param_ptr->first_index;
    memset((result_ptr->result_buffer), 0, sizeof(result_ptr->result_buffer));
   if(first_index == 0)
   {
        mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, param_ptr->first_index);
		  GBMMIReset(g_ime_engine.ime_init_mode_p);
		  ret = GBGetAssocWord(g_ime_engine.ime_init_mode_p, param_ptr->pre_string, GBTrue );
		  if(ret == GBOK)
		 {
			
		  }
		  if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
				str = result_ptr->result_buffer;
				while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
							*str= 0;
							str++;
							j++;
				}
		  }
    if(result_ptr->result_cnt<param_ptr->desired_cnt &&result_ptr->next_page)
       {
           need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
       

          mmi_ime_guobi_GetNextPageAssociates(&g_ime_engine);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);

                j=0;
				while(j < need_to_fetch )
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
		*str= 0;
							str++;
							j++;
				}
		  }
       }
   }
   else
{
    mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, 0);
    GBMMIReset(g_ime_engine.ime_init_mode_p);
ret = GBGetAssocWord(g_ime_engine.ime_init_mode_p, param_ptr->pre_string, GBTrue );
result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
total_fetched=total_fetched+CanNum;
while(total_fetched<first_index)
{
 					//mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, 0);
          mmi_ime_guobi_GetNextPageAssociates(&g_ime_engine);
CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
total_fetched=total_fetched+CanNum;
result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
		if(!result_ptr->next_page)
		{
			break;
		}
}
		if((total_fetched==first_index) )
		{
            //mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, 0);
            result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
		if(!result_ptr->next_page)
		{
			return;
		}
          mmi_ime_guobi_GetNextPageAssociates(&g_ime_engine);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
				str = result_ptr->result_buffer;
				while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
							*str= 0;
							str++;
							j++;
				}
		  }
    if(result_ptr->result_cnt<param_ptr->desired_cnt &&result_ptr->next_page)
       {
           need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
       

          mmi_ime_guobi_GetNextPageAssociates(&g_ime_engine);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);

                j=0;
				while(j < need_to_fetch )
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
		*str= 0;
							str++;
							j++;
				}
		  }
       }
      }
       else
       {
       j= CanNum-(total_fetched- first_index);
       result_ptr->result_cnt= total_fetched- first_index;
       str = result_ptr->result_buffer;
       while(j < param_ptr->desired_cnt && j < CanNum)
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
							*str= 0;
							str++;
							j++;
				}
       if(!result_ptr->next_page)
       {
       return;
       }
				need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
          mmi_ime_guobi_GetNextPageAssociates(&g_ime_engine);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
				//str = result_ptr->result_buffer;
                j=0;
				while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
							*str= 0;
							str++;
							j++;
				}
		  }
    
		  }
		  
       
       
}
   

}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_candidates_stroke
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_get_candidates_stroke(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{

	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	S32  i = 0, j = 0 ;
	S32  max_no_of_cand = 1;
	S32 max_no_of_assc = 1;
	U16 first_index;
	U16 TempString[32] = {0};
	UI_string_type str = NULL;
	GBRETURN ret;
   U16 need_to_fetch =0 , total_fetched=0 ,CanNum=0;


	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    first_index = param_ptr->first_index;
	result_ptr->result_cnt = 0;
	if(param_ptr->elembuf_cnt >MMI_IME_GUOBI_MAX_LIMIT_KEY_STROKE)
	{
		return;
	}
	
	
//	if(first_index == 0)// first cand page
	{
		     for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
				TempString[i] = mmi_ime_guobi_word_symbol_to_code_stroke(param_ptr->elembuf_ptr[i]);
				if(TempString[i] == 0)
				{
					return;
				}
		    }
		    ret = GBMMIReset(g_ime_engine.ime_init_mode_p);
		ret = GBMMISetDefaultCandListType(g_ime_engine.ime_init_mode_p, GBCL_ROW_KEYBD);
	ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, max_no_of_cand);
 	ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, max_no_of_assc);
    if(g_ime_engine.ime_mode_info_p->input_mode==IMM_INPUT_MODE_TR_STROKE)
    {
    ret = GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_B, GBL_Traditional_Chinese, GBL_Sub_Not_Spec, GBIM_Stroke);
    }
    else if(g_ime_engine.ime_mode_info_p->input_mode==IMM_INPUT_MODE_SM_STROKE)
    {
	ret = GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_B, GBL_Chinese, GBL_Sub_Not_Spec, GBIM_Stroke);
    }
	mmi_ime_guobi_setpageoption_for_candidate(0, param_ptr->desired_cnt, param_ptr->first_index);
			//memset(&(g_ime_engine.ime_init_mode_p->inputString), 0, GB_INPUT_BUFFER_LEN*sizeof(GBWCHAR));
			g_ime_engine.ime_init_mode_p->inputStringLen = 0;
		
	}
if(first_index == 0)
	       {
		 for(i = 0; i< param_ptr->elembuf_cnt; i++)
		{
	 			ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
				if (ret !=GBOK)
				{
					return;
				}
		 }  
             result_ptr->result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
	          str = result_ptr->result_buffer;
             while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
	             {
		             S32 str_len;
		             str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		             memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		             str += str_len;
		             *str= 0;
		             str++;
		             j++;
	}
       }
	
             else
             {
          for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
	 			ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
                                if (ret !=GBOK)
				{
					return;
				}
			}
			CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
			total_fetched=total_fetched+CanNum;
            result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
		while(first_index>total_fetched)
	{
		//next page candidate
	     ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
            if (ret !=GBOK)
	     {
		return;
	     }
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				total_fetched=total_fetched+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);	
				if(!result_ptr->next_page)
				{
						break;
	}
		}
		if((total_fetched==first_index) )
	{
            //mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, 0);
            result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
		if(!result_ptr->next_page)
		{
			return;
	}
         	ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = CanNum;
     result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
	 str = result_ptr->result_buffer;
				while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
				{
							S32 str_len;
		                str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		                memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		                str += str_len;
							*str= 0;
							str++;
							j++;
				}
		  }
    if(result_ptr->result_cnt<param_ptr->desired_cnt &&result_ptr->next_page)
       {
           need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
       
		
         	ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);

                j=0;
				while(j < need_to_fetch )
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
		*str= 0;
							str++;
							j++;
				}
		  }
       }
      }
      else
       {
       j= CanNum-(total_fetched- first_index);
       result_ptr->result_cnt= total_fetched- first_index;
       str = result_ptr->result_buffer;
       while(j < param_ptr->desired_cnt && j < CanNum)
					{
							S32 str_len;
							str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
							memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
							str += str_len;
							*str= 0;
							str++;
							j++;
				}
       if(!result_ptr->next_page)
       {
       return;
       }
						need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           	mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
          		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  	{
					CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
					result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
					result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
					//str = result_ptr->result_buffer;
          j=0;
	while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
	{
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len * sizeof(UI_character_type));
		str += str_len;
		*str= 0;
		str++;
		j++;
	}
}
    
		  }
}
	      result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);

}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_spellings_pinyin
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_get_spellings_pinyin(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{

	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	U16 TempString[32] = {0};
	S32 i, j=0,k=0;
	U16 result_cnt;
	GBRETURN ret;
	UI_string_type str;
	U16 first_index;
	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	result_ptr->result_cnt = 0;
	first_index = param_ptr->first_index;
		for(i = 0; i< param_ptr->elembuf_cnt; i++)
	    {
					TempString[i] = mmi_ime_guobi_word_symbol_to_GBcode(param_ptr->elembuf_ptr[i]);
		}
			ret = GBMMIReset(g_ime_engine.ime_init_mode_p);
				ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Pinyin);
				mmi_ime_guobi_setpageoption( 0);
				ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, 1);
				ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, 1);
	/* below code is to convert number syllable to string if required*/
	/*
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Chn_Display_Input_Key_Sequence, 0);
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Chn_Up_To_Input_Key_Sequence, 0);
            ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_CHINESE, GBCFG_ADD_TRANSLATE_INPUT_STRING_TO_SYLLABLE, 1);
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Chn_All_Num_Can_Continuously_Input, 0);
	*/
		i = 0;
		while(TempString[i])
		{
					ret = mmi_ime_guobi_send_key_event(&g_ime_engine, TempString[i++], 0);
					if (ret !=GBOK)
					{
						return;
					}
		}
	/*
	//this code may be needed when get next page syllable
	else if(first_index > g_ime_engine.ime_init_mode_p->pAuxInfo->nSyllableIndex)
	{
           mmi_ime_guobi_send_key_event(&g_ime_engine, GBKEY_NEXT_PAGE_SYLLABLE, 0);
	}
	else
	{
           mmi_ime_guobi_send_key_event(&g_ime_engine, GBKEY_PREV_PAGE_SYLLABLE, 0);
	}*/
  
    result_cnt = g_ime_engine.ime_init_mode_p->pAuxInfo->nSyllableNum;
	//is_next_page =  mmi_ime_guobi_HaveNextSyllPage(&g_ime_engine);
	if (param_ptr->first_index >= result_cnt )
	{
        return;
    }
	     
		str = result_ptr->result_buffer;
		j = first_index;
		k=0;
		str = result_ptr->result_buffer;
		while(j < (param_ptr->desired_cnt+first_index) && j < result_cnt)
		{
			    S32 str_len;
		        str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->pAuxInfo->pSyllables[j]);
				memcpy(str, g_ime_engine.ime_init_mode_p->pAuxInfo->pSyllables[j],str_len * sizeof(UI_character_type));
				str += str_len;
				*str= 0;
				str++;
				j++;
					k++;
		}
		result_ptr->result_cnt = k;
		if (param_ptr->desired_cnt < result_cnt - first_index)
		{
			result_ptr->next_page = MMI_TRUE;
		}
		else
		{
			result_ptr->next_page = MMI_FALSE;
	}

}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_candidates_pinyin
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_get_candidates_pinyin(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{

	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	S32  i = 0, j = 0 ;
	S32  max_no_of_cand = 1;
	S32 max_no_of_assc = 1;
	U16 TempString[32] = {0};
	UI_string_type str;
	GBRETURN ret;
	U16 first_index;

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

	result_ptr->result_cnt = 0;
	first_index = param_ptr->first_index;
	if(param_ptr->elembuf_cnt >32)
	{
		return;
	}
	if(first_index == 0)
	{
		    for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
				TempString[i] = mmi_ime_word_symbol_to_code(param_ptr->elembuf_ptr[i]);
		    }
		    ret = GBMMIReset(g_ime_engine.ime_init_mode_p);
			ret = GBMMISetDefaultCandListType(g_ime_engine.ime_init_mode_p, GBCL_ROW_KEYBD);
			 if(ret == GBOK)
			{
			}
			ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, max_no_of_cand);
			 if(ret == GBOK)
			{
				
			}
 			ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, max_no_of_assc);
			 if(ret == GBOK)
			{
				
			}
			ret = GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_B, GBL_Chinese, GBL_Sub_Not_Spec, GBIM_Pinyin);
			if(ret == GBOK)
			{
				
			}
			

			 /*if (param_ptr->first_index >= result_cnt)
			{
				return;
			}*/
			 for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
	 			ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
				
			}
			 
	}
	else if(first_index > g_ime_engine.ime_init_mode_p->outputInfo.nFirstCandIndex)
	{
		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
	     if(ret == GBOK)
	     {
		   
	     }
	}
	else
	{
		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_PREV_PAGE_CANDIATE, 0);
	     if(ret == GBOK)
	     {
		   
	     }
	}
	
	result_ptr->result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
	str = result_ptr->result_buffer;
	
	while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
	{
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len * sizeof(UI_character_type));
		str += str_len;
		*str= 0;
		str++;
		j++;
	}
	 
     result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_candidates_pinyin_smart
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_get_candidates_pinyin_smart(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{
     /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	S32  i = 0, j = 0 ;
	S32  max_no_of_cand = 1;
	S32 max_no_of_assc = 1;
	U16 TempString[32] = {0};
	UI_string_type str = NULL;
	GBRETURN ret;
	U16 first_index;
    U16 need_to_fetch =0 , total_fetched=0 ,CanNum=0;

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(param_ptr->elembuf_cnt >32)
	{
		return;
	}
	result_ptr->result_cnt = 0;
	first_index = param_ptr->first_index;
    if ( param_ptr->tone_value >= MMI_IMC_SYMB_TONE_1 && param_ptr->tone_value <= MMI_IMC_SYMB_TONE_5)
    {
        return;
    }
	
		/*if(mmi_imc_get_state() == MMI_IMC_STATE_SPELL_INPUTING)
		{
			
			
				GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p, GBEVENT_SELECT_SYLLABLE_PAGED,1);
			
		}
		else*/
		{
		     for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
				TempString[i] = mmi_ime_word_symbol_to_code(param_ptr->elembuf_ptr[i]);
			}
		     if(TempString[0] >= 'a' && TempString[0] <= 'z')
			{
				ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Qwerty_Pinyin );
			}
			 else
			 {
                  ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Pinyin );
			 }
		    ret = GBMMIReset(g_ime_engine.ime_init_mode_p);
			ret = GBMMISetDefaultCandListType(g_ime_engine.ime_init_mode_p, GBCL_ROW_KEYBD);
			ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, max_no_of_cand);
 			ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, max_no_of_assc);
			ret = GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_B, GBL_Chinese, GBL_Sub_Not_Spec, GBIM_Pinyin);
			mmi_ime_guobi_setpageoption_for_candidate(0, param_ptr->desired_cnt, param_ptr->first_index);

			 /*if (param_ptr->first_index >= result_cnt)
			{
				return;
			}*/
           
		}
			 
	
       if(first_index == 0)
	       {
			 for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
	 			ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
                                if (ret !=GBOK)
				{
					return;
				}
			}
             result_ptr->result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
	          str = result_ptr->result_buffer;
             while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
	             {
		             S32 str_len;
		             str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		             memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		             str += str_len;
		             *str= 0;
		             str++;
		             j++;
	}
		}
			 
             else
             {
          for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
	 			ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
                                if (ret !=GBOK)
				{
					return;
	}
			}
			CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
			total_fetched=total_fetched+CanNum;
            result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
		while(first_index>total_fetched)
	{
		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
               if (ret !=GBOK)
	       {
	           return;
		}
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				total_fetched=total_fetched+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);	
				if(!result_ptr->next_page)
				{
						break;
	}
		}
		if((total_fetched==first_index) )
	{
            //mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, 0);
            result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
		if(!result_ptr->next_page)
		{
			return;
	}
         	ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
	str = result_ptr->result_buffer;
				while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
				{
							S32 str_len;
		                str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		                memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		                str += str_len;
							*str= 0;
							str++;
							j++;
				}
		  }
    if(result_ptr->result_cnt<param_ptr->desired_cnt &&result_ptr->next_page)
       {
           need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
       
	
         	ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  {
				CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
				result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
				result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);

                j=0;
				while(j < need_to_fetch )
				{
							S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
		*str= 0;
							str++;
							j++;
				}
		  }
       }
      }
      else
       {
       j= CanNum-(total_fetched- first_index);
       result_ptr->result_cnt= total_fetched- first_index;
       str = result_ptr->result_buffer;
       while(j < param_ptr->desired_cnt && j < CanNum)
					{
							S32 str_len;
							str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
							memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
							str += str_len;
							*str= 0;
							str++;
							j++;
				}
       if(!result_ptr->next_page)
       {
       return;
       }
						need_to_fetch=param_ptr->desired_cnt-result_ptr->result_cnt;
           	mmi_ime_guobi_setpageoption_for_candidate( 0, need_to_fetch,0);
          		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
		   if(g_ime_engine.ime_init_mode_p->outputInfo.nCandNum > 0)
		  	{
					CanNum = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
					result_ptr->result_cnt = result_ptr->result_cnt+CanNum;
					result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
					//str = result_ptr->result_buffer;
          j=0;
	while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
	{
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len* sizeof(UI_character_type));
		str += str_len;
		*str= 0;
		str++;
		j++;
	}
		  }
	 
		  }
}
	 
     result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);
}
#endif
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_get_associates
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_get_associates(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
    mmi_ime_memory_card_reinitialize_word_engine(g_current_mode_details_ptr);
#endif
	  result_ptr->result_cnt = 0;

    if (g_ime_engine.ime_mode_info_p)
    {
        if ( NULL != g_ime_engine.ime_mode_info_p->get_assoc_funcptr )
        {
            g_ime_engine.ime_mode_info_p->get_assoc_funcptr( param_ptr, result_ptr );
        }
    }
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_get_associates
 * DESCRIPTION
 * PARAMETERS
 *  param_ptr       [IN]        
 *  result_ptr      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_get_candidates(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    kal_uint32 time1, time2;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
	mmi_ime_memory_card_reinitialize_word_engine(g_current_mode_details_ptr);
#endif
	kal_get_time(&time1);
	result_ptr->result_cnt = 0;

    if (g_ime_engine.ime_mode_info_p)
    {
        if ( NULL != g_ime_engine.ime_mode_info_p->get_cand_funcptr )
        {
            g_ime_engine.ime_mode_info_p->get_cand_funcptr( param_ptr, result_ptr );
        }
    }
	kal_get_time(&time2);
	MMI_PRINT(MOD_MMI_FW,TRACE_GROUP_8,"[Guobi]candidate recognition time %d %d %d ms",time2,time1, kal_ticks_to_milli_secs(time2 - time1));
	//MMI_TRACE(MMI_FW_TRC_G5_IME, TRC_MMI_FW_HW_CANDIDATES_RECONGNITION_TIME, kal_ticks_to_milli_secs(time2 - time1));
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_is_valid_key
 * DESCRIPTION
 * PARAMETERS
 *  input_mode      [IN]        
 *  key_code        [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL  mmi_ime_word_is_valid_key( mmi_imm_input_mode_enum input_mode, U16 key_code)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    return MMI_FALSE;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_word_symbol_to_GBcode
 * DESCRIPTION
 * PARAMETERS
 *  symbol      [IN]        
 * RETURNS
 *****************************************************************************/
UI_character_type mmi_ime_guobi_word_symbol_to_GBcode(U16 symb_key)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (symb_key >= MMI_IMC_SYMB_KEY_0 && symb_key <= MMI_IMC_SYMB_KEY_POUND)
    {
       return g_key_map_alphabetic[(symb_key - MMI_IMC_SYMB_KEY_0) ];
    }
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_symbol_to_code
 * DESCRIPTION
 * PARAMETERS
 *  symbol      [IN]        
 * RETURNS
 *****************************************************************************/
UI_character_type mmi_ime_word_symbol_to_code(U16 symbol)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (MMI_IMC_IS_SYMB_TONE(symbol))
    {
        switch (symbol)
        {
            case MMI_IMC_SYMB_TONE_1:
                return 0x02C9;
                
            case MMI_IMC_SYMB_TONE_2:
                return 0x02CA;
            case MMI_IMC_SYMB_TONE_3:
                return 0x02C7;
            case MMI_IMC_SYMB_TONE_4:
                return 0x02CB;
            case MMI_IMC_SYMB_TONE_5:
                return 0x02D9;
            default:
                ASSERT(0);
        }
    }
	#if defined(__MMI_GB_SM_CHINESE__) ||defined(__MMI_GB_TR_CHINESE__)
	else if (MMI_IMC_IS_SYMB_STROKE(symbol))
	{
		switch(symbol)
		{
			case MMI_IMC_SYMB_STROKE_OVER:
				//symbol key 1
			    return 0x4E00;  
			
			case MMI_IMC_SYMB_STROKE_DOWN:
		         return 0x4E28 ;
					
		    case MMI_IMC_SYMB_STROKE_LEFT:
		          return 0x4E3F;
					
		    case MMI_IMC_SYMB_STROKE_DOT:
		            return 0x4E36;
					
		     case MMI_IMC_SYMB_STROKE_OVER_DOWN:
		            return 0xF005;
			case MMI_IMC_SYMB_STROKE_WILDCARD:
				return 0xf000;
				
			default:
				return 0x0000;
		}
	}
    #endif
    #if defined(__MMI_GB_SM_CHINESE__)
	else if (MMI_IMC_IS_SYMB_PY(symbol))
	{
		return symbol - MMI_IMC_SYMB_PY_BASE + 'a';
	}
    #endif
	return symbol;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_code_to_symbol
 * DESCRIPTION
 * PARAMETERS
 *  code        [IN]        
 * RETURNS
 *****************************************************************************/
U16 mmi_ime_word_code_to_symbol(UI_character_type code)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    #ifdef __MMI_GB_SM_CHINESE__
	 if (code >= 'a' && code <= 'z')
     {
            return code - 'a' + MMI_IMC_SYMB_PY_A; 
     }
	 else if(code >= 'A' && code <= 'Z')
	 {
	        return code - 'A' + MMI_IMC_SYMB_PY_A; 
	 }
     
	#endif
	#if defined(__MMI_GB_SM_CHINESE__) || defined(__MMI_GB_TR_CHINESE__)
	 switch(code)
	 {
              case 0x4E00:
              case 0xf004:
				  return MMI_IMC_SYMB_STROKE_OVER;
	      case 0x4E28:
              case 0xf001:
				  return MMI_IMC_SYMB_STROKE_DOWN;
	      case 0x4E3F:	
              case 0xf007:
				  return MMI_IMC_SYMB_STROKE_LEFT;
	      case 0x4E36:		
              case 0xf002:
				  return MMI_IMC_SYMB_STROKE_DOT;
	      case 0xF005:     
				  return MMI_IMC_SYMB_STROKE_OVER_DOWN;
	      
              case 0xf000:
					return MMI_IMC_SYMB_STROKE_WILDCARD;
					
	      case 0x002D:
                  return MMI_IMC_SYMB_TONE_1;
		
              case 0x02CA:
                 return MMI_IMC_SYMB_TONE_2;
        
              case 0x02C7:
                 return MMI_IMC_SYMB_TONE_3;
        
              case 0x02CB:
                  return MMI_IMC_SYMB_TONE_4;
		
              case 0x02D9:
                  return MMI_IMC_SYMB_TONE_5;
	 }
    #endif
     #ifdef __MMI_GB_TR_CHINESE__
        if (code >= 0x3105 && code <= 0x3129)
        {
            return code ;//- 0x3105 + MMI_IMC_SYMB_ZY_BASE; /* mmi_imc_symbol_bopomofo_enum */
        }
        else
#endif /* __MMI_GB_TR_CHINESE__ */
        {
	 return 0xFF;
        }
	 
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_get_corresponding_stroke
 * DESCRIPTION
 * PARAMETERS
 *  code        [IN]        
 * RETURNS
 *****************************************************************************/
U16 mmi_ime_word_get_corresponding_stroke(UI_character_type code)
{
  #if defined(__MMI_GB_SM_CHINESE__)
    
		switch(code)
		{
			case 0x4E00:
				//symbol key 1
			      return  MMI_IMC_SYMB_STROKE_OVER;
			
			case 0x4E28:
		         return MMI_IMC_SYMB_STROKE_DOWN;
					
		    case 0x4E3F:
		           return MMI_IMC_SYMB_STROKE_LEFT;
					
		    case 0x4E36:
		           return MMI_IMC_SYMB_STROKE_DOT;
					
		     case 0xF005:
		           return MMI_IMC_SYMB_STROKE_OVER_DOWN;
			case 0xf000:
				   return MMI_IMC_SYMB_STROKE_WILDCARD;
				
			default:
				return 0;
		}
  #endif
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_is_symbol_key
 * DESCRIPTION
 * PARAMETERS
 *  input_mode      [IN]        
 *  key_code        [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_is_symbol_key(mmi_imm_input_mode_enum input_mode, mmi_imc_key_custom_value key_code)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
         const sIMEModeDetails * mode_details_ptr = mmi_imm_get_input_mode_array_item(input_mode);
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    
    switch (key_code)
    {
        case MMI_IMC_KEY_UP:
        case MMI_IMC_KEY_DOWN:
        case MMI_IMC_KEY_LEFT:
        case MMI_IMC_KEY_RIGHT:
        case MMI_IMC_KEY_CONFIRM:
        case MMI_IMC_KEY_CANCEL:
        case MMI_IMC_KEY_CLEAR:
            return MMI_FALSE;
        case MMI_IMC_KEY_SYM_0:
        case MMI_IMC_KEY_SYM_1:
        case MMI_IMC_KEY_SYM_2:
        case MMI_IMC_KEY_SYM_3:
        case MMI_IMC_KEY_SYM_4:
        case MMI_IMC_KEY_SYM_5:
        case MMI_IMC_KEY_SYM_6:
        case MMI_IMC_KEY_SYM_7:
        case MMI_IMC_KEY_SYM_8:
        case MMI_IMC_KEY_SYM_9:
             if ((mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_MULTITAP)&&mode_details_ptr->imm_mode_id!=IMM_INPUT_MODE_SM_MULTITAP_PINYIN)
            {
             if (g_ime_engine.ime_mode_info_p->required_keys & (MMI_IME_REQUIRED_KEY_0 << (key_code - MMI_IMC_KEY_SYM_0)))
            {
                return MMI_TRUE;
            }
            else
            {
                return MMI_FALSE;
            }
            }
            if (g_ime_engine.ime_mode_info_p->symbol_keys & (MMI_IME_REQUIRED_KEY_0 << (key_code - MMI_IMC_KEY_SYM_0)))
            {
                return MMI_TRUE;
            }
            else
            {
                return MMI_FALSE;
            }
        case MMI_IMC_KEY_SYM_STAR:
            if (g_ime_engine.ime_mode_info_p->symbol_keys & MMI_IME_REQUIRED_KEY_STAR)
            {
                return MMI_TRUE;
            }
            else
            {
                return MMI_FALSE;
            }
        case MMI_IMC_KEY_SYM_POUND:
            if (g_ime_engine.ime_mode_info_p->symbol_keys & MMI_IME_REQUIRED_KEY_POUND)
            {
                return MMI_TRUE;
            }
            else
            {
                return MMI_FALSE;
            }
        default:
            return MMI_FALSE;
    }
    return MMI_FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_is_redicals
 * DESCRIPTION
 * PARAMETERS
 *  key_code        [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_is_redicals(UI_character_type key_code)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return MMI_FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_is_wildcard
 * DESCRIPTION
 * PARAMETERS
 *  code        [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_is_wildcard(UI_character_type code)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return MMI_FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_add_separator_to_candidate_buffer
 * DESCRIPTION
 * PARAMETERS
 *  destination_buffer      [OUT]       
 *  source_buffer           [IN]        
 *  num                     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_add_separator_to_candidate_buffer(UI_character_type *destination_buffer, UI_character_type *source_buffer, S32 num)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 i = 0, j = 0;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    while (i < num && source_buffer[i] != 0)
    {
        destination_buffer[j] = source_buffer[i];
        destination_buffer[j + 1] = 0; /* Default separator is '\0' */
        i++;
        j += 2;
    }

    destination_buffer[j] = 0;
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_engine_get_char_info
 * DESCRIPTION
 * PARAMETERS
 *  code            [IN]        
 *  info_buffer     [IN]        
 *  buffer_size     [IN]        
 *  mode            [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_engine_get_char_info( UI_character_type wc, UI_string_type pCharInfoBuffer, S32 MaxInfoBuffer, mmi_imm_input_mode_enum inputMode) 
{
	S32 rs, mode_count;
	UI_character_type buffer[32] = {0};//buffer??????32
	sIMEModeDetails * mode_details_ptr = NULL;
	mmi_imm_input_mode_enum MMI_current_input_mode = inputMode;
	U32 lang_beofre_change =  prev_lang;
	UI_string_type temp_buffer = pCharInfoBuffer;
	memset(pCharInfoBuffer, 0, MaxInfoBuffer);
	if(mmi_imc_is_connected())
	{
		mode_details_ptr = (sIMEModeDetails *)mmi_imm_get_input_mode_array_item(mmi_imm_get_curr_input_mode());
	}
	for(mode_count = 0; g_mode_infos[mode_count].input_mode != IMM_INPUT_MODE_MAX_NUM; mode_count++)
	{
		if(g_mode_infos[mode_count].input_mode == MMI_current_input_mode)
		{
			g_ime_engine.ime_mode_info_p = &(g_mode_infos[mode_count]);

			break;
		}
	}
	#ifdef __MMI_PHB_PINYIN_SORT__
	if(MMI_current_input_mode == IMM_INPUT_MODE_QUICK_SEARCH_PINYIN)
	{
#if defined(__MMI_GB_SM_CHINESE__) && defined(__MMI_GB_TR_CHINESE__)

			GBMMIReset(g_ime_engine.ime_init_mode_p);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, GBL_Chinese, GBL_Sub_Not_Spec);  //reload different database
#endif
	    rs = GBWord2CodesByInputmod(g_ime_engine.ime_init_mode_p, GBIM_Pinyin, wc, 0, buffer);
		if(rs != GBOK)
		{
			if(mmi_imc_is_connected())
			{
				mmi_ime_word_change_mode(mode_details_ptr,0);
				GBSetCurLanguage(g_ime_engine.ime_init_mode_p, lang_beofre_change, GBL_Sub_Not_Spec);
			}
			return MMI_FALSE;
		}
		gui_strncpy(pCharInfoBuffer,buffer,gui_strlen(buffer));
		if(mmi_imc_is_connected())
		{
			mmi_ime_word_change_mode(mode_details_ptr,0);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, lang_beofre_change, GBL_Sub_Not_Spec);
		}
		return MMI_TRUE;
		
	}
	else
	{
#endif //end __MMI_PHB_PINYIN_SORT__
		switch (MMI_current_input_mode)
		{
#if defined(__MMI_GB_SM_CHINESE__)
			case IMM_INPUT_MODE_QUICK_SEARCH_PINYIN:
				MMI_current_input_mode = GBIM_Pinyin;
#if defined(__MMI_GB_SM_CHINESE__) && defined(__MMI_GB_TR_CHINESE__)
				GBMMIReset(g_ime_engine.ime_init_mode_p);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, GBL_Chinese, GBL_Sub_Not_Spec);  //reload different database

#endif
				break;
			case IMM_INPUT_MODE_QUICK_SEARCH_SM_STROKE:
				MMI_current_input_mode = GBIM_Stroke;
#if defined(__MMI_GB_SM_CHINESE__) && defined(__MMI_GB_TR_CHINESE__)
				GBMMIReset(g_ime_engine.ime_init_mode_p);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, GBL_Chinese, GBL_Sub_Not_Spec);  //reload different database

#endif
				break;
#endif
 
#if defined(__MMI_GB_TR_CHINESE__)
		case IMM_INPUT_MODE_QUICK_SEARCH_BOPOMO:
			MMI_current_input_mode = GBIM_Bopomofo;
#if defined(__MMI_GB_SM_CHINESE__) && defined(__MMI_GB_TR_CHINESE__)
			
			GBMMIReset(g_ime_engine.ime_init_mode_p);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, GBL_Chinese, GBL_Sub_Not_Spec);
#endif
			break;
        case IMM_INPUT_MODE_QUICK_SEARCH_TR_STROKE:
			MMI_current_input_mode = GBIM_Stroke;
#if defined(__MMI_GB_SM_CHINESE__) && defined(__MMI_GB_TR_CHINESE__)
		
			GBMMIReset(g_ime_engine.ime_init_mode_p);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, GBL_Chinese, GBL_Sub_Not_Spec);
#endif
			break;
#endif
default:
			if(mmi_imc_is_connected())
			{
				mmi_ime_word_change_mode(mode_details_ptr,0);
				GBSetCurLanguage(g_ime_engine.ime_init_mode_p, lang_beofre_change, GBL_Sub_Not_Spec);
			}
             return 0;
    }
    memset(buffer,0,sizeof(buffer));
 
    if((rs = GBWord2CodesByInputmod(g_ime_engine.ime_init_mode_p, MMI_current_input_mode, wc, 0, buffer)) != GBOK) //inverse checking
        if(mmi_imc_is_connected())
		{
			mmi_ime_word_change_mode(mode_details_ptr,0);
			GBSetCurLanguage(g_ime_engine.ime_init_mode_p, lang_beofre_change, GBL_Sub_Not_Spec);
		}
         return 0;
 
#ifdef __MMI_PHB_PINYIN_SORT__
} 
#endif

if(MMI_current_input_mode == GBIM_Pinyin || MMI_current_input_mode == GBIM_Bopomofo)  //in pinyin mode, engine return "a~z" character while it return Phonetic Symbols in BOPOMOFO mode.
{
         gui_strncpy(pCharInfoBuffer,buffer,gui_strlen(buffer));
}
else if(MMI_current_input_mode == GBIM_Stroke) //in stroke mode, the engine return "1~5"
     {
        int i = 0;
        while(buffer[i] !=0)
        {
            switch(buffer[i]) 
            {
                case '1':
                    *temp_buffer++ = 0x4E00;
                    break;
                case '2':
                    *temp_buffer++ = 0x4E28;
                    break;
                case '3':
                    *temp_buffer++ = 0x4E3F;     
                    break;
                case '4':
                    *temp_buffer++ = 0x4E36;
                    break;
                case '5':
#ifdef __GB2312__
      *temp_buffer++ = 0xf005;
#else
                    *temp_buffer++ = 0x4E5B;
#endif
                    break;
                default:
                    break;
            }
     i++;
            }
        }
	mmi_ime_word_change_mode(mode_details_ptr,0);
    return 1;
}

#ifdef __MMI_IME_MEMORY_CARD_SUPPORT__

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_update_ldb_status_info
 * DESCRIPTION
 *  update the lab support information
 * PARAMETERS
 *  void
 * RETURNS
 *****************************************************************************/
static void mmi_ime_update_ldb_status_info(mmi_imm_support_writing_lang_enum lang_id, MMI_BOOL is_support)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                                                         */
    /*----------------------------------------------------------------*/
	int i;
    /*----------------------------------------------------------------*/
    /* Code Body                                                                                                */
    /*----------------------------------------------------------------*/
	for(i=0; g_ime_ldb_status[i].lang_id != NULL; i++)
	{
		if(g_ime_ldb_status[i].lang_id == lang_id)
		{
			g_ime_ldb_status[i].is_vendor_support = is_support;
			return;
		}
	}
	g_ime_ldb_status[i].lang_id = lang_id;
	g_ime_ldb_status[i++].is_vendor_support = is_support;
	g_ime_ldb_status[i].lang_id = NULL;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_check_ldb_support_info
 * DESCRIPTION
 *  update the lab support information
 * PARAMETERS
 *  void
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_check_ldb_support_info(mmi_imm_support_writing_lang_enum lang_id)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                                                         */
    /*----------------------------------------------------------------*/
	int i;
    /*----------------------------------------------------------------*/
    /* Code Body                                                                                                */
    /*----------------------------------------------------------------*/
	for(i=0; i< MAX_LDB_NUMBER; i++)
	{
		if(g_ime_ldb_status[i].lang_id == lang_id)
		{
			return g_ime_ldb_status[i].is_vendor_support;
		}
	}
	return MMI_FALSE;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_memory_card_is_language_supported_by_vendor
 * DESCRIPTION
 *  to check whether current language can be supported by vendor or not
 * PARAMETERS
 *  void
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_memory_card_is_language_supported_by_vendor(mmi_imm_support_writing_lang_enum lang_id)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                                                         */
    /*----------------------------------------------------------------*/
	int i;
    /*----------------------------------------------------------------*/
    /* Code Body                                                                                                */
    /*----------------------------------------------------------------*/
	for(i=0; g_ime_ldb_storage_infor_tbl[i].lang_id != IME_WRITING_LANG_NONE; i++)
	{
		if(g_ime_ldb_storage_infor_tbl[i].lang_id == lang_id)
		{
			if(g_ime_ldb_storage_infor_tbl[i].ime_storage_mode & MMI_IME_LDB_STORAGE_IN_ROM)
			{
				mmi_ime_update_ldb_status_info(lang_id, MMI_TRUE);
				return MMI_TRUE; //always support when storage ldb in ROM
			}
			else if(g_ime_ldb_storage_infor_tbl[i].ime_storage_mode & MMI_IME_LDB_STORAGE_IN_CARD)
			{
				if(srv_fmgr_drv_is_accessible((U8)SRV_FMGR_CARD_DRV))
				{
					if(mmi_ime_memory_card_check_database(g_ime_ldb_storage_infor_tbl[i].ime_file_name,g_ime_ldb_storage_infor_tbl[i].GBlang) == MMI_TRUE)
					{
						mmi_ime_update_ldb_status_info(lang_id, MMI_TRUE);
						return MMI_TRUE;
					}
				}
				else 
				{
					//vendor  can not supported when no memory card and not storage ldb in ROM
					mmi_ime_update_ldb_status_info(lang_id, MMI_FALSE);
					return MMI_FALSE;
				}
			}
			else
			{
				//vendor  can not supported when not storage in memory card and ROM
				mmi_ime_update_ldb_status_info(lang_id, MMI_FALSE);
				return MMI_FALSE; 
			}
		}
	
	}
	mmi_ime_update_ldb_status_info(lang_id, MMI_FALSE);
	return MMI_FALSE; //vendor not support this language
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_init
 * DESCRIPTION
 *  Initialize word engine object
 * PARAMETERS
 *  void
 * RETURNS
 *****************************************************************************/

//char temp[5704];
//GBLDB x[1] ;



MMI_BOOL mmi_ime_word_init(void)
{
  	
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	
    /*----------------------------------------------------------------*/
    /* Code Body                                                                                                */
    /*----------------------------------------------------------------*/

	if(is_inited == MMI_TRUE)
    {
     	return is_inited;
    }
	
	g_ime_engine.ime_init_mode_p = &g_ime_init_mode;
	g_ime_engine.aux_p =  &g_aux_info;
	g_ime_engine.ldbs_num_map_p = &g_ldb_data;
	g_ime_init_mode.pAuxInfo = &g_aux_info;
	g_ime_init_mode.engine_private_buffer_size = sizeof(g_ime_init_mode.engine_private_buffer);
	g_ime_engine.case_type = IME_MODE_ATTR_LOWERCASE;

	g_ime_engine.g_nDataCount = 1;  //only load one ldb one time in memory card feature
   
   
	if(GBInitialize((g_ime_engine.ime_init_mode_p), g_ime_engine.ldbs_num_map_p, g_ime_engine.g_nDataCount) == 0)
    {
        is_inited= MMI_TRUE;
        
    }
    #if defined(__MMI_IME_USER_DATABASE__)
	    is_inited = mmi_ime_word_load_user_database();
    #endif
    return is_inited;
	
	
}
 

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_deinit
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_deinit(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	g_ldb_data.nLang = GBL_NULL;
	g_ldb_data.nSubLang = GBL_Sub_Not_Spec;
	g_ldb_data.pData = NULL;
	g_ime_engine.ime_init_mode_p = NULL;
	g_ime_engine.aux_p = NULL;
	g_ime_engine.ldbs_num_map_p = NULL;
	g_ime_engine.key_map_p = NULL;
	g_ime_engine.ime_mode_info_p = NULL;
	g_ime_info_mode_p = NULL;
	g_ime_init_mode.pAuxInfo = NULL;
	is_inited = MMI_FALSE;
    prev_lang = 0;
	memset(&g_ime_init_mode, 0, sizeof(GBInputStruct));
    memset(&g_ime_engine, 0, sizeof(GBEngine));
	memset(&g_aux_info, 0, sizeof(GBAuxInfo)); 
	
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_memory_card_reinitialize_word_engine
 * DESCRIPTION
 * PARAMETERS
 *  mode_details_ptr        [IN]        
 * RETURNS
 *****************************************************************************/
void mmi_ime_memory_card_reinitialize_word_engine(const sIMEModeDetails * mode_details_ptr)
{
	/*----------------------------------------------------------------*/
	/* Local Variables												          */
	/*----------------------------------------------------------------*/
	U8 *filename = NULL;
	U16 index;
	/*----------------------------------------------------------------*/
	/* Code Body													           */
	/*----------------------------------------------------------------*/
	if(mmi_ime_memory_card_get_loadldb_flag() && g_ime_engine.ime_mode_info_p->nLdbNum != prev_lang) //only load ldb from memory card when get candidates for performance
	{
		index = mmi_ime_get_ldb_index();
		filename = g_ime_ldb_storage_infor_tbl[index].ime_file_name;
		mmi_ime_word_deinit();
		mmi_ime_load_database_from_memory_card(filename);
		mmi_ime_word_init();
	#if defined(__MMI_IME_USER_DATABASE__)
		if(isUDBattach== GBOK)
		{
			mmi_GB_engine_unload_UDB();
		}
	#endif
		GBSetCurLanguage(&g_ime_init_mode, g_ldb_data.nLang, g_ldb_data.nSubLang);
    #if defined(__MMI_IME_USER_DATABASE__)
		mmi_GB_engine_load_UDB();
    #endif
		mmi_ime_memory_card_config_loadldb_flag(MMI_FALSE);
		mmi_ime_word_change_mode(mode_details_ptr,0);
		
	}
	else if(mmi_ime_memory_card_get_loadldb_flag())
	{
		mmi_ime_memory_card_config_loadldb_flag(MMI_FALSE); 
		mmi_ime_word_change_mode(mode_details_ptr,0); //need to call change mode api again, when loaddb flag is on and language is not changed
	}
	
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_change_mode
 * DESCRIPTION
 * PARAMETERS
 *  mode_details_ptr        [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_change_mode(const sIMEModeDetails *mode_details_ptr,U32 reserved)
{
	/*----------------------------------------------------------------*/
	/* Local Variables												  */
	/*----------------------------------------------------------------*/
	
	S32  mode_count = 0, i = 0;
	GBSUBLANG sub_lang;
	GBRETURN ret;
	MMI_BOOL lazy_load_ldb_flag = mmi_ime_memory_card_get_loadldb_flag();
	/*----------------------------------------------------------------*/
	/* Code Body													  */
	/*----------------------------------------------------------------*/
	
	//need to put break in for loop
	for(mode_count = 0; g_mode_infos[mode_count].input_mode != IMM_INPUT_MODE_MAX_NUM; mode_count++)
	{
		if(g_mode_infos[mode_count].input_mode == mode_details_ptr->imm_mode_id)
		{
			g_ime_engine.ime_mode_info_p = &(g_mode_infos[mode_count]);
	
			break;
		}
	}
	for(i = 0; g_ldbs_map[i].nLang != GBL_NULL; i ++)
	{
		if(g_ime_engine.ime_mode_info_p->nLdbNum == g_ldbs_map[i].nLang)
		{
			sub_lang = g_ldbs_map[i].nSubLang;
			 
			break;
		}
	}

	if(lazy_load_ldb_flag == MMI_TRUE && g_ime_engine.ime_mode_info_p->nLdbNum != prev_lang) //only load ldb from memory card when get candidates for performance
	{
		g_current_mode_details_ptr = mode_details_ptr;
		return MMI_TRUE;
	}
	else if(lazy_load_ldb_flag == MMI_FALSE && g_ime_engine.ime_mode_info_p->nLdbNum != prev_lang)// use ldb in ROM
	{
		mmi_ime_word_deinit();
		g_ldb_data.nLang = g_ldbs_map[i].nLang;
		g_ldb_data.nSubLang = g_ldbs_map[i].nSubLang;
		g_ldb_data.pData = g_ldbs_map[i].pData;
		mmi_ime_word_init();
		//ctt begin
		
		for(mode_count = 0; g_mode_infos[mode_count].input_mode != IMM_INPUT_MODE_MAX_NUM; mode_count++)
		{
			if(g_mode_infos[mode_count].input_mode == mode_details_ptr->imm_mode_id)
			{
				g_ime_engine.ime_mode_info_p = &(g_mode_infos[mode_count]);
	
				break;
			}
		}
		//ctt end

	}
	else if(lazy_load_ldb_flag == MMI_TRUE)
	{
		mmi_ime_memory_card_config_loadldb_flag(MMI_FALSE); //does not need to reload ldb when language is not changed
	}
	
	// GBMMIReset(&(g_ime_engine.ime_init_mode_p));
	if(g_ime_engine.ime_mode_info_p->nLdbNum != prev_lang)
	{
    #if defined(__MMI_IME_USER_DATABASE__)
		if(isUDBattach== GBOK)
		{
			mmi_GB_engine_unload_UDB();
		}
	#endif
		ret = GBSetCurLanguage(&g_ime_init_mode, g_ime_engine.ime_mode_info_p->nLdbNum, sub_lang);
		if(ret == GBOK)
		{
			
		}
    #if defined(__MMI_IME_USER_DATABASE__)
		mmi_GB_engine_load_UDB();
    #endif
	   	prev_lang =	g_ime_engine.ime_mode_info_p->nLdbNum ;
	}
		
	if(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_MULTITAP)
	{
		if(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE)
		{
			g_ime_engine.ime_init_mode_p->nCandType = GBCT_MultiTap_Lower;
		}
		if((mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_TITLECASE)||(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_UPPERCASE))
		{
			g_ime_engine.ime_init_mode_p->nCandType = GBCT_MultiTap_Cap;
		}
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
	}
		 
	switch(g_ime_engine.ime_mode_info_p->input_mode)
	{
		case IMM_INPUT_MODE_SMART_UPPERCASE_ABC:
		case IMM_INPUT_MODE_SMART_LOWERCASE_ABC:
		case IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ABC:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Explicit_Alphabetic);
			break;
		case IMM_INPUT_MODE_SM_MULTITAP_PINYIN:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Qwerty_Pinyin);
			break;
		case IMM_INPUT_MODE_SM_PINYIN:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Pinyin);
			break;
		case IMM_INPUT_MODE_SM_STROKE:
		case IMM_INPUT_MODE_TR_STROKE:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Stroke);
			break;
		case IMM_INPUT_MODE_TR_MULTITAP_BOPOMO:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Explicit_Bopomofo);
			break;
		default:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
			break;
				 //nothing
	}
	if(ret == GBOK)
	{
			
	}
    #if defined(__MMI_IME_FUZZY_PINYIN__)
	for(i=0;i<IME_FUZZY_PINYIN_MAX;i++)
	{
		ret =GBSetFuzzy(g_ime_engine.ime_init_mode_p, g_fuzzy_array[i], g_fuzzy_pinyin_state[i] );
	}
    #endif
		
	/*	if ((mode_details_ptr->Lang_Special_Attrib & IME_MODE_ATTR_LOWERCASE))
		{
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 1); 
			ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 0, 0);
			
		}
		
		else if (mode_details_ptr->Lang_Special_Attrib & IME_MODE_ATTR_UPPERCASE)
		{
			ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 1);
			ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
		}*/
		
	
		return MMI_TRUE;
}

#else
MMI_BOOL mmi_ime_word_init(void)
{
  	
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	S32 ldb_count= 0;
	
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

	if(is_inited==MMI_TRUE)
    {
     return is_inited;
    }
	
	g_ime_engine.ime_init_mode_p = &g_ime_init_mode;
	g_ime_engine.aux_p =  &g_aux_info;
	g_ime_engine.ldbs_num_map_p = g_ldbs_map ;
	g_ime_init_mode.pAuxInfo = &g_aux_info;
	g_ime_init_mode.engine_private_buffer_size = sizeof(g_ime_init_mode.engine_private_buffer);
	g_ime_engine.case_type = IME_MODE_ATTR_LOWERCASE;

	for( ldb_count = 0; g_ldbs_map[ldb_count].nLang != GBL_NULL; ldb_count++);
    {
	g_ime_engine.g_nDataCount = ldb_count;
    
    }
   
	if(GBInitialize((g_ime_engine.ime_init_mode_p), g_ime_engine.ldbs_num_map_p, g_ime_engine.g_nDataCount) == 0)
    {
        is_inited= MMI_TRUE;
        
    }
    #if defined(__MMI_IME_USER_DATABASE__)
	    is_inited = mmi_ime_word_load_user_database();
    #endif
    return is_inited;
	
	
}
 

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_deinit
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_deinit(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

	g_ime_engine.ime_init_mode_p = NULL;
	g_ime_engine.aux_p = NULL;
	g_ime_engine.ldbs_num_map_p = NULL;
	g_ime_engine.key_map_p = NULL;
	g_ime_engine.ime_mode_info_p = NULL;
	g_ime_info_mode_p = NULL;
	g_ime_init_mode.pAuxInfo = NULL;
    prev_lang = 0;
	memset(&g_ime_init_mode, 0, sizeof(GBInputStruct));
    memset(&g_ime_engine, 0, sizeof(GBEngine));
	memset(&g_aux_info, 0, sizeof(GBAuxInfo)); 
	is_inited = MMI_FALSE;
	
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_change_mode
 * DESCRIPTION
 * PARAMETERS
 *  mode_details_ptr        [IN]        
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_change_mode(const sIMEModeDetails *mode_details_ptr,U32 reserved)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

	S32  mode_count = 0, i = 0;
	GBSUBLANG sub_lang = GBL_Sub_Not_Spec;
    GBRETURN ret;
	/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

	//need to put break in for loop
	for(mode_count = 0; g_mode_infos[mode_count].input_mode != IMM_INPUT_MODE_MAX_NUM; mode_count++)
	{
		if(g_mode_infos[mode_count].input_mode == mode_details_ptr->imm_mode_id)
		{
			g_ime_engine.ime_mode_info_p = &(g_mode_infos[mode_count]);

			break;
		}
	}
	for(i = 0; g_ldbs_map[i].nLang != GBL_NULL; i ++)
	{
		if(g_ime_engine.ime_mode_info_p->nLdbNum == g_ldbs_map[i].nLang)
		{
			sub_lang = g_ldbs_map[i].nSubLang;
         
			break;
		}
	}
   // GBMMIReset(&(g_ime_engine.ime_init_mode_p));
     if(g_ime_engine.ime_mode_info_p->nLdbNum != prev_lang)
     {
         #if defined(__MMI_IME_USER_DATABASE__)
     if(isUDBattach== GBOK)
      {
    mmi_GB_engine_unload_UDB();
     }
#endif
	ret = GBSetCurLanguage(&g_ime_init_mode, g_ime_engine.ime_mode_info_p->nLdbNum, sub_lang);
    if(ret == GBOK)
	{
		
	}
    #if defined(__MMI_IME_USER_DATABASE__)
    mmi_GB_engine_load_UDB();
    #endif
   prev_lang =  g_ime_engine.ime_mode_info_p->nLdbNum ;
     }
	 if(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_MULTITAP)
    {
    if(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE)
    {
    g_ime_engine.ime_init_mode_p->nCandType = GBCT_MultiTap_Lower;
   
    }
    if((mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_TITLECASE)||(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_UPPERCASE))
    {
    g_ime_engine.ime_init_mode_p->nCandType = GBCT_MultiTap_Cap;
   
    }
    ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
    }
     
	switch(g_ime_engine.ime_mode_info_p->input_mode)
	{
	    case IMM_INPUT_MODE_SMART_UPPERCASE_ABC:
		case IMM_INPUT_MODE_SMART_LOWERCASE_ABC:
			case IMM_INPUT_MODE_SMART_FIRST_UPPERCASE_ABC:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Explicit_Alphabetic);
			break;
		case IMM_INPUT_MODE_SM_MULTITAP_PINYIN:
			 ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Qwerty_Pinyin);
			 break;
		case IMM_INPUT_MODE_SM_PINYIN:
            ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Pinyin);
			break;
		case IMM_INPUT_MODE_SM_STROKE:
        case IMM_INPUT_MODE_TR_STROKE:
            ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Stroke);
			break;
        case IMM_INPUT_MODE_TR_MULTITAP_BOPOMO:
           ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Explicit_Bopomofo);
			break;
		default:
			ret = GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
			break;
             //nothing
	}
	if(ret == GBOK)
	{
		
	}
    #if defined(__MMI_IME_FUZZY_PINYIN__)
    for(i=0;i<IME_FUZZY_PINYIN_MAX;i++)
    {
    ret =GBSetFuzzy(g_ime_engine.ime_init_mode_p, g_fuzzy_array[i], g_fuzzy_pinyin_state[i] );
    }
    #endif
    
/*	if ((mode_details_ptr->Lang_Special_Attrib & IME_MODE_ATTR_LOWERCASE))
	{
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 1); 
    	ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 0, 0);
		
	}
    
    else if (mode_details_ptr->Lang_Special_Attrib & IME_MODE_ATTR_UPPERCASE)
	{
    	ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 1);
        ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
	}*/
    

	return MMI_TRUE;
}
#endif

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_leave_current_mode
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_word_leave_current_mode(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_have_next_cand_page
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL mmi_ime_guobi_have_next_cand_page(PGBEngine g_ime_engine)
{
     /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	if( GBHaveNextPage( g_ime_engine->ime_init_mode_p ) == GBOK )
		return MMI_TRUE;
	else
		return MMI_FALSE;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_GetNextPageAssociates
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_GetNextPageAssociates(PGBEngine g_ime_engine)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	S32 nStartIndex = 0;
	GBRETURN ret;

	if( mmi_ime_guobi_have_next_cand_page(g_ime_engine) != MMI_FALSE )
	{		
		nStartIndex = g_ime_engine->ime_init_mode_p->outputInfo.nCandNum + g_ime_engine->ime_init_mode_p->outputInfo.nFirstCandIndex;
		ret = GBNextPageCandidate(g_ime_engine->ime_init_mode_p, nStartIndex);
		if(ret == GBOK)
	   {
		   
	   }
		
	}
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_GetPrevPageAssociates
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void mmi_ime_guobi_GetPrevPageAssociates(PGBEngine g_ime_engine)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	S32 ret = mmi_ime_guobi_have_prev_cand_page(g_ime_engine);
	S32 nStartIndex = 0;

	if( ret != 0 )
	{
		nStartIndex = g_ime_engine->ime_init_mode_p->outputInfo.nFirstCandIndex - 1;
		GBPrevPageCandidate(g_ime_engine->ime_init_mode_p, nStartIndex);
	}
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_have_prev_cand_page
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
S32 mmi_ime_guobi_have_prev_cand_page(PGBEngine g_ime_engine)
{
     /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	
	if( g_ime_engine->ime_init_mode_p->pAuxInfo->nStatus == GBIMS_ALP_UAW_NO_MORE_CAND )
		return 1;
	else if( GBHavePrevPage( g_ime_engine->ime_init_mode_p ) == GBOK )
		return 2;
	else
		return 0;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_send_key_event
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
GBRETURN mmi_ime_guobi_send_key_event(PGBEngine g_ime_engine, GBINT evt, GBU32 param)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
   GBRETURN ret;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	ret = GBMMIHandleKeyEvent(g_ime_engine->ime_init_mode_p, evt, param);
	return ret;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_setpageoption
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
GBRETURN mmi_ime_guobi_setpageoption( GBBOOL isftepage)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	GBGlobalPageOption pageOption;
	GBRETURN ret;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ret = GBGetPageOption(g_ime_engine.ime_init_mode_p, &pageOption);
	pageOption.fpGetWStringWidth = mmi_ime_guobi_GetStrWidth;

	pageOption.mChnCandPageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
/*	if(isftepage)
	{
		pageOption.mChnCandPageOption.nTotalWidthInPixel = (CAND_WIDTH -GB_SEL_BOX_FTE_ARROW_WIDTH * 2 - GB_RESIZABLE_COMPOSITION_BOX_SPACING*2 - 2);
		pageOption.mChnCandPageOption.nSplitWidthInPixel = GB_SEL_BOX_CAND_SPACING * 2 + 2;  
	}
	else*/
	{
		pageOption.mChnCandPageOption.nTotalWidthInPixel = CAND_AREA_WIDTH*3;
		pageOption.mChnCandPageOption.nSplitWidthInPixel = CAND_LINE_SPLIT_WIDTH;
	}
	pageOption.mSyllablePageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
	/*if(isftepage)
	{
		pageOption.mSyllablePageOption.nTotalWidthInPixel = (CAND_WIDTH - GB_SEL_BOX_FTE_ARROW_WIDTH * 2 - GB_RESIZABLE_COMPOSITION_BOX_SPACING*2 - 2);
		pageOption.mSyllablePageOption.nSplitWidthInPixel = GB_SEL_BOX_CAND_SPACING * 2 + 2;  
	}
	else*/
	{
		pageOption.mSyllablePageOption.nTotalWidthInPixel = CAND_AREA_WIDTH*3;
		pageOption.mSyllablePageOption.nSplitWidthInPixel = CAND_LINE_SPLIT_WIDTH;
	}

	pageOption.mPageOption.nMaxCandCountPerPage = GB_LATIN_CANDIDATE_COUNT;
	/*if(isftepage)
	{
		pageOption.mPageOption.nTotalWidthInPixel  = (CAND_WIDTH - GB_SEL_BOX_FTE_ARROW_WIDTH * 2 - GB_RESIZABLE_COMPOSITION_BOX_SPACING*2 - 2);
		pageOption.mPageOption.nSplitWidthInPixel = GB_SEL_BOX_CAND_SPACING * 2 + 2;  
	}
	else*/
	{
		pageOption.mPageOption.nTotalWidthInPixel = CAND_AREA_WIDTH*3;
		pageOption.mPageOption.nSplitWidthInPixel = CAND_LINE_SPLIT_WIDTH*3;
	}
	
	pageOption.mPageOption.nCharWidthInPixel = 0;

	ret = GBSetPageOption(g_ime_engine.ime_init_mode_p, &pageOption);
	return ret;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_GetStrWidth
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
S32 mmi_ime_guobi_GetStrWidth(void * pParam, GBLPCWCHAR str)
{
	gui_set_font(&MMI_medium_font);
	return gui_get_string_width((UI_string_type)str);
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_is_IsChnUAWStatus
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL mmi_ime_guobi_is_ChnUAWStatus(PGBEngine g_ime_engine)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	
//	ASSERT(GBIsInited((g_ime_engine->ime_init_mode_p)) == GBOK && g_ime_engine->engine_opened);
	return (MMI_BOOL)(mmi_ucs2strlen((const S8 *)g_ime_engine->ime_init_mode_p->pAuxInfo->pSyllables[0]) > 0 
		&&  (g_ime_engine->ime_init_mode_p->pAuxInfo->pSyllables[0][0] > '9' || g_ime_engine->ime_init_mode_p->pAuxInfo->pSyllables[0][0] < '0'));
		
    
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_setpageoption_for_candidate
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
GBRETURN mmi_ime_guobi_setpageoption_for_candidate( GBBOOL isftepage, U8 count, U8 first_index)
{
      /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	GBGlobalPageOption pageOption;
	GBRETURN ret;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ret = GBGetPageOption(g_ime_engine.ime_init_mode_p, &pageOption);
    #ifdef __MMI_UI_VIRTUAL_KEYBOARD_DEFAULT_VERSION_3__ 
    if(mmi_imc_get_ui_style(MMI_IMC_UI_STYLE_VK_ON))
    {
	     pageOption.mChnCandPageOption.nMaxCandCountPerPage = count;
	     //pageOption.mSyllablePageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
	      pageOption.mPageOption.nMaxCandCountPerPage = count+first_index;
    }
    #if defined(__MMI_IME_CANDIDATE_GRID__)
    else if(mmi_imc_is_grid_state())
    {
        pageOption.mChnCandPageOption.nMaxCandCountPerPage = count;
			  //pageOption.mSyllablePageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
	      pageOption.mPageOption.nMaxCandCountPerPage = count+first_index;
    }
    #endif
    else
    {
    pageOption.mChnCandPageOption.nMaxCandCountPerPage = 4;
	//pageOption.mSyllablePageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
	pageOption.mPageOption.nMaxCandCountPerPage = 4;
    }
      #else
        pageOption.mChnCandPageOption.nMaxCandCountPerPage = 4;
	//pageOption.mSyllablePageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
	pageOption.mPageOption.nMaxCandCountPerPage = 4;
       #endif
       ret = GBSetPageOption(g_ime_engine.ime_init_mode_p, &pageOption);
	return ret;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_setpageoption_for_candidate
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
GBRETURN mmi_ime_guobi_setpageoption_for_alphabetic_candidate( GBBOOL isftepage, U8 count, U8 first_index)
{
      /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	GBGlobalPageOption pageOption;
	GBRETURN ret;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    ret = GBGetPageOption(g_ime_engine.ime_init_mode_p, &pageOption);

        pageOption.mChnCandPageOption.nMaxCandCountPerPage = count;
	//pageOption.mSyllablePageOption.nMaxCandCountPerPage = GB_CN_CANDIDATE_COUNT;
	pageOption.mPageOption.nMaxCandCountPerPage = count;
       
       ret = GBSetPageOption(g_ime_engine.ime_init_mode_p, &pageOption);
	return ret;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_have_syllable
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
S32 mmi_ime_guobi_have_syllable(PGBEngine g_ime_engine)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
      
	   return GBIS_HaveSyllableSelection(g_ime_engine->ime_init_mode_p);
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_have_syllable
 * DESCRIPTION
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL mmi_ime_guobi_HaveNextSyllPage(PGBEngine g_ime_engine)
{
     /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*--------------------------------------------s--------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(!mmi_ime_guobi_have_syllable(g_ime_engine))
		return 0;
	return (GBU8)(GBIS_HaveMoreSyllable(g_ime_engine->ime_init_mode_p));
}



/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_change_word_case
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
void   mmi_ime_word_change_word_case(mmi_ime_word_capital_state_enum capital_state)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    
}
#if defined(__MMI_IME_USER_DATABASE__)
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_change_word_case
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
mmi_ime_word_add_new_word_ret_value_enum mmi_ime_word_add_new_word(mmi_imm_input_mode_enum input_mode, UI_string_type str_ptr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    GBRETURN ret;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
ret = GBUDBAddPhrase(g_ime_engine.ime_init_mode_p, str_ptr,NULL );
     if(GBOK == ret)
    {
        return MMI_IME_WORD_ADD_NEW_WORD_SUCCESS;
     }
     else
     {
      return MMI_IME_WORD_ADD_NEW_WORD_FAILED;
     }

    
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_update_word_frequency
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_update_word_frequency(mmi_imm_input_mode_enum input_mode, UI_string_type str_ptr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    return mmi_ime_word_add_new_word(input_mode, str_ptr);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_load_user_database
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_load_user_database(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
			FS_HANDLE file_handle;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
		file_handle = mmi_ime_gb_open_file(MMI_IME_USER_DATABASE_PATH, MMI_IME_USER_DATABASE_FILE, MMI_TRUE);
    
    if (file_handle == -1)
        return MMI_FALSE;

    mmi_ime_gb_read_file(file_handle, &mmi_ime_gb_user_data[0], sizeof(mmi_ime_gb_user_data) );
    
    mmi_ime_gb_close_file(file_handle);

    return MMI_TRUE;
}
   



/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_save_user_database
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
MMI_BOOL mmi_ime_word_save_user_database(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    FS_HANDLE file_handle;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    file_handle = mmi_ime_gb_open_file(MMI_IME_USER_DATABASE_PATH, MMI_IME_USER_DATABASE_FILE, MMI_TRUE);
    
    if (file_handle == -1)
        return MMI_FALSE;

    mmi_ime_gb_write_file(file_handle, &mmi_ime_gb_user_data[0], sizeof(mmi_ime_gb_user_data) );
    mmi_ime_gb_close_file(file_handle);

    return MMI_TRUE;

}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_gb_open_file
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 ****************************************************************************/
 static FS_HANDLE mmi_ime_gb_open_file(PU16 path_name_ptr, PU16 file_name_ptr, MMI_BOOL is_create_always)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    int ret_val;
    FS_HANDLE file_handle;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_ASSERT(NULL != path_name_ptr);
    MMI_ASSERT(NULL != file_name_ptr);

    ret_val = FS_SetCurrentDir(path_name_ptr);
    if (ret_val < 0)
    {
        ret_val = FS_CreateDir(path_name_ptr);
        if (ret_val < 0 )
        {
            return -1;
        }
        ret_val = FS_SetCurrentDir(path_name_ptr);
        if (ret_val < 0)
        {
            return -1;
        }
    }

    FS_SetAttributes(file_name_ptr, FS_ATTR_ARCHIVE);

    /* try to open file */
    file_handle = FS_Open(file_name_ptr, FS_READ_WRITE | FS_ATTR_ARCHIVE);
    if (file_handle < 0)    /* failed to open existing file, or file not exists */
    {
        if (MMI_FALSE == is_create_always)
        {
            return -1;
        }

        /* try to create file */
        file_handle = FS_Open(file_name_ptr, FS_READ_WRITE | FS_CREATE_ALWAYS | FS_ATTR_ARCHIVE);
        if (file_handle < 0)
        {
            return -1;
        }
    }

    return file_handle;
}

 /*****************************************************************************
 * FUNCTION
 *  mmi_ime_cstar_read_file
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
static U32 mmi_ime_gb_read_file(FS_HANDLE file_handle, PU16 data_ptr, U32 size_in_byte)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int ret_val;
    U32 readed;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (file_handle < 0)
        return 0;

    readed = 0;
    ret_val = FS_Read(file_handle, (void*)data_ptr, size_in_byte, &readed);
    if (ret_val < 0)
        return 0;

    return readed;
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_gb_close_file
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 ****************************************************************************/
static void mmi_ime_gb_close_file(FS_HANDLE file_handle)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (file_handle < 0)
        return;

    FS_Close(file_handle);
}


/*****************************************************************************
 * FUNCTION
 *  mmi_ime_gb_write_file
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
static U32 mmi_ime_gb_write_file(FS_HANDLE file_handle, PU16 data_ptr, U32 size_in_byte)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int ret_val;
    U32 writen;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (file_handle < 0)
        return 0;

    writen = 0;
    ret_val = FS_Write(file_handle, (void*)data_ptr, size_in_byte, &writen);
    if (ret_val < 0)
        return 0;

    return writen;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_word_scan_and_add_new_words
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
void mmi_ime_word_scan_and_add_new_words(UI_string_type str)
{
	/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
	S32 str_len;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

	str_len = mmi_ucs2strlen((const S8 *)str);

	if (str_len == 0)
    {
        return;
	}
  
}
/*****************************************************************************
 * FUNCTION
 *  mmi_GB_engine_load_UDB
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
  void mmi_GB_engine_load_UDB(void)
  {
      
      if(isUDBattach== GBOK)
      {
           mmi_GB_engine_unload_UDB();
      }
       
       isUDBattach= GBUDBAttach(g_ime_engine.ime_init_mode_p, mmi_ime_gb_user_data, sizeof(mmi_ime_gb_user_data), g_ime_engine.ime_init_mode_p->nLang, g_ime_engine.ime_init_mode_p->nSubLang, &UDBID);
      // GBUDBSetUpdateParam();
  }
 /*****************************************************************************
 * FUNCTION
 *  mmi_GB_engine_load_UDB
 * DESCRIPTION
 * PARAMETERS
 * RETURNS
 *****************************************************************************/
 void  mmi_GB_engine_unload_UDB(void)
  {

       GBRETURN ret=GBUDBDetach(g_ime_engine.ime_init_mode_p, UDBID);
  }
#endif /*defined(__MMI_IME_USER_DATABASE__)*/
#if defined  __MMI_GUOBI_MULTITAP__
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_get_string_func
 * DESCRIPTION
 * Returns function pointer which returns multitap string for a given input key
 * PARAMETERS
 * mmi_imm_input_mode_enum input mode for which function pointer to return multitap string is needed
 * RETURNS
 * Returns function pointer which returns multitap string for a given input key
 *****************************************************************************/
get_multitap_string mmi_ime_multitap_vendor_get_string_func( mmi_imm_input_mode_enum input_mode )
{
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    
    S32  mode_count = 0;
    U8 i=0;
    GBSUBLANG sub_lang;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    for(mode_count = 0; g_mode_infos[mode_count].input_mode != IMM_INPUT_MODE_MAX_NUM; mode_count++)
	{
		if(g_mode_infos[mode_count].input_mode == input_mode)
		{
			g_ime_engine.ime_mode_info_p = &(g_mode_infos[mode_count]);

			break;
		}
    }
    if(g_mode_infos[mode_count].input_mode==IMM_INPUT_MODE_MAX_NUM)
    {
    return NULL;
    }
    for(i = 0; g_ldbs_map[i].nLang != GBL_NULL; i ++)
	{
		if(g_ime_engine.ime_mode_info_p->nLdbNum == g_ldbs_map[i].nLang)
		{
			sub_lang = g_ldbs_map[i].nSubLang;
         
			break;
		}
	}
    if (g_ime_engine.ime_mode_info_p)
    {
        return mmi_ime_multitap_vendor_get_string;
    }
    else
    {
            return NULL;
    }
}
    /*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_get_string
 * DESCRIPTION
 * Function which returns multitap string for given key
 * PARAMETERS
 * S32 key pressed
 * RETURNS
 * UI_string_type multitap string mapped on input key
 *****************************************************************************/
static UI_string_type mmi_ime_multitap_vendor_get_string(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    UI_string_type str;
    const sIMEModeDetails * mode_details_ptr;
    S32 i=0;
    U32 result_cnt=0;
    GBRETURN ret;
    GBINT cand=mmi_ime_guobi_word_symbol_to_code(index+MMI_IMC_SYMB_KEY_BASE);
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
	mmi_ime_memory_card_reinitialize_word_engine(g_current_mode_details_ptr);
#endif
    //g_engine.multitap_string_length = 0;
    memset(mt_page_buff, 0, sizeof(mt_page_buff));
    str=mt_page_buff;

    if ( (index >=0  && index <= MMI_IMC_SYMB_KEY_POUND - MMI_IMC_SYMB_KEY_0) )
    {
     
       mode_details_ptr = mmi_imm_get_input_mode_array_item(mmi_imm_get_curr_input_mode());
      if(!mode_details_ptr)
           return NULL; 	
       	mmi_ime_word_change_mode(mode_details_ptr,0);
      mmi_ime_guobi_setpageoption_for_alphabetic_candidate( 0, 24, 0);
	  ret =GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Multi_Tap_Show_Cand_Wnd, 1); 
        if ((mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE))
	   {
            
		ret  = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 0);
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 1); 
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 0, 0);
		
	   }
    
          else if (mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_UPPERCASE)
	   {
               
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 1);
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 0); 
      
	   }
          else if (mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_TITLECASE)
	   {
                      
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 0);
                ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 0); 

            }
			
		  if(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE)
       {
          
           ret=GBSetCandType(&g_ime_init_mode, GBCT_MultiTap_Lower);
       } 
       else
       {
          ret= GBSetCandType(&g_ime_init_mode, GBCT_MultiTap_Cap); 
       }
	
          //GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
          
                       
           ret=GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p, cand, 0);
         

       result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
		
	while( i < result_cnt)
          {
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[i]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[i], sizeof(UI_character_type));
		str += str_len;
                       
		i++;
            }
      
       


    }
    if(ret == GBOK)
	   {
		   
	   }
    mt_page_buff[i]= '\0' ;
    return mt_page_buff;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_get_string_ext
 * DESCRIPTION
 * Function which returns multitap string for given key
 * PARAMETERS
 * S32 key pressed
 * RETURNS
 * UI_string_type multitap string mapped on input key
 *****************************************************************************/
UI_string_type mmi_ime_multitap_vendor_get_string_ext(S32 index , S32 input_mode )
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    UI_string_type str;
    const sIMEModeDetails * mode_details_ptr;
    S32 i=0;
    U32 result_cnt=0;
    GBRETURN ret;
    GBINT cand=mmi_ime_guobi_word_symbol_to_code(index+MMI_IMC_SYMB_KEY_BASE);
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if defined(__MMI_IME_MEMORY_CARD_SUPPORT__)
	mmi_ime_memory_card_reinitialize_word_engine(g_current_mode_details_ptr);
#endif
    //g_engine.multitap_string_length = 0;
    memset(mt_page_buff, 0, sizeof(mt_page_buff));
    str=mt_page_buff;

     if ( (index >=0  && index <= MMI_IMC_SYMB_KEY_POUND - MMI_IMC_SYMB_KEY_0) )
    {
       
        mode_details_ptr = mmi_imm_get_input_mode_array_item(input_mode);
       	mmi_ime_word_change_mode(mode_details_ptr,0);
        GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
      mmi_ime_guobi_setpageoption_for_alphabetic_candidate( 0, 24, 0);
        if ((mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE))
	   {
            ret =GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Multi_Tap_Show_Cand_Wnd, 1); 
		ret  = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 0);
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 1); 
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 0, 0);
		
	   }
    
          else if (mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_UPPERCASE)
	   {
                ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Multi_Tap_Show_Cand_Wnd, 1); 
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 1);
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 0); 
      
	   }
          else if (mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_TITLECASE)
	   {
                       ret =GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Multi_Tap_Show_Cand_Wnd, 1); 
    		ret = GBSetShiftCap(g_ime_engine.ime_init_mode_p, 1, 0);
                ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Cap, 1); 
		ret = GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION, GBFO_Alp_Get_Only_Lower, 0); 

            }
			
		 if(mode_details_ptr->Mode_Special_Attrib & IME_MODE_ATTR_LOWERCASE)
       {
          
           ret=GBSetCandType(&g_ime_init_mode, GBCT_MultiTap_Lower);
       } 
       else
       {
          ret= GBSetCandType(&g_ime_init_mode, GBCT_MultiTap_Cap); 
       }
	
        //  GBSetInputMode(g_ime_engine.ime_init_mode_p, GBIM_Predictive);
          
                       
           ret=GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p, cand, 0);
         

       result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
		
	while( i < result_cnt)
          {
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[i]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[i], sizeof(UI_character_type));
		str += str_len;
                       
		i++;
            }
      
       


    }
    if(ret == GBOK)
	   {
		   
	   }
    mt_page_buff[i]= '\0' ;
    return mt_page_buff;
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_query_key_check_function
 * DESCRIPTION
 * Returns function pointer which checks whether input key is multitap key or not
 * PARAMETERS
 * mmi_imm_input_mode_enum input mode for which function pointer to check key input
 * RETURNS
 * Returns function pointer which checks whether input key is multitap key or not
 *****************************************************************************/
valid_key_check_func mmi_ime_multitap_vendor_query_key_check_function( mmi_imm_input_mode_enum input_mode )
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    S32  mode_count = 0;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

   
 for(mode_count = 0; g_mode_infos[mode_count].input_mode != IMM_INPUT_MODE_MAX_NUM; mode_count++)
	{
		if(g_mode_infos[mode_count].input_mode == input_mode)
		{
			g_ime_engine.ime_mode_info_p = &(g_mode_infos[mode_count]);

			break;
		}
    }
    
    if (g_ime_engine.ime_mode_info_p)
    {
        return mmi_ime_multitap_vendor_valid_key_check;
    }
    else
    {
       return NULL;
    }
}

/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_change_mode
 * DESCRIPTION
 * Changes multitap mode in cstar engine
 * PARAMETERS
 *  sIMEModeDetails *mode_details_ptr to the mode which is needed
 * RETURNS
 * MMI_BOOL
 * MMI_TRUR if successful in changing mode
 *****************************************************************************/
MMI_BOOL mmi_ime_multitap_vendor_change_mode( const sIMEModeDetails *mode_details_ptr, U32 reserved )
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    return mmi_ime_word_change_mode( mode_details_ptr, reserved );
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_init
 * DESCRIPTION
 * Initalize Cstar engine for multitap
 * PARAMETERS
 * NONE
 * RETURNS
 * MMI_BOOL
 * MMI_TRUE Engine was initialized properly
 * MMI_FALSE Enfine was not able to initialize ,most probabaly because user databse was not able to load
 *****************************************************************************/
MMI_BOOL mmi_ime_multitap_vendor_init( void )
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    return mmi_ime_word_init();
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_deinit
 * DESCRIPTION
 * Deinits cstar engine object
 * PARAMETERS
 * NONE
 * RETURNS
 * NONE
 *****************************************************************************/
void mmi_ime_multitap_vendor_deinit( void )
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
mmi_ime_word_deinit();
}
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_multitap_vendor_valid_key_check
 * DESCRIPTION
 * Function which checks whether input key is to be treated as multitap key
 * PARAMETERS
 * mmi_imc_symbol_key_enum sym 
 * RETURNS
 * MMI_BOOL
 * MMI_TRUR in case key is a multitap key
 * MMI_FAlse in case key is not a valid multitap key

 *****************************************************************************/
static MMI_BOOL mmi_ime_multitap_vendor_valid_key_check( mmi_imc_symbol_key_enum sym)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return mmi_ime_word_is_symbol_key(g_ime_engine.ime_mode_info_p->input_mode, sym);
}
#endif
/*****************************************************************************
 * FUNCTION
 *  mmi_ime_guobi_get_candidates_zhuyin
 * DESCRIPTION
 * Function which checks whether input key is to be treated as multitap key
 * PARAMETERS
 * mmi_ime_query_param_struct_p
 * mmi_ime_query_result_struct_p
 * RETURNS
 * void

 *****************************************************************************/
static void mmi_ime_guobi_get_candidates_zhuyin( mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr )
{

/*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32  i = 0, j = 0 ;
	S32  max_no_of_cand = 1;
	S32 max_no_of_assc = 1;
	U16 TempString[32] = {0};
	UI_string_type str;
	GBINT result_cnt = 0;
	GBRETURN ret;
	U16 first_index;

	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/


    result_ptr->result_cnt = 0;
	first_index = param_ptr->first_index;
    if(first_index == 0)
	{
         mmi_ime_guobi_setpageoption_for_candidate( 0, param_ptr->desired_cnt, param_ptr->first_index);
		    for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
				TempString[i] = mmi_ime_word_symbol_to_code(param_ptr->elembuf_ptr[i]);
		    }
		    ret = GBMMIReset(g_ime_engine.ime_init_mode_p);
			ret = GBMMISetDefaultCandListType(g_ime_engine.ime_init_mode_p, GBCL_ROW_KEYBD);
			 if(ret == GBOK)
			{
				
			}
			ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, max_no_of_cand);
			 if(ret == GBOK)
			{
				
			}
 			ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, max_no_of_assc);
			 if(ret == GBOK)
			{
				
			}
			ret = GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_B, GBL_Chinese, GBL_Sub_Not_Spec, GBIM_Bopomofo);
			if(ret == GBOK)
			{
				
			}
			

			 /*if (param_ptr->first_index >= result_cnt)
			{
				return;
			}*/
			 for(i = 0; i< param_ptr->elembuf_cnt; i++)
			{
	 			ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,TempString[i], 0);
				
			}
			 
	}
	else if(first_index > g_ime_engine.ime_init_mode_p->outputInfo.nFirstCandIndex)
	{
		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_NEXT_PAGE_CANDIATE, 0);
	     if(ret == GBOK)
	     {
		   
	     }
         else
             return;
	}
	else
	{
		ret = GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p  ,GBKEY_PREV_PAGE_CANDIATE, 0);
	     if(ret == GBOK)
	     {
		   
	     }
	}
	
	result_ptr->result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
	str = result_ptr->result_buffer;
	
	while(j < param_ptr->desired_cnt && j < result_ptr->result_cnt)
	{
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len * sizeof(UI_character_type));
		str += str_len;
		*str= 0;
		str++;
		j++;
	}
	 
     result_ptr->next_page = mmi_ime_guobi_have_next_cand_page(&g_ime_engine);;

}

extern void mmi_ime_word_get_seamless_switch_candidate(mmi_ime_query_param_struct_p param_ptr, mmi_ime_query_result_struct_p result_ptr)
 {
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32  max_no_of_cand = 32;
	S32 max_no_of_assc = 3;
UI_string_type str;
	GBINT result_cnt = 0;
	GBRETURN ret;
    U16 first_index,j=0;
    	 /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset((result_ptr->result_buffer), 0, sizeof(result_ptr->result_buffer));
    ret = GBMMISetDefaultCandListType(g_ime_engine.ime_init_mode_p, GBCL_ROW_KEYBD);
		ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_INPUT, max_no_of_cand);
 		ret = GBMMISetCandRowCount(g_ime_engine.ime_init_mode_p, GBCS_ASSOCIATE, max_no_of_assc);
    GBSetEngineOption(g_ime_engine.ime_init_mode_p, GB_ENGINE_FUNCTION ,GBFO_Chn_Switch_Alp, 1);
    GBMMISetSwitchOption(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_E, GBL_English, 0, GBIM_Predictive);
  
    GBMMIHandleKeyEvent(g_ime_engine.ime_init_mode_p, GBKEY_AMB_SPECIAL_E, 0) ;
    if(!(mmi_ucs2cmp((S8*) g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[0], (S8*) L"Spell?")))
    {
    return;
    }
    result_ptr->result_cnt = g_ime_engine.ime_init_mode_p->outputInfo.nCandNum;
	str = result_ptr->result_buffer;
	
	while(j < result_ptr->result_cnt)
	{
		S32 str_len;
		str_len = mmi_ucs2strlen((const S8 *)g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j]);
		memcpy(str, g_ime_engine.ime_init_mode_p->outputInfo.pCandidates[j],str_len * sizeof(UI_character_type));
		str += str_len;
		*str= 0;
		str++;
		j++;
	}
}
#endif/*__MMI_GUOBI__*/
